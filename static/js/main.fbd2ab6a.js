/*! For license information please see main.fbd2ab6a.js.LICENSE.txt */
!function(){var e={757:function(e,t,n){e.exports=n(727)},725:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,a){for(var o,u,s=i(e),c=1;c<arguments.length;c++){for(var l in o=Object(arguments[c]))n.call(o,l)&&(s[l]=o[l]);if(t){u=t(o);for(var f=0;f<u.length;f++)r.call(o,u[f])&&(s[u[f]]=o[u[f]])}}return s}},463:function(e,t,n){"use strict";var r=n(791),i=n(725),a=n(296);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));var u=new Set,s={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(s[e]=t,e=0;e<t.length;e++)u.add(t[e])}var f=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d=Object.prototype.hasOwnProperty,p={},v={};function y(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new y(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new y(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new y(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new y(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new y(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new y(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new y(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new y(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new y(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function k(e){return e[1].toUpperCase()}function w(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(v,e)||!d.call(p,e)&&(h.test(e)?v[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,k);m[t]=new y(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,k);m[t]=new y(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,k);m[t]=new y(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new y(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new y(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=60103,x=60106,I=60107,E=60108,T=60114,S=60109,C=60110,A=60112,N=60113,R=60120,P=60115,O=60116,D=60121,L=60128,M=60129,U=60130,F=60131;if("function"===typeof Symbol&&Symbol.for){var j=Symbol.for;_=j("react.element"),x=j("react.portal"),I=j("react.fragment"),E=j("react.strict_mode"),T=j("react.profiler"),S=j("react.provider"),C=j("react.context"),A=j("react.forward_ref"),N=j("react.suspense"),R=j("react.suspense_list"),P=j("react.memo"),O=j("react.lazy"),D=j("react.block"),j("react.scope"),L=j("react.opaque.id"),M=j("react.debug_trace_mode"),U=j("react.offscreen"),F=j("react.legacy_hidden")}var V,q="function"===typeof Symbol&&Symbol.iterator;function B(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=q&&e[q]||e["@@iterator"])?e:null}function z(e){if(void 0===V)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);V=t&&t[1]||""}return"\n"+V+e}var W=!1;function H(e,t){if(!e||W)return"";W=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(s){var r=s}Reflect.construct(e,[],t)}else{try{t.call()}catch(s){r=s}e.call(t.prototype)}else{try{throw Error()}catch(s){r=s}e()}}catch(s){if(s&&r&&"string"===typeof s.stack){for(var i=s.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u])return"\n"+i[o].replace(" at new "," at ")}while(1<=o&&0<=u);break}}}finally{W=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function K(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=H(e.type,!1);case 11:return e=H(e.type.render,!1);case 22:return e=H(e.type._render,!1);case 1:return e=H(e.type,!0);default:return""}}function G(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case I:return"Fragment";case x:return"Portal";case T:return"Profiler";case E:return"StrictMode";case N:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case P:return G(e.type);case D:return G(e._render);case O:t=e._payload,e=e._init;try{return G(e(t))}catch(n){}}return null}function Q(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Y(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function J(e){e._valueTracker||(e._valueTracker=function(e){var t=Y(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function X(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Y(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function $(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=Q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&ie(e,t.type,Q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ie(e,t,n){"number"===t&&$(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function ae(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function oe(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Q(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ue(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Q(n)}}function ce(e,t){var n=Q(t.value),r=Q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function le(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var fe="http://www.w3.org/1999/xhtml",he="http://www.w3.org/2000/svg";function de(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?de(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ve,ye,me=(ye=function(e,t){if(e.namespaceURI!==he||"innerHTML"in e)e.innerHTML=t;else{for((ve=ve||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ve.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ye(e,t)}))}:ye);function ge(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ke={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},we=["Webkit","ms","Moz","O"];function be(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||ke.hasOwnProperty(e)&&ke[e]?(""+t).trim():t+"px"}function _e(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=be(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(ke).forEach((function(e){we.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ke[t]=ke[e]}))}));var xe=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ie(e,t){if(t){if(xe[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function Ee(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Te(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,Ce=null,Ae=null;function Ne(e){if(e=ri(e)){if("function"!==typeof Se)throw Error(o(280));var t=e.stateNode;t&&(t=ai(t),Se(e.stateNode,e.type,t))}}function Re(e){Ce?Ae?Ae.push(e):Ae=[e]:Ce=e}function Pe(){if(Ce){var e=Ce,t=Ae;if(Ae=Ce=null,Ne(e),t)for(e=0;e<t.length;e++)Ne(t[e])}}function Oe(e,t){return e(t)}function De(e,t,n,r,i){return e(t,n,r,i)}function Le(){}var Me=Oe,Ue=!1,Fe=!1;function je(){null===Ce&&null===Ae||(Le(),Pe())}function Ve(e,t){var n=e.stateNode;if(null===n)return null;var r=ai(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var qe=!1;if(f)try{var Be={};Object.defineProperty(Be,"passive",{get:function(){qe=!0}}),window.addEventListener("test",Be,Be),window.removeEventListener("test",Be,Be)}catch(ye){qe=!1}function ze(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var We=!1,He=null,Ke=!1,Ge=null,Qe={onError:function(e){We=!0,He=e}};function Ye(e,t,n,r,i,a,o,u,s){We=!1,He=null,ze.apply(Qe,arguments)}function Je(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Xe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function $e(e){if(Je(e)!==e)throw Error(o(188))}function Ze(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=Je(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return $e(i),e;if(a===r)return $e(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=a;break}if(s===r){u=!0,r=i,n=a;break}s=s.sibling}if(!u){for(s=a.child;s;){if(s===n){u=!0,n=a,r=i;break}if(s===r){u=!0,r=a,n=i;break}s=s.sibling}if(!u)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function et(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var tt,nt,rt,it,at=!1,ot=[],ut=null,st=null,ct=null,lt=new Map,ft=new Map,ht=[],dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pt(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function vt(e,t){switch(e){case"focusin":case"focusout":ut=null;break;case"dragenter":case"dragleave":st=null;break;case"mouseover":case"mouseout":ct=null;break;case"pointerover":case"pointerout":lt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ft.delete(t.pointerId)}}function yt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e=pt(t,n,r,i,a),null!==t&&(null!==(t=ri(t))&&nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function mt(e){var t=ni(e.target);if(null!==t){var n=Je(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Xe(n)))return e.blockedOn=t,void it(e.lanePriority,(function(){a.unstable_runWithPriority(e.priority,(function(){rt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function gt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ri(n))&&nt(t),e.blockedOn=n,!1;t.shift()}return!0}function kt(e,t,n){gt(e)&&n.delete(t)}function wt(){for(at=!1;0<ot.length;){var e=ot[0];if(null!==e.blockedOn){null!==(e=ri(e.blockedOn))&&tt(e);break}for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&ot.shift()}null!==ut&&gt(ut)&&(ut=null),null!==st&&gt(st)&&(st=null),null!==ct&&gt(ct)&&(ct=null),lt.forEach(kt),ft.forEach(kt)}function bt(e,t){e.blockedOn===t&&(e.blockedOn=null,at||(at=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,wt)))}function _t(e){function t(t){return bt(t,e)}if(0<ot.length){bt(ot[0],e);for(var n=1;n<ot.length;n++){var r=ot[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==ut&&bt(ut,e),null!==st&&bt(st,e),null!==ct&&bt(ct,e),lt.forEach(t),ft.forEach(t),n=0;n<ht.length;n++)(r=ht[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ht.length&&null===(n=ht[0]).blockedOn;)mt(n),null===n.blockedOn&&ht.shift()}function xt(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var It={animationend:xt("Animation","AnimationEnd"),animationiteration:xt("Animation","AnimationIteration"),animationstart:xt("Animation","AnimationStart"),transitionend:xt("Transition","TransitionEnd")},Et={},Tt={};function St(e){if(Et[e])return Et[e];if(!It[e])return e;var t,n=It[e];for(t in n)if(n.hasOwnProperty(t)&&t in Tt)return Et[e]=n[t];return e}f&&(Tt=document.createElement("div").style,"AnimationEvent"in window||(delete It.animationend.animation,delete It.animationiteration.animation,delete It.animationstart.animation),"TransitionEvent"in window||delete It.transitionend.transition);var Ct=St("animationend"),At=St("animationiteration"),Nt=St("animationstart"),Rt=St("transitionend"),Pt=new Map,Ot=new Map,Dt=["abort","abort",Ct,"animationEnd",At,"animationIteration",Nt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Rt,"transitionEnd","waiting","waiting"];function Lt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Ot.set(r,t),Pt.set(r,i),c(i,[r])}}(0,a.unstable_now)();var Mt=8;function Ut(e){if(0!==(1&e))return Mt=15,1;if(0!==(2&e))return Mt=14,2;if(0!==(4&e))return Mt=13,4;var t=24&e;return 0!==t?(Mt=12,t):0!==(32&e)?(Mt=11,32):0!==(t=192&e)?(Mt=10,t):0!==(256&e)?(Mt=9,256):0!==(t=3584&e)?(Mt=8,t):0!==(4096&e)?(Mt=7,4096):0!==(t=4186112&e)?(Mt=6,t):0!==(t=62914560&e)?(Mt=5,t):67108864&e?(Mt=4,67108864):0!==(134217728&e)?(Mt=3,134217728):0!==(t=805306368&e)?(Mt=2,t):0!==(1073741824&e)?(Mt=1,1073741824):(Mt=8,e)}function Ft(e,t){var n=e.pendingLanes;if(0===n)return Mt=0;var r=0,i=0,a=e.expiredLanes,o=e.suspendedLanes,u=e.pingedLanes;if(0!==a)r=a,i=Mt=15;else if(0!==(a=134217727&n)){var s=a&~o;0!==s?(r=Ut(s),i=Mt):0!==(u&=a)&&(r=Ut(u),i=Mt)}else 0!==(a=n&~o)?(r=Ut(a),i=Mt):0!==u&&(r=Ut(u),i=Mt);if(0===r)return 0;if(r=n&((0>(r=31-Wt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&o)){if(Ut(t),i<=Mt)return t;Mt=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-Wt(t)),r|=e[n],t&=~i;return r}function jt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Vt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=qt(24&~t))?Vt(10,t):e;case 10:return 0===(e=qt(192&~t))?Vt(8,t):e;case 8:return 0===(e=qt(3584&~t))&&(0===(e=qt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=qt(805306368&~t))&&(t=268435456),t}throw Error(o(358,e))}function qt(e){return e&-e}function Bt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function zt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Wt(t)]=n}var Wt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Ht(e)/Kt|0)|0},Ht=Math.log,Kt=Math.LN2;var Gt=a.unstable_UserBlockingPriority,Qt=a.unstable_runWithPriority,Yt=!0;function Jt(e,t,n,r){Ue||Le();var i=$t,a=Ue;Ue=!0;try{De(i,e,t,n,r)}finally{(Ue=a)||je()}}function Xt(e,t,n,r){Qt(Gt,$t.bind(null,e,t,n,r))}function $t(e,t,n,r){var i;if(Yt)if((i=0===(4&t))&&0<ot.length&&-1<dt.indexOf(e))e=pt(null,e,t,n,r),ot.push(e);else{var a=Zt(e,t,n,r);if(null===a)i&&vt(e,r);else{if(i){if(-1<dt.indexOf(e))return e=pt(a,e,t,n,r),void ot.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return ut=yt(ut,e,t,n,r,i),!0;case"dragenter":return st=yt(st,e,t,n,r,i),!0;case"mouseover":return ct=yt(ct,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return lt.set(a,yt(lt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,ft.set(a,yt(ft.get(a)||null,e,t,n,r,i)),!0}return!1}(a,e,t,n,r))return;vt(e,r)}Lr(e,t,r,null,n)}}}function Zt(e,t,n,r){var i=Te(r);if(null!==(i=ni(i))){var a=Je(i);if(null===a)i=null;else{var o=a.tag;if(13===o){if(null!==(i=Xe(a)))return i;i=null}else if(3===o){if(a.stateNode.hydrate)return 3===a.tag?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return Lr(e,t,r,i,n),null}var en=null,tn=null,nn=null;function rn(){if(nn)return nn;var e,t,n=tn,r=n.length,i="value"in en?en.value:en.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return nn=i.slice(e,1<t?1-t:void 0)}function an(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function on(){return!0}function un(){return!1}function sn(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?on:un,this.isPropagationStopped=un,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=on)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=on)},persist:function(){},isPersistent:on}),t}var cn,ln,fn,hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=sn(hn),pn=i({},hn,{view:0,detail:0}),vn=sn(pn),yn=i({},pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fn&&(fn&&"mousemove"===e.type?(cn=e.screenX-fn.screenX,ln=e.screenY-fn.screenY):ln=cn=0,fn=e),cn)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),mn=sn(yn),gn=sn(i({},yn,{dataTransfer:0})),kn=sn(i({},pn,{relatedTarget:0})),wn=sn(i({},hn,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=i({},hn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_n=sn(bn),xn=sn(i({},hn,{data:0})),In={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Tn[e])&&!!t[e]}function Cn(){return Sn}var An=i({},pn,{key:function(e){if(e.key){var t=In[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=an(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?an(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?an(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Nn=sn(An),Rn=sn(i({},yn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Pn=sn(i({},pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),On=sn(i({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=i({},yn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ln=sn(Dn),Mn=[9,13,27,32],Un=f&&"CompositionEvent"in window,Fn=null;f&&"documentMode"in document&&(Fn=document.documentMode);var jn=f&&"TextEvent"in window&&!Fn,Vn=f&&(!Un||Fn&&8<Fn&&11>=Fn),qn=String.fromCharCode(32),Bn=!1;function zn(e,t){switch(e){case"keyup":return-1!==Mn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Hn=!1;var Kn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Kn[e.type]:"textarea"===t}function Qn(e,t,n,r){Re(r),0<(t=Ur(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Yn=null,Jn=null;function Xn(e){Ar(e,0)}function $n(e){if(X(ii(e)))return e}function Zn(e,t){if("change"===e)return t}var er=!1;if(f){var tr;if(f){var nr="oninput"in document;if(!nr){var rr=document.createElement("div");rr.setAttribute("oninput","return;"),nr="function"===typeof rr.oninput}tr=nr}else tr=!1;er=tr&&(!document.documentMode||9<document.documentMode)}function ir(){Yn&&(Yn.detachEvent("onpropertychange",ar),Jn=Yn=null)}function ar(e){if("value"===e.propertyName&&$n(Jn)){var t=[];if(Qn(t,Jn,e,Te(e)),e=Xn,Ue)e(t);else{Ue=!0;try{Oe(e,t)}finally{Ue=!1,je()}}}}function or(e,t,n){"focusin"===e?(ir(),Jn=n,(Yn=t).attachEvent("onpropertychange",ar)):"focusout"===e&&ir()}function ur(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(Jn)}function sr(e,t){if("click"===e)return $n(t)}function cr(e,t){if("input"===e||"change"===e)return $n(t)}var lr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},fr=Object.prototype.hasOwnProperty;function hr(e,t){if(lr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!fr.call(t,n[r])||!lr(e[n[r]],t[n[r]]))return!1;return!0}function dr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pr(e,t){var n,r=dr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dr(r)}}function vr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?vr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function yr(){for(var e=window,t=$();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=$((e=t.contentWindow).document)}return t}function mr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var gr=f&&"documentMode"in document&&11>=document.documentMode,kr=null,wr=null,br=null,_r=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_r||null==kr||kr!==$(r)||("selectionStart"in(r=kr)&&mr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},br&&hr(br,r)||(br=r,0<(r=Ur(wr,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=kr)))}Lt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Lt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Lt(Dt,2);for(var Ir="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Er=0;Er<Ir.length;Er++)Ot.set(Ir[Er],0);l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tr));function Cr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,u,s,c){if(Ye.apply(this,arguments),We){if(!We)throw Error(o(198));var l=He;We=!1,He=null,Ke||(Ke=!0,Ge=l)}}(r,t,void 0,e),e.currentTarget=null}function Ar(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Cr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Cr(i,u,c),a=s}}}if(Ke)throw e=Ge,Ke=!1,Ge=null,e}function Nr(e,t){var n=oi(t),r=e+"__bubble";n.has(r)||(Dr(t,e,2,!1),n.add(r))}var Rr="_reactListening"+Math.random().toString(36).slice(2);function Pr(e){e[Rr]||(e[Rr]=!0,u.forEach((function(t){Sr.has(t)||Or(t,!1,e,null),Or(t,!0,e,null)})))}function Or(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,a=n;if("selectionchange"===e&&9!==n.nodeType&&(a=n.ownerDocument),null!==r&&!t&&Sr.has(e)){if("scroll"!==e)return;i|=2,a=r}var o=oi(a),u=e+"__"+(t?"capture":"bubble");o.has(u)||(t&&(i|=4),Dr(a,e,i,t),o.add(u))}function Dr(e,t,n,r){var i=Ot.get(t);switch(void 0===i?2:i){case 0:i=Jt;break;case 1:i=Xt;break;default:i=$t}n=i.bind(null,t,n,e),i=void 0,!qe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Lr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=ni(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}!function(e,t,n){if(Fe)return e(t,n);Fe=!0;try{Me(e,t,n)}finally{Fe=!1,je()}}((function(){var r=a,i=Te(n),o=[];e:{var u=Pt.get(e);if(void 0!==u){var s=dn,c=e;switch(e){case"keypress":if(0===an(n))break e;case"keydown":case"keyup":s=Nn;break;case"focusin":c="focus",s=kn;break;case"focusout":c="blur",s=kn;break;case"beforeblur":case"afterblur":s=kn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Pn;break;case Ct:case At:case Nt:s=wn;break;case Rt:s=On;break;case"scroll":s=vn;break;case"wheel":s=Ln;break;case"copy":case"cut":case"paste":s=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Rn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Ve(p,h))&&l.push(Mr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(c=n.relatedTarget||n.fromElement)||!ni(c)&&!c[ei])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?ni(c):null)&&(c!==(f=Je(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=mn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Rn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:ii(s),d=null==c?u:ii(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,ni(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Fr(d))p++;for(d=0,v=h;v;v=Fr(v))d++;for(;0<p-d;)l=Fr(l),p--;for(;0<d-p;)h=Fr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Fr(l),h=Fr(h)}l=null}else l=null;null!==s&&jr(o,u,s,l,!1),null!==c&&null!==f&&jr(o,f,c,l,!0)}if("select"===(s=(u=r?ii(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var y=Zn;else if(Gn(u))if(er)y=cr;else{y=ur;var m=or}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(y=sr);switch(y&&(y=y(e,r))?Qn(o,y,n,i):(m&&m(e,u,r),"focusout"===e&&(m=u._wrapperState)&&m.controlled&&"number"===u.type&&ie(u,"number",u.value)),m=r?ii(r):window,e){case"focusin":(Gn(m)||"true"===m.contentEditable)&&(kr=m,wr=r,br=null);break;case"focusout":br=wr=kr=null;break;case"mousedown":_r=!0;break;case"contextmenu":case"mouseup":case"dragend":_r=!1,xr(o,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":xr(o,n,i)}var g;if(Un)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Hn?zn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Vn&&"ko"!==n.locale&&(Hn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Hn&&(g=rn()):(tn="value"in(en=i)?en.value:en.textContent,Hn=!0)),0<(m=Ur(r,k)).length&&(k=new xn(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=Wn(n))&&(k.data=g))),(g=jn?function(e,t){switch(e){case"compositionend":return Wn(t);case"keypress":return 32!==t.which?null:(Bn=!0,qn);case"textInput":return(e=t.data)===qn&&Bn?null:e;default:return null}}(e,n):function(e,t){if(Hn)return"compositionend"===e||!Un&&zn(e,t)?(e=rn(),nn=tn=en=null,Hn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Vn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Ur(r,"onBeforeInput")).length&&(i=new xn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Ar(o,t)}))}function Mr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ur(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Ve(e,n))&&r.unshift(Mr(e,a,i)),null!=(a=Ve(e,t))&&r.push(Mr(e,a,i))),e=e.return}return r}function Fr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function jr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Ve(n,a))&&o.unshift(Mr(n,s,u)):i||null!=(s=Ve(n,a))&&o.push(Mr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}function Vr(){}var qr=null,Br=null;function zr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Wr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Hr="function"===typeof setTimeout?setTimeout:void 0,Kr="function"===typeof clearTimeout?clearTimeout:void 0;function Gr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Qr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Yr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Jr=0;var Xr=Math.random().toString(36).slice(2),$r="__reactFiber$"+Xr,Zr="__reactProps$"+Xr,ei="__reactContainer$"+Xr,ti="__reactEvents$"+Xr;function ni(e){var t=e[$r];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ei]||n[$r]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Yr(e);null!==e;){if(n=e[$r])return n;e=Yr(e)}return t}n=(e=n).parentNode}return null}function ri(e){return!(e=e[$r]||e[ei])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ii(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function ai(e){return e[Zr]||null}function oi(e){var t=e[ti];return void 0===t&&(t=e[ti]=new Set),t}var ui=[],si=-1;function ci(e){return{current:e}}function li(e){0>si||(e.current=ui[si],ui[si]=null,si--)}function fi(e,t){si++,ui[si]=e.current,e.current=t}var hi={},di=ci(hi),pi=ci(!1),vi=hi;function yi(e,t){var n=e.type.contextTypes;if(!n)return hi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function mi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function gi(){li(pi),li(di)}function ki(e,t,n){if(di.current!==hi)throw Error(o(168));fi(di,t),fi(pi,n)}function wi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in e))throw Error(o(108,G(t)||"Unknown",a));return i({},n,r)}function bi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hi,vi=di.current,fi(di,e),fi(pi,pi.current),!0}function _i(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=wi(e,t,vi),r.__reactInternalMemoizedMergedChildContext=e,li(pi),li(di),fi(di,e)):li(pi),fi(pi,n)}var xi=null,Ii=null,Ei=a.unstable_runWithPriority,Ti=a.unstable_scheduleCallback,Si=a.unstable_cancelCallback,Ci=a.unstable_shouldYield,Ai=a.unstable_requestPaint,Ni=a.unstable_now,Ri=a.unstable_getCurrentPriorityLevel,Pi=a.unstable_ImmediatePriority,Oi=a.unstable_UserBlockingPriority,Di=a.unstable_NormalPriority,Li=a.unstable_LowPriority,Mi=a.unstable_IdlePriority,Ui={},Fi=void 0!==Ai?Ai:function(){},ji=null,Vi=null,qi=!1,Bi=Ni(),zi=1e4>Bi?Ni:function(){return Ni()-Bi};function Wi(){switch(Ri()){case Pi:return 99;case Oi:return 98;case Di:return 97;case Li:return 96;case Mi:return 95;default:throw Error(o(332))}}function Hi(e){switch(e){case 99:return Pi;case 98:return Oi;case 97:return Di;case 96:return Li;case 95:return Mi;default:throw Error(o(332))}}function Ki(e,t){return e=Hi(e),Ei(e,t)}function Gi(e,t,n){return e=Hi(e),Ti(e,t,n)}function Qi(){if(null!==Vi){var e=Vi;Vi=null,Si(e)}Yi()}function Yi(){if(!qi&&null!==ji){qi=!0;var e=0;try{var t=ji;Ki(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),ji=null}catch(n){throw null!==ji&&(ji=ji.slice(e+1)),Ti(Pi,Qi),n}finally{qi=!1}}}var Ji=b.ReactCurrentBatchConfig;function Xi(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var $i=ci(null),Zi=null,ea=null,ta=null;function na(){ta=ea=Zi=null}function ra(e){var t=$i.current;li($i),e.type._context._currentValue=t}function ia(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function aa(e,t){Zi=e,ta=ea=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Uo=!0),e.firstContext=null)}function oa(e,t){if(ta!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(ta=e,t=1073741823),t={context:e,observedBits:t,next:null},null===ea){if(null===Zi)throw Error(o(308));ea=t,Zi.dependencies={lanes:0,firstContext:t,responders:null}}else ea=ea.next=t;return e._currentValue}var ua=!1;function sa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ca(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function la(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function fa(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function ha(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function da(e,t,n,r){var a=e.updateQueue;ua=!1;var o=a.firstBaseUpdate,u=a.lastBaseUpdate,s=a.shared.pending;if(null!==s){a.shared.pending=null;var c=s,l=c.next;c.next=null,null===u?o=l:u.next=l,u=c;var f=e.alternate;if(null!==f){var h=(f=f.updateQueue).lastBaseUpdate;h!==u&&(null===h?f.firstBaseUpdate=l:h.next=l,f.lastBaseUpdate=c)}}if(null!==o){for(h=a.baseState,u=0,f=l=c=null;;){s=o.lane;var d=o.eventTime;if((r&s)===s){null!==f&&(f=f.next={eventTime:d,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,v=o;switch(s=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){h=p.call(d,h,s);break e}h=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(s="function"===typeof(p=v.payload)?p.call(d,h,s):p)||void 0===s)break e;h=i({},h,s);break e;case 2:ua=!0}}null!==o.callback&&(e.flags|=32,null===(s=a.effects)?a.effects=[o]:s.push(o))}else d={eventTime:d,lane:s,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===f?(l=f=d,c=h):f=f.next=d,u|=s;if(null===(o=o.next)){if(null===(s=a.shared.pending))break;o=s.next,s.next=null,a.lastBaseUpdate=s,a.shared.pending=null}}null===f&&(c=h),a.baseState=c,a.firstBaseUpdate=l,a.lastBaseUpdate=f,qu|=u,e.lanes=u,e.memoizedState=h}}function pa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var va=(new r.Component).refs;function ya(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ma={isMounted:function(e){return!!(e=e._reactInternals)&&Je(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=hs(),i=ds(e),a=la(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),fa(e,a),ps(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=hs(),i=ds(e),a=la(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),fa(e,a),ps(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=hs(),r=ds(e),i=la(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),fa(e,i),ps(e,r,n)}};function ga(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!hr(n,r)||!hr(i,a))}function ka(e,t,n){var r=!1,i=hi,a=t.contextType;return"object"===typeof a&&null!==a?a=oa(a):(i=mi(t)?vi:di.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?yi(e,i):hi),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ma,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function wa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ma.enqueueReplaceState(t,t.state,null)}function ba(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=va,sa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=oa(a):(a=mi(t)?vi:di.current,i.context=yi(e,a)),da(e,n,i,r),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ya(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ma.enqueueReplaceState(i,i.state,null),da(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4)}var _a=Array.isArray;function xa(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===va&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Ia(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Ea(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Ks(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function u(t){return e&&null===t.alternate&&(t.flags=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Js(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=xa(e,t,n),r.return=e,r):((r=Gs(n.type,n.key,n.props,null,e.mode,r)).ref=xa(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Xs(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Qs(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Js(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Gs(t.type,t.key,t.props,null,e.mode,n)).ref=xa(e,null,t),n.return=e,n;case x:return(t=Xs(t,e.mode,n)).return=e,t}if(_a(t)||B(t))return(t=Qs(t,e.mode,n,null)).return=e,t;Ia(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?n.type===I?f(e,t,n.props.children,r,i):c(e,t,n,r):null;case x:return n.key===i?l(e,t,n,r):null}if(_a(n)||B(n))return null!==i?null:f(e,t,n,r,null);Ia(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return e=e.get(null===r.key?n:r.key)||null,r.type===I?f(t,e,r.props.children,i,r.key):c(t,e,r,i);case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(_a(r)||B(r))return f(t,e=e.get(n)||null,r,i,null);Ia(t,r)}return null}function v(i,o,u,s){for(var c=null,l=null,f=o,v=o=0,y=null;null!==f&&v<u.length;v++){f.index>v?(y=f,f=null):y=f.sibling;var m=d(i,f,u[v],s);if(null===m){null===f&&(f=y);break}e&&f&&null===m.alternate&&t(i,f),o=a(m,o,v),null===l?c=m:l.sibling=m,l=m,f=y}if(v===u.length)return n(i,f),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(o=a(f,o,v),null===l?c=f:l.sibling=f,l=f);return c}for(f=r(i,f);v<u.length;v++)null!==(y=p(f,i,v,u[v],s))&&(e&&null!==y.alternate&&f.delete(null===y.key?v:y.key),o=a(y,o,v),null===l?c=y:l.sibling=y,l=y);return e&&f.forEach((function(e){return t(i,e)})),c}function y(i,u,s,c){var l=B(s);if("function"!==typeof l)throw Error(o(150));if(null==(s=l.call(s)))throw Error(o(151));for(var f=l=null,v=u,y=u=0,m=null,g=s.next();null!==v&&!g.done;y++,g=s.next()){v.index>y?(m=v,v=null):m=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=m);break}e&&v&&null===k.alternate&&t(i,v),u=a(k,u,y),null===f?l=k:f.sibling=k,f=k,v=m}if(g.done)return n(i,v),l;if(null===v){for(;!g.done;y++,g=s.next())null!==(g=h(i,g.value,c))&&(u=a(g,u,y),null===f?l=g:f.sibling=g,f=g);return l}for(v=r(i,v);!g.done;y++,g=s.next())null!==(g=p(v,i,y,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),u=a(g,u,y),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),l}return function(e,r,a,s){var c="object"===typeof a&&null!==a&&a.type===I&&null===a.key;c&&(a=a.props.children);var l="object"===typeof a&&null!==a;if(l)switch(a.$$typeof){case _:e:{for(l=a.key,c=r;null!==c;){if(c.key===l){if(7===c.tag){if(a.type===I){n(e,c.sibling),(r=i(c,a.props.children)).return=e,e=r;break e}}else if(c.elementType===a.type){n(e,c.sibling),(r=i(c,a.props)).ref=xa(e,c,a),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}a.type===I?((r=Qs(a.props.children,e.mode,s,a.key)).return=e,e=r):((s=Gs(a.type,a.key,a.props,null,e.mode,s)).ref=xa(e,r,a),s.return=e,e=s)}return u(e);case x:e:{for(c=a.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(e,r.sibling),(r=i(r,a.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Xs(a,e.mode,s)).return=e,e=r}return u(e)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,a)).return=e,e=r):(n(e,r),(r=Js(a,e.mode,s)).return=e,e=r),u(e);if(_a(a))return v(e,r,a,s);if(B(a))return y(e,r,a,s);if(l&&Ia(e,a),"undefined"===typeof a&&!c)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(o(152,G(e.type)||"Component"))}return n(e,r)}}var Ta=Ea(!0),Sa=Ea(!1),Ca={},Aa=ci(Ca),Na=ci(Ca),Ra=ci(Ca);function Pa(e){if(e===Ca)throw Error(o(174));return e}function Oa(e,t){switch(fi(Ra,t),fi(Na,e),fi(Aa,Ca),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pe(null,"");break;default:t=pe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}li(Aa),fi(Aa,t)}function Da(){li(Aa),li(Na),li(Ra)}function La(e){Pa(Ra.current);var t=Pa(Aa.current),n=pe(t,e.type);t!==n&&(fi(Na,e),fi(Aa,n))}function Ma(e){Na.current===e&&(li(Aa),li(Na))}var Ua=ci(0);function Fa(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ja=null,Va=null,qa=!1;function Ba(e,t){var n=Ws(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function za(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Wa(e){if(qa){var t=Va;if(t){var n=t;if(!za(e,t)){if(!(t=Qr(n.nextSibling))||!za(e,t))return e.flags=-1025&e.flags|2,qa=!1,void(ja=e);Ba(ja,n)}ja=e,Va=Qr(t.firstChild)}else e.flags=-1025&e.flags|2,qa=!1,ja=e}}function Ha(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ja=e}function Ka(e){if(e!==ja)return!1;if(!qa)return Ha(e),qa=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Wr(t,e.memoizedProps))for(t=Va;t;)Ba(e,t),t=Qr(t.nextSibling);if(Ha(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Va=Qr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Va=null}}else Va=ja?Qr(e.stateNode.nextSibling):null;return!0}function Ga(){Va=ja=null,qa=!1}var Qa=[];function Ya(){for(var e=0;e<Qa.length;e++)Qa[e]._workInProgressVersionPrimary=null;Qa.length=0}var Ja=b.ReactCurrentDispatcher,Xa=b.ReactCurrentBatchConfig,$a=0,Za=null,eo=null,to=null,no=!1,ro=!1;function io(){throw Error(o(321))}function ao(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!lr(e[n],t[n]))return!1;return!0}function oo(e,t,n,r,i,a){if($a=a,Za=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ja.current=null===e||null===e.memoizedState?Oo:Do,e=n(r,i),ro){a=0;do{if(ro=!1,!(25>a))throw Error(o(301));a+=1,to=eo=null,t.updateQueue=null,Ja.current=Lo,e=n(r,i)}while(ro)}if(Ja.current=Po,t=null!==eo&&null!==eo.next,$a=0,to=eo=Za=null,no=!1,t)throw Error(o(300));return e}function uo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===to?Za.memoizedState=to=e:to=to.next=e,to}function so(){if(null===eo){var e=Za.alternate;e=null!==e?e.memoizedState:null}else e=eo.next;var t=null===to?Za.memoizedState:to.next;if(null!==t)to=t,eo=e;else{if(null===e)throw Error(o(310));e={memoizedState:(eo=e).memoizedState,baseState:eo.baseState,baseQueue:eo.baseQueue,queue:eo.queue,next:null},null===to?Za.memoizedState=to=e:to=to.next=e}return to}function co(e,t){return"function"===typeof t?t(e):t}function lo(e){var t=so(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=eo,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var u=i.next;i.next=a.next,a.next=u}r.baseQueue=i=a,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var s=u=a=null,c=i;do{var l=c.lane;if(($a&l)===l)null!==s&&(s=s.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===e?c.eagerState:e(r,c.action);else{var f={lane:l,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===s?(u=s=f,a=r):s=s.next=f,Za.lanes|=l,qu|=l}c=c.next}while(null!==c&&c!==i);null===s?a=r:s.next=u,lr(r,t.memoizedState)||(Uo=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=s,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function fo(e){var t=so(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{a=e(a,u.action),u=u.next}while(u!==i);lr(a,t.memoizedState)||(Uo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function ho(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=($a&e)===e)&&(t._workInProgressVersionPrimary=r,Qa.push(t))),e)return n(t._source);throw Qa.push(t),Error(o(350))}function po(e,t,n,r){var i=Ou;if(null===i)throw Error(o(349));var a=t._getVersion,u=a(t._source),s=Ja.current,c=s.useState((function(){return ho(i,t,n)})),l=c[1],f=c[0];c=to;var h=e.memoizedState,d=h.refs,p=d.getSnapshot,v=h.source;h=h.subscribe;var y=Za;return e.memoizedState={refs:d,source:t,subscribe:r},s.useEffect((function(){d.getSnapshot=n,d.setSnapshot=l;var e=a(t._source);if(!lr(u,e)){e=n(t._source),lr(f,e)||(l(e),e=ds(y),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,o=e;0<o;){var s=31-Wt(o),c=1<<s;r[s]|=e,o&=~c}}}),[n,t,r]),s.useEffect((function(){return r(t._source,(function(){var e=d.getSnapshot,n=d.setSnapshot;try{n(e(t._source));var r=ds(y);i.mutableReadLanes|=r&i.pendingLanes}catch(a){n((function(){throw a}))}}))}),[t,r]),lr(p,n)&&lr(v,t)&&lr(h,r)||((e={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:f}).dispatch=l=Ro.bind(null,Za,e),c.queue=e,c.baseQueue=null,f=ho(i,t,n),c.memoizedState=c.baseState=f),f}function vo(e,t,n){return po(so(),e,t,n)}function yo(e){var t=uo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:e}).dispatch=Ro.bind(null,Za,e),[t.memoizedState,e]}function mo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Za.updateQueue)?(t={lastEffect:null},Za.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function go(e){return e={current:e},uo().memoizedState=e}function ko(){return so().memoizedState}function wo(e,t,n,r){var i=uo();Za.flags|=e,i.memoizedState=mo(1|t,n,void 0,void 0===r?null:r)}function bo(e,t,n,r){var i=so();r=void 0===r?null:r;var a=void 0;if(null!==eo){var o=eo.memoizedState;if(a=o.destroy,null!==r&&ao(r,o.deps))return void mo(t,n,a,r)}Za.flags|=e,i.memoizedState=mo(1|t,n,a,r)}function _o(e,t){return wo(516,4,e,t)}function xo(e,t){return bo(516,4,e,t)}function Io(e,t){return bo(4,2,e,t)}function Eo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function To(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,bo(4,2,Eo.bind(null,t,e),n)}function So(){}function Co(e,t){var n=so();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ao(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ao(e,t){var n=so();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ao(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function No(e,t){var n=Wi();Ki(98>n?98:n,(function(){e(!0)})),Ki(97<n?97:n,(function(){var n=Xa.transition;Xa.transition=1;try{e(!1),t()}finally{Xa.transition=n}}))}function Ro(e,t,n){var r=hs(),i=ds(e),a={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?a.next=a:(a.next=o.next,o.next=a),t.pending=a,o=e.alternate,e===Za||null!==o&&o===Za)ro=no=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var u=t.lastRenderedState,s=o(u,n);if(a.eagerReducer=o,a.eagerState=s,lr(s,u))return}catch(c){}ps(e,i,r)}}var Po={readContext:oa,useCallback:io,useContext:io,useEffect:io,useImperativeHandle:io,useLayoutEffect:io,useMemo:io,useReducer:io,useRef:io,useState:io,useDebugValue:io,useDeferredValue:io,useTransition:io,useMutableSource:io,useOpaqueIdentifier:io,unstable_isNewReconciler:!1},Oo={readContext:oa,useCallback:function(e,t){return uo().memoizedState=[e,void 0===t?null:t],e},useContext:oa,useEffect:_o,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,wo(4,2,Eo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return wo(4,2,e,t)},useMemo:function(e,t){var n=uo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=uo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Ro.bind(null,Za,e),[r.memoizedState,e]},useRef:go,useState:yo,useDebugValue:So,useDeferredValue:function(e){var t=yo(e),n=t[0],r=t[1];return _o((function(){var t=Xa.transition;Xa.transition=1;try{r(e)}finally{Xa.transition=t}}),[e]),n},useTransition:function(){var e=yo(!1),t=e[0];return go(e=No.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=uo();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},po(r,e,t,n)},useOpaqueIdentifier:function(){if(qa){var e=!1,t=function(e){return{$$typeof:L,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Jr++).toString(36))),Error(o(355))})),n=yo(t)[1];return 0===(2&Za.mode)&&(Za.flags|=516,mo(5,(function(){n("r:"+(Jr++).toString(36))}),void 0,null)),t}return yo(t="r:"+(Jr++).toString(36)),t},unstable_isNewReconciler:!1},Do={readContext:oa,useCallback:Co,useContext:oa,useEffect:xo,useImperativeHandle:To,useLayoutEffect:Io,useMemo:Ao,useReducer:lo,useRef:ko,useState:function(){return lo(co)},useDebugValue:So,useDeferredValue:function(e){var t=lo(co),n=t[0],r=t[1];return xo((function(){var t=Xa.transition;Xa.transition=1;try{r(e)}finally{Xa.transition=t}}),[e]),n},useTransition:function(){var e=lo(co)[0];return[ko().current,e]},useMutableSource:vo,useOpaqueIdentifier:function(){return lo(co)[0]},unstable_isNewReconciler:!1},Lo={readContext:oa,useCallback:Co,useContext:oa,useEffect:xo,useImperativeHandle:To,useLayoutEffect:Io,useMemo:Ao,useReducer:fo,useRef:ko,useState:function(){return fo(co)},useDebugValue:So,useDeferredValue:function(e){var t=fo(co),n=t[0],r=t[1];return xo((function(){var t=Xa.transition;Xa.transition=1;try{r(e)}finally{Xa.transition=t}}),[e]),n},useTransition:function(){var e=fo(co)[0];return[ko().current,e]},useMutableSource:vo,useOpaqueIdentifier:function(){return fo(co)[0]},unstable_isNewReconciler:!1},Mo=b.ReactCurrentOwner,Uo=!1;function Fo(e,t,n,r){t.child=null===e?Sa(t,null,n,r):Ta(t,e.child,n,r)}function jo(e,t,n,r,i){n=n.render;var a=t.ref;return aa(t,i),r=oo(e,t,n,r,a,i),null===e||Uo?(t.flags|=1,Fo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,au(e,t,i))}function Vo(e,t,n,r,i,a){if(null===e){var o=n.type;return"function"!==typeof o||Hs(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Gs(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,qo(e,t,o,r,i,a))}return o=e.child,0===(i&a)&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:hr)(i,r)&&e.ref===t.ref)?au(e,t,a):(t.flags|=1,(e=Ks(o,r)).ref=t.ref,e.return=t,t.child=e)}function qo(e,t,n,r,i,a){if(null!==e&&hr(e.memoizedProps,r)&&e.ref===t.ref){if(Uo=!1,0===(a&i))return t.lanes=e.lanes,au(e,t,a);0!==(16384&e.flags)&&(Uo=!0)}return Wo(e,t,n,r,a)}function Bo(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},_s(t,n);else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},_s(t,e),null;t.memoizedState={baseLanes:0},_s(t,null!==a?a.baseLanes:n)}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,_s(t,r);return Fo(e,t,i,n),t.child}function zo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Wo(e,t,n,r,i){var a=mi(n)?vi:di.current;return a=yi(t,a),aa(t,i),n=oo(e,t,n,r,a,i),null===e||Uo?(t.flags|=1,Fo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,au(e,t,i))}function Ho(e,t,n,r,i){if(mi(n)){var a=!0;bi(t)}else a=!1;if(aa(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),ka(t,n,r),ba(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=oa(c):c=yi(t,c=mi(n)?vi:di.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&wa(t,o,r,c),ua=!1;var h=t.memoizedState;o.state=h,da(t,r,o,i),s=t.memoizedState,u!==r||h!==s||pi.current||ua?("function"===typeof l&&(ya(t,n,l,r),s=t.memoizedState),(u=ua||ga(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4)):("function"===typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4),r=!1)}else{o=t.stateNode,ca(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:Xi(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=oa(s):s=yi(t,s=mi(n)?vi:di.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&wa(t,o,r,s),ua=!1,h=t.memoizedState,o.state=h,da(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||pi.current||ua?("function"===typeof d&&(ya(t,n,d,r),p=t.memoizedState),(c=ua||ga(t,n,c,r,h,p,s))?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),r=!1)}return Ko(e,t,n,r,a,i)}function Ko(e,t,n,r,i,a){zo(e,t);var o=0!==(64&t.flags);if(!r&&!o)return i&&_i(t,n,!1),au(e,t,a);r=t.stateNode,Mo.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ta(t,e.child,null,a),t.child=Ta(t,null,u,a)):Fo(e,t,u,a),t.memoizedState=r.state,i&&_i(t,n,!0),t.child}function Go(e){var t=e.stateNode;t.pendingContext?ki(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ki(0,t.context,!1),Oa(e,t.containerInfo)}var Qo,Yo,Jo,Xo={dehydrated:null,retryLane:0};function $o(e,t,n){var r,i=t.pendingProps,a=Ua.current,o=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(a|=1),fi(Ua,1&a),null===e?(void 0!==i.fallback&&Wa(t),e=i.children,a=i.fallback,o?(e=Zo(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Xo,e):"number"===typeof i.unstable_expectedLoadTime?(e=Zo(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Xo,t.lanes=33554432,e):((n=Ys({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,o?(i=tu(e,t,i.children,i.fallback,n),o=t.child,a=e.child.memoizedState,o.memoizedState=null===a?{baseLanes:n}:{baseLanes:a.baseLanes|n},o.childLanes=e.childLanes&~n,t.memoizedState=Xo,i):(n=eu(e,t,i.children,n),t.memoizedState=null,n))}function Zo(e,t,n,r){var i=e.mode,a=e.child;return t={mode:"hidden",children:t},0===(2&i)&&null!==a?(a.childLanes=0,a.pendingProps=t):a=Ys(t,i,0,null),n=Qs(n,i,r,null),a.return=e,n.return=e,a.sibling=n,e.child=a,n}function eu(e,t,n,r){var i=e.child;return e=i.sibling,n=Ks(i,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function tu(e,t,n,r,i){var a=t.mode,o=e.child;e=o.sibling;var u={mode:"hidden",children:n};return 0===(2&a)&&t.child!==o?((n=t.child).childLanes=0,n.pendingProps=u,null!==(o=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Ks(o,u),null!==e?r=Ks(e,r):(r=Qs(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function nu(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),ia(e.return,t)}function ru(e,t,n,r,i,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.lastEffect=a)}function iu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(Fo(e,t,r.children,n),0!==(2&(r=Ua.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&nu(e,n);else if(19===e.tag)nu(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(fi(Ua,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Fa(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ru(t,!1,i,n,a,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Fa(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ru(t,!0,n,null,a,t.lastEffect);break;case"together":ru(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function au(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),qu|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Ks(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ks(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function ou(e,t){if(!qa)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function uu(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return mi(t.type)&&gi(),null;case 3:return Da(),li(pi),li(di),Ya(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Ka(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:Ma(t);var a=Pa(Ra.current);if(n=t.type,null!==e&&null!=t.stateNode)Yo(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=Pa(Aa.current),Ka(t)){r=t.stateNode,n=t.type;var u=t.memoizedProps;switch(r[$r]=t,r[Zr]=u,n){case"dialog":Nr("cancel",r),Nr("close",r);break;case"iframe":case"object":case"embed":Nr("load",r);break;case"video":case"audio":for(e=0;e<Tr.length;e++)Nr(Tr[e],r);break;case"source":Nr("error",r);break;case"img":case"image":case"link":Nr("error",r),Nr("load",r);break;case"details":Nr("toggle",r);break;case"input":ee(r,u),Nr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!u.multiple},Nr("invalid",r);break;case"textarea":se(r,u),Nr("invalid",r)}for(var c in Ie(n,u),e=null,u)u.hasOwnProperty(c)&&(a=u[c],"children"===c?"string"===typeof a?r.textContent!==a&&(e=["children",a]):"number"===typeof a&&r.textContent!==""+a&&(e=["children",""+a]):s.hasOwnProperty(c)&&null!=a&&"onScroll"===c&&Nr("scroll",r));switch(n){case"input":J(r),re(r,u,!0);break;case"textarea":J(r),le(r);break;case"select":case"option":break;default:"function"===typeof u.onClick&&(r.onclick=Vr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(c=9===a.nodeType?a:a.ownerDocument,e===fe&&(e=de(n)),e===fe?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[$r]=t,e[Zr]=r,Qo(e,t),t.stateNode=e,c=Ee(n,r),n){case"dialog":Nr("cancel",e),Nr("close",e),a=r;break;case"iframe":case"object":case"embed":Nr("load",e),a=r;break;case"video":case"audio":for(a=0;a<Tr.length;a++)Nr(Tr[a],e);a=r;break;case"source":Nr("error",e),a=r;break;case"img":case"image":case"link":Nr("error",e),Nr("load",e),a=r;break;case"details":Nr("toggle",e),a=r;break;case"input":ee(e,r),a=Z(e,r),Nr("invalid",e);break;case"option":a=ae(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=i({},r,{value:void 0}),Nr("invalid",e);break;case"textarea":se(e,r),a=ue(e,r),Nr("invalid",e);break;default:a=r}Ie(n,a);var l=a;for(u in l)if(l.hasOwnProperty(u)){var f=l[u];"style"===u?_e(e,f):"dangerouslySetInnerHTML"===u?null!=(f=f?f.__html:void 0)&&me(e,f):"children"===u?"string"===typeof f?("textarea"!==n||""!==f)&&ge(e,f):"number"===typeof f&&ge(e,""+f):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?null!=f&&"onScroll"===u&&Nr("scroll",e):null!=f&&w(e,u,f,c))}switch(n){case"input":J(e),re(e,r,!1);break;case"textarea":J(e),le(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(u=r.value)?oe(e,!!r.multiple,u,!1):null!=r.defaultValue&&oe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Vr)}zr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Jo(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));n=Pa(Ra.current),Pa(Aa.current),Ka(t)?(r=t.stateNode,n=t.memoizedProps,r[$r]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[$r]=t,t.stateNode=r)}return null;case 13:return li(Ua),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Ka(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Ua.current)?0===Fu&&(Fu=3):(0!==Fu&&3!==Fu||(Fu=4),null===Ou||0===(134217727&qu)&&0===(134217727&Bu)||gs(Ou,Lu))),(r||n)&&(t.flags|=4),null);case 4:return Da(),null===e&&Pr(t.stateNode.containerInfo),null;case 10:return ra(t),null;case 19:if(li(Ua),null===(r=t.memoizedState))return null;if(u=0!==(64&t.flags),null===(c=r.rendering))if(u)ou(r,!1);else{if(0!==Fu||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(c=Fa(e))){for(t.flags|=64,ou(r,!1),null!==(u=c.updateQueue)&&(t.updateQueue=u,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(u=n).flags&=2,u.nextEffect=null,u.firstEffect=null,u.lastEffect=null,null===(c=u.alternate)?(u.childLanes=0,u.lanes=e,u.child=null,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=c.childLanes,u.lanes=c.lanes,u.child=c.child,u.memoizedProps=c.memoizedProps,u.memoizedState=c.memoizedState,u.updateQueue=c.updateQueue,u.type=c.type,e=c.dependencies,u.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return fi(Ua,1&Ua.current|2),t.child}e=e.sibling}null!==r.tail&&zi()>Ku&&(t.flags|=64,u=!0,ou(r,!1),t.lanes=33554432)}else{if(!u)if(null!==(e=Fa(c))){if(t.flags|=64,u=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),ou(r,!0),null===r.tail&&"hidden"===r.tailMode&&!c.alternate&&!qa)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*zi()-r.renderingStartTime>Ku&&1073741824!==n&&(t.flags|=64,u=!0,ou(r,!1),t.lanes=33554432);r.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=r.last)?n.sibling=c:t.child=c,r.last=c)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=zi(),n.sibling=null,t=Ua.current,fi(Ua,u?1&t|2:1&t),n):null;case 23:case 24:return xs(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(o(156,t.tag))}function su(e){switch(e.tag){case 1:mi(e.type)&&gi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Da(),li(pi),li(di),Ya(),0!==(64&(t=e.flags)))throw Error(o(285));return e.flags=-4097&t|64,e;case 5:return Ma(e),null;case 13:return li(Ua),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return li(Ua),null;case 4:return Da(),null;case 10:return ra(e),null;case 23:case 24:return xs(),null;default:return null}}function cu(e,t){try{var n="",r=t;do{n+=K(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}function lu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}Qo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Yo=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Pa(Aa.current);var o,u=null;switch(n){case"input":a=Z(e,a),r=Z(e,r),u=[];break;case"option":a=ae(e,a),r=ae(e,r),u=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),u=[];break;case"textarea":a=ue(e,a),r=ue(e,r),u=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=Vr)}for(f in Ie(n,r),n=null,a)if(!r.hasOwnProperty(f)&&a.hasOwnProperty(f)&&null!=a[f])if("style"===f){var c=a[f];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==f&&"children"!==f&&"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&"autoFocus"!==f&&(s.hasOwnProperty(f)?u||(u=[]):(u=u||[]).push(f,null));for(f in r){var l=r[f];if(c=null!=a?a[f]:void 0,r.hasOwnProperty(f)&&l!==c&&(null!=l||null!=c))if("style"===f)if(c){for(o in c)!c.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&c[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(u||(u=[]),u.push(f,n)),n=l;else"dangerouslySetInnerHTML"===f?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(u=u||[]).push(f,l)):"children"===f?"string"!==typeof l&&"number"!==typeof l||(u=u||[]).push(f,""+l):"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&(s.hasOwnProperty(f)?(null!=l&&"onScroll"===f&&Nr("scroll",e),u||c===l||(u=[])):"object"===typeof l&&null!==l&&l.$$typeof===L?l.toString():(u=u||[]).push(f,l))}n&&(u=u||[]).push("style",n);var f=u;(t.updateQueue=f)&&(t.flags|=4)}},Jo=function(e,t,n,r){n!==r&&(t.flags|=4)};var fu="function"===typeof WeakMap?WeakMap:Map;function hu(e,t,n){(n=la(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ju||(Ju=!0,Xu=r),lu(0,t)},n}function du(e,t,n){(n=la(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return lu(0,t),r(i)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===$u?$u=new Set([this]):$u.add(this),lu(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var pu="function"===typeof WeakSet?WeakSet:Set;function vu(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Vs(e,n)}else t.current=null}function yu(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Xi(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Gr(t.stateNode.containerInfo))}throw Error(o(163))}function mu(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!==(4&(i=i.tag))&&0!==(1&i)&&(Us(n,e),Ms(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Xi(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&pa(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}pa(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&zr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&_t(n)))))}throw Error(o(163))}function gu(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=be("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function ku(e,t){if(Ii&&"function"===typeof Ii.onCommitFiberUnmount)try{Ii.onCommitFiberUnmount(xi,t)}catch(a){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!==(4&r))Us(t,n);else{r=t;try{i()}catch(a){Vs(r,a)}}n=n.next}while(n!==e)}break;case 1:if(vu(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(a){Vs(t,a)}break;case 5:vu(t);break;case 4:Eu(e,t)}}function wu(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function bu(e){return 5===e.tag||3===e.tag||4===e.tag}function _u(e){e:{for(var t=e.return;null!==t;){if(bu(t))break e;t=t.return}throw Error(o(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.flags&&(ge(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||bu(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?xu(e,n,t):Iu(e,n,t)}function xu(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Vr));else if(4!==r&&null!==(e=e.child))for(xu(e,t,n),e=e.sibling;null!==e;)xu(e,t,n),e=e.sibling}function Iu(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Iu(e,t,n),e=e.sibling;null!==e;)Iu(e,t,n),e=e.sibling}function Eu(e,t){for(var n,r,i=t,a=!1;;){if(!a){a=i.return;e:for(;;){if(null===a)throw Error(o(160));switch(n=a.stateNode,a.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}a=a.return}a=!0}if(5===i.tag||6===i.tag){e:for(var u=e,s=i,c=s;;)if(ku(u,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===s)break e;for(;null===c.sibling;){if(null===c.return||c.return===s)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}r?(u=n,s=i.stateNode,8===u.nodeType?u.parentNode.removeChild(s):u.removeChild(s)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(ku(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(a=!1)}i.sibling.return=i.return,i=i.sibling}}function Tu(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,null!==a){for(n[Zr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Ee(e,i),t=Ee(e,r),i=0;i<a.length;i+=2){var u=a[i],s=a[i+1];"style"===u?_e(n,s):"dangerouslySetInnerHTML"===u?me(n,s):"children"===u?ge(n,s):w(n,u,s,t)}switch(e){case"input":ne(n,r);break;case"textarea":ce(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(a=r.value)?oe(n,!!r.multiple,a,!1):e!==!!r.multiple&&(null!=r.defaultValue?oe(n,!!r.multiple,r.defaultValue,!0):oe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,_t(n.containerInfo)));case 13:return null!==t.memoizedState&&(Hu=zi(),gu(t.child,!0)),void Su(t);case 19:return void Su(t);case 23:case 24:return void gu(t,null!==t.memoizedState)}throw Error(o(163))}function Su(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new pu),t.forEach((function(t){var r=Bs.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Cu(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Au=Math.ceil,Nu=b.ReactCurrentDispatcher,Ru=b.ReactCurrentOwner,Pu=0,Ou=null,Du=null,Lu=0,Mu=0,Uu=ci(0),Fu=0,ju=null,Vu=0,qu=0,Bu=0,zu=0,Wu=null,Hu=0,Ku=1/0;function Gu(){Ku=zi()+500}var Qu,Yu=null,Ju=!1,Xu=null,$u=null,Zu=!1,es=null,ts=90,ns=[],rs=[],is=null,as=0,os=null,us=-1,ss=0,cs=0,ls=null,fs=!1;function hs(){return 0!==(48&Pu)?zi():-1!==us?us:us=zi()}function ds(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===Wi()?1:2;if(0===ss&&(ss=Vu),0!==Ji.transition){0!==cs&&(cs=null!==Wu?Wu.pendingLanes:0),e=ss;var t=4186112&~cs;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Wi(),0!==(4&Pu)&&98===e?e=Vt(12,ss):e=Vt(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),ss),e}function ps(e,t,n){if(50<as)throw as=0,os=null,Error(o(185));if(null===(e=vs(e,t)))return null;zt(e,t,n),e===Ou&&(Bu|=t,4===Fu&&gs(e,Lu));var r=Wi();1===t?0!==(8&Pu)&&0===(48&Pu)?ks(e):(ys(e,n),0===Pu&&(Gu(),Qi())):(0===(4&Pu)||98!==r&&99!==r||(null===is?is=new Set([e]):is.add(e)),ys(e,n)),Wu=e}function vs(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function ys(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,u=e.pendingLanes;0<u;){var s=31-Wt(u),c=1<<s,l=a[s];if(-1===l){if(0===(c&r)||0!==(c&i)){l=t,Ut(c);var f=Mt;a[s]=10<=f?l+250:6<=f?l+5e3:-1}}else l<=t&&(e.expiredLanes|=c);u&=~c}if(r=Ft(e,e===Ou?Lu:0),t=Mt,0===r)null!==n&&(n!==Ui&&Si(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Ui&&Si(n)}15===t?(n=ks.bind(null,e),null===ji?(ji=[n],Vi=Ti(Pi,Yi)):ji.push(n),n=Ui):14===t?n=Gi(99,ks.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(o(358,e))}}(t),n=Gi(n,ms.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function ms(e){if(us=-1,cs=ss=0,0!==(48&Pu))throw Error(o(327));var t=e.callbackNode;if(Ls()&&e.callbackNode!==t)return null;var n=Ft(e,e===Ou?Lu:0);if(0===n)return null;var r=n,i=Pu;Pu|=16;var a=Ts();for(Ou===e&&Lu===r||(Gu(),Is(e,r));;)try{As();break}catch(s){Es(e,s)}if(na(),Nu.current=a,Pu=i,null!==Du?r=0:(Ou=null,Lu=0,r=Fu),0!==(Vu&Bu))Is(e,0);else if(0!==r){if(2===r&&(Pu|=64,e.hydrate&&(e.hydrate=!1,Gr(e.containerInfo)),0!==(n=jt(e))&&(r=Ss(e,n))),1===r)throw t=ju,Is(e,0),gs(e,n),ys(e,zi()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(o(345));case 2:case 5:Ps(e);break;case 3:if(gs(e,n),(62914560&n)===n&&10<(r=Hu+500-zi())){if(0!==Ft(e,0))break;if(((i=e.suspendedLanes)&n)!==n){hs(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Hr(Ps.bind(null,e),r);break}Ps(e);break;case 4:if(gs(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var u=31-Wt(n);a=1<<u,(u=r[u])>i&&(i=u),n&=~a}if(n=i,10<(n=(120>(n=zi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Au(n/1960))-n)){e.timeoutHandle=Hr(Ps.bind(null,e),n);break}Ps(e);break;default:throw Error(o(329))}}return ys(e,zi()),e.callbackNode===t?ms.bind(null,e):null}function gs(e,t){for(t&=~zu,t&=~Bu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Wt(t),r=1<<n;e[n]=-1,t&=~r}}function ks(e){if(0!==(48&Pu))throw Error(o(327));if(Ls(),e===Ou&&0!==(e.expiredLanes&Lu)){var t=Lu,n=Ss(e,t);0!==(Vu&Bu)&&(n=Ss(e,t=Ft(e,t)))}else n=Ss(e,t=Ft(e,0));if(0!==e.tag&&2===n&&(Pu|=64,e.hydrate&&(e.hydrate=!1,Gr(e.containerInfo)),0!==(t=jt(e))&&(n=Ss(e,t))),1===n)throw n=ju,Is(e,0),gs(e,t),ys(e,zi()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ps(e),ys(e,zi()),null}function ws(e,t){var n=Pu;Pu|=1;try{return e(t)}finally{0===(Pu=n)&&(Gu(),Qi())}}function bs(e,t){var n=Pu;Pu&=-2,Pu|=8;try{return e(t)}finally{0===(Pu=n)&&(Gu(),Qi())}}function _s(e,t){fi(Uu,Mu),Mu|=t,Vu|=t}function xs(){Mu=Uu.current,li(Uu)}function Is(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Kr(n)),null!==Du)for(n=Du.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&gi();break;case 3:Da(),li(pi),li(di),Ya();break;case 5:Ma(r);break;case 4:Da();break;case 13:case 19:li(Ua);break;case 10:ra(r);break;case 23:case 24:xs()}n=n.return}Ou=e,Du=Ks(e.current,null),Lu=Mu=Vu=t,Fu=0,ju=null,zu=Bu=qu=0}function Es(e,t){for(;;){var n=Du;try{if(na(),Ja.current=Po,no){for(var r=Za.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}no=!1}if($a=0,to=eo=Za=null,ro=!1,Ru.current=null,null===n||null===n.return){Fu=1,ju=t,Du=null;break}e:{var a=e,o=n.return,u=n,s=t;if(t=Lu,u.flags|=2048,u.firstEffect=u.lastEffect=null,null!==s&&"object"===typeof s&&"function"===typeof s.then){var c=s;if(0===(2&u.mode)){var l=u.alternate;l?(u.updateQueue=l.updateQueue,u.memoizedState=l.memoizedState,u.lanes=l.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=0!==(1&Ua.current),h=o;do{var d;if(d=13===h.tag){var p=h.memoizedState;if(null!==p)d=null!==p.dehydrated;else{var v=h.memoizedProps;d=void 0!==v.fallback&&(!0!==v.unstable_avoidThisFallback||!f)}}if(d){var y=h.updateQueue;if(null===y){var m=new Set;m.add(c),h.updateQueue=m}else y.add(c);if(0===(2&h.mode)){if(h.flags|=64,u.flags|=16384,u.flags&=-2981,1===u.tag)if(null===u.alternate)u.tag=17;else{var g=la(-1,1);g.tag=2,fa(u,g)}u.lanes|=1;break e}s=void 0,u=t;var k=a.pingCache;if(null===k?(k=a.pingCache=new fu,s=new Set,k.set(c,s)):void 0===(s=k.get(c))&&(s=new Set,k.set(c,s)),!s.has(u)){s.add(u);var w=qs.bind(null,a,c,u);c.then(w,w)}h.flags|=4096,h.lanes=t;break e}h=h.return}while(null!==h);s=Error((G(u.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Fu&&(Fu=2),s=cu(s,u),h=o;do{switch(h.tag){case 3:a=s,h.flags|=4096,t&=-t,h.lanes|=t,ha(h,hu(0,a,t));break e;case 1:a=s;var b=h.type,_=h.stateNode;if(0===(64&h.flags)&&("function"===typeof b.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===$u||!$u.has(_)))){h.flags|=4096,t&=-t,h.lanes|=t,ha(h,du(h,a,t));break e}}h=h.return}while(null!==h)}Rs(n)}catch(x){t=x,Du===n&&null!==n&&(Du=n=n.return);continue}break}}function Ts(){var e=Nu.current;return Nu.current=Po,null===e?Po:e}function Ss(e,t){var n=Pu;Pu|=16;var r=Ts();for(Ou===e&&Lu===t||Is(e,t);;)try{Cs();break}catch(i){Es(e,i)}if(na(),Pu=n,Nu.current=r,null!==Du)throw Error(o(261));return Ou=null,Lu=0,Fu}function Cs(){for(;null!==Du;)Ns(Du)}function As(){for(;null!==Du&&!Ci();)Ns(Du)}function Ns(e){var t=Qu(e.alternate,e,Mu);e.memoizedProps=e.pendingProps,null===t?Rs(e):Du=t,Ru.current=null}function Rs(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=uu(n,t,Mu)))return void(Du=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Mu)||0===(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=su(t)))return n.flags&=2047,void(Du=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Du=t);Du=t=e}while(null!==t);0===Fu&&(Fu=5)}function Ps(e){var t=Wi();return Ki(99,Os.bind(null,e,t)),null}function Os(e,t){do{Ls()}while(null!==es);if(0!==(48&Pu))throw Error(o(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,a=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var u=e.eventTimes,s=e.expirationTimes;0<a;){var c=31-Wt(a),l=1<<c;i[c]=0,u[c]=-1,s[c]=-1,a&=~l}if(null!==is&&0===(24&r)&&is.has(e)&&is.delete(e),e===Ou&&(Du=Ou=null,Lu=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=Pu,Pu|=32,Ru.current=null,qr=Yt,mr(u=yr())){if("selectionStart"in u)s={start:u.selectionStart,end:u.selectionEnd};else e:if(s=(s=u.ownerDocument)&&s.defaultView||window,(l=s.getSelection&&s.getSelection())&&0!==l.rangeCount){s=l.anchorNode,a=l.anchorOffset,c=l.focusNode,l=l.focusOffset;try{s.nodeType,c.nodeType}catch(T){s=null;break e}var f=0,h=-1,d=-1,p=0,v=0,y=u,m=null;t:for(;;){for(var g;y!==s||0!==a&&3!==y.nodeType||(h=f+a),y!==c||0!==l&&3!==y.nodeType||(d=f+l),3===y.nodeType&&(f+=y.nodeValue.length),null!==(g=y.firstChild);)m=y,y=g;for(;;){if(y===u)break t;if(m===s&&++p===a&&(h=f),m===c&&++v===l&&(d=f),null!==(g=y.nextSibling))break;m=(y=m).parentNode}y=g}s=-1===h||-1===d?null:{start:h,end:d}}else s=null;s=s||{start:0,end:0}}else s=null;Br={focusedElem:u,selectionRange:s},Yt=!1,ls=null,fs=!1,Yu=r;do{try{Ds()}catch(T){if(null===Yu)throw Error(o(330));Vs(Yu,T),Yu=Yu.nextEffect}}while(null!==Yu);ls=null,Yu=r;do{try{for(u=e;null!==Yu;){var k=Yu.flags;if(16&k&&ge(Yu.stateNode,""),128&k){var w=Yu.alternate;if(null!==w){var b=w.ref;null!==b&&("function"===typeof b?b(null):b.current=null)}}switch(1038&k){case 2:_u(Yu),Yu.flags&=-3;break;case 6:_u(Yu),Yu.flags&=-3,Tu(Yu.alternate,Yu);break;case 1024:Yu.flags&=-1025;break;case 1028:Yu.flags&=-1025,Tu(Yu.alternate,Yu);break;case 4:Tu(Yu.alternate,Yu);break;case 8:Eu(u,s=Yu);var _=s.alternate;wu(s),null!==_&&wu(_)}Yu=Yu.nextEffect}}catch(T){if(null===Yu)throw Error(o(330));Vs(Yu,T),Yu=Yu.nextEffect}}while(null!==Yu);if(b=Br,w=yr(),k=b.focusedElem,u=b.selectionRange,w!==k&&k&&k.ownerDocument&&vr(k.ownerDocument.documentElement,k)){null!==u&&mr(k)&&(w=u.start,void 0===(b=u.end)&&(b=w),"selectionStart"in k?(k.selectionStart=w,k.selectionEnd=Math.min(b,k.value.length)):(b=(w=k.ownerDocument||document)&&w.defaultView||window).getSelection&&(b=b.getSelection(),s=k.textContent.length,_=Math.min(u.start,s),u=void 0===u.end?_:Math.min(u.end,s),!b.extend&&_>u&&(s=u,u=_,_=s),s=pr(k,_),a=pr(k,u),s&&a&&(1!==b.rangeCount||b.anchorNode!==s.node||b.anchorOffset!==s.offset||b.focusNode!==a.node||b.focusOffset!==a.offset)&&((w=w.createRange()).setStart(s.node,s.offset),b.removeAllRanges(),_>u?(b.addRange(w),b.extend(a.node,a.offset)):(w.setEnd(a.node,a.offset),b.addRange(w))))),w=[];for(b=k;b=b.parentNode;)1===b.nodeType&&w.push({element:b,left:b.scrollLeft,top:b.scrollTop});for("function"===typeof k.focus&&k.focus(),k=0;k<w.length;k++)(b=w[k]).element.scrollLeft=b.left,b.element.scrollTop=b.top}Yt=!!qr,Br=qr=null,e.current=n,Yu=r;do{try{for(k=e;null!==Yu;){var x=Yu.flags;if(36&x&&mu(k,Yu.alternate,Yu),128&x){w=void 0;var I=Yu.ref;if(null!==I){var E=Yu.stateNode;Yu.tag,w=E,"function"===typeof I?I(w):I.current=w}}Yu=Yu.nextEffect}}catch(T){if(null===Yu)throw Error(o(330));Vs(Yu,T),Yu=Yu.nextEffect}}while(null!==Yu);Yu=null,Fi(),Pu=i}else e.current=n;if(Zu)Zu=!1,es=e,ts=t;else for(Yu=r;null!==Yu;)t=Yu.nextEffect,Yu.nextEffect=null,8&Yu.flags&&((x=Yu).sibling=null,x.stateNode=null),Yu=t;if(0===(r=e.pendingLanes)&&($u=null),1===r?e===os?as++:(as=0,os=e):as=0,n=n.stateNode,Ii&&"function"===typeof Ii.onCommitFiberRoot)try{Ii.onCommitFiberRoot(xi,n,void 0,64===(64&n.current.flags))}catch(T){}if(ys(e,zi()),Ju)throw Ju=!1,e=Xu,Xu=null,e;return 0!==(8&Pu)||Qi(),null}function Ds(){for(;null!==Yu;){var e=Yu.alternate;fs||null===ls||(0!==(8&Yu.flags)?et(Yu,ls)&&(fs=!0):13===Yu.tag&&Cu(e,Yu)&&et(Yu,ls)&&(fs=!0));var t=Yu.flags;0!==(256&t)&&yu(e,Yu),0===(512&t)||Zu||(Zu=!0,Gi(97,(function(){return Ls(),null}))),Yu=Yu.nextEffect}}function Ls(){if(90!==ts){var e=97<ts?97:ts;return ts=90,Ki(e,Fs)}return!1}function Ms(e,t){ns.push(t,e),Zu||(Zu=!0,Gi(97,(function(){return Ls(),null})))}function Us(e,t){rs.push(t,e),Zu||(Zu=!0,Gi(97,(function(){return Ls(),null})))}function Fs(){if(null===es)return!1;var e=es;if(es=null,0!==(48&Pu))throw Error(o(331));var t=Pu;Pu|=32;var n=rs;rs=[];for(var r=0;r<n.length;r+=2){var i=n[r],a=n[r+1],u=i.destroy;if(i.destroy=void 0,"function"===typeof u)try{u()}catch(c){if(null===a)throw Error(o(330));Vs(a,c)}}for(n=ns,ns=[],r=0;r<n.length;r+=2){i=n[r],a=n[r+1];try{var s=i.create;i.destroy=s()}catch(c){if(null===a)throw Error(o(330));Vs(a,c)}}for(s=e.current.firstEffect;null!==s;)e=s.nextEffect,s.nextEffect=null,8&s.flags&&(s.sibling=null,s.stateNode=null),s=e;return Pu=t,Qi(),!0}function js(e,t,n){fa(e,t=hu(0,t=cu(n,t),1)),t=hs(),null!==(e=vs(e,1))&&(zt(e,1,t),ys(e,t))}function Vs(e,t){if(3===e.tag)js(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){js(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===$u||!$u.has(r))){var i=du(n,e=cu(t,e),1);if(fa(n,i),i=hs(),null!==(n=vs(n,1)))zt(n,1,i),ys(n,i);else if("function"===typeof r.componentDidCatch&&(null===$u||!$u.has(r)))try{r.componentDidCatch(t,e)}catch(a){}break}}n=n.return}}function qs(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=hs(),e.pingedLanes|=e.suspendedLanes&n,Ou===e&&(Lu&n)===n&&(4===Fu||3===Fu&&(62914560&Lu)===Lu&&500>zi()-Hu?Is(e,0):zu|=n),ys(e,t)}function Bs(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===Wi()?1:2:(0===ss&&(ss=Vu),0===(t=qt(62914560&~ss))&&(t=4194304))),n=hs(),null!==(e=vs(e,t))&&(zt(e,t,n),ys(e,n))}function zs(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Ws(e,t,n,r){return new zs(e,t,n,r)}function Hs(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ks(e,t){var n=e.alternate;return null===n?((n=Ws(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Gs(e,t,n,r,i,a){var u=2;if(r=e,"function"===typeof e)Hs(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case I:return Qs(n.children,i,a,t);case M:u=8,i|=16;break;case E:u=8,i|=1;break;case T:return(e=Ws(12,n,t,8|i)).elementType=T,e.type=T,e.lanes=a,e;case N:return(e=Ws(13,n,t,i)).type=N,e.elementType=N,e.lanes=a,e;case R:return(e=Ws(19,n,t,i)).elementType=R,e.lanes=a,e;case U:return Ys(n,i,a,t);case F:return(e=Ws(24,n,t,i)).elementType=F,e.lanes=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:u=10;break e;case C:u=9;break e;case A:u=11;break e;case P:u=14;break e;case O:u=16,r=null;break e;case D:u=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Ws(u,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Qs(e,t,n,r){return(e=Ws(7,e,r,t)).lanes=n,e}function Ys(e,t,n,r){return(e=Ws(23,e,r,t)).elementType=U,e.lanes=n,e}function Js(e,t,n){return(e=Ws(6,e,null,t)).lanes=n,e}function Xs(e,t,n){return(t=Ws(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function $s(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Bt(0),this.expirationTimes=Bt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bt(0),this.mutableSourceEagerHydrationData=null}function Zs(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function ec(e,t,n,r){var i=t.current,a=hs(),u=ds(i);e:if(n){t:{if(Je(n=n._reactInternals)!==n||1!==n.tag)throw Error(o(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(mi(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(null!==s);throw Error(o(171))}if(1===n.tag){var c=n.type;if(mi(c)){n=wi(n,c,s);break e}}n=s}else n=hi;return null===t.context?t.context=n:t.pendingContext=n,(t=la(a,u)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),fa(i,t),ps(i,u,a),u}function tc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function nc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function rc(e,t){nc(e,t),(e=e.alternate)&&nc(e,t)}function ic(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new $s(e,t,null!=n&&!0===n.hydrate),t=Ws(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,sa(t),e[ei]=n.current,Pr(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function ac(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function oc(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a._internalRoot;if("function"===typeof i){var u=i;i=function(){var e=tc(o);u.call(e)}}ec(t,o,e,i)}else{if(a=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new ic(e,0,t?{hydrate:!0}:void 0)}(n,r),o=a._internalRoot,"function"===typeof i){var s=i;i=function(){var e=tc(o);s.call(e)}}bs((function(){ec(t,o,e,i)}))}return tc(o)}function uc(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ac(t))throw Error(o(200));return Zs(e,t,null,n)}Qu=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||pi.current)Uo=!0;else{if(0===(n&r)){switch(Uo=!1,t.tag){case 3:Go(t),Ga();break;case 5:La(t);break;case 1:mi(t.type)&&bi(t);break;case 4:Oa(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;fi($i,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?$o(e,t,n):(fi(Ua,1&Ua.current),null!==(t=au(e,t,n))?t.sibling:null);fi(Ua,1&Ua.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return iu(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),fi(Ua,Ua.current),r)break;return null;case 23:case 24:return t.lanes=0,Bo(e,t,n)}return au(e,t,n)}Uo=0!==(16384&e.flags)}else Uo=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=yi(t,di.current),aa(t,n),i=oo(null,t,r,e,i,n),t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,mi(r)){var a=!0;bi(t)}else a=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,sa(t);var u=r.getDerivedStateFromProps;"function"===typeof u&&ya(t,r,u,e),i.updater=ma,t.stateNode=i,i._reactInternals=t,ba(t,r,e,n),t=Ko(null,t,r,!0,a,n)}else t.tag=0,Fo(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(a=i._init)(i._payload),t.type=i,a=t.tag=function(e){if("function"===typeof e)return Hs(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===A)return 11;if(e===P)return 14}return 2}(i),e=Xi(i,e),a){case 0:t=Wo(null,t,i,e,n);break e;case 1:t=Ho(null,t,i,e,n);break e;case 11:t=jo(null,t,i,e,n);break e;case 14:t=Vo(null,t,i,Xi(i.type,e),r,n);break e}throw Error(o(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Wo(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ho(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 3:if(Go(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,ca(e,t),da(t,r,null,n),(r=t.memoizedState.element)===i)Ga(),t=au(e,t,n);else{if((a=(i=t.stateNode).hydrate)&&(Va=Qr(t.stateNode.containerInfo.firstChild),ja=t,a=qa=!0),a){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(a=e[i])._workInProgressVersionPrimary=e[i+1],Qa.push(a);for(n=Sa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Fo(e,t,r,n),Ga();t=t.child}return t;case 5:return La(t),null===e&&Wa(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,u=i.children,Wr(r,i)?u=null:null!==a&&Wr(r,a)&&(t.flags|=16),zo(e,t),Fo(e,t,u,n),t.child;case 6:return null===e&&Wa(t),null;case 13:return $o(e,t,n);case 4:return Oa(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ta(t,null,r,n):Fo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,jo(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 7:return Fo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Fo(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,u=t.memoizedProps,a=i.value;var s=t.type._context;if(fi($i,s._currentValue),s._currentValue=a,null!==u)if(s=u.value,0===(a=lr(s,a)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(s,a):1073741823))){if(u.children===i.children&&!pi.current){t=au(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var c=s.dependencies;if(null!==c){u=s.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&a)){1===s.tag&&((l=la(-1,n&-n)).tag=2,fa(s,l)),s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),ia(s.return,n),c.lanes|=n;break}l=l.next}}else u=10===s.tag&&s.type===t.type?null:s.child;if(null!==u)u.return=s;else for(u=s;null!==u;){if(u===t){u=null;break}if(null!==(s=u.sibling)){s.return=u.return,u=s;break}u=u.return}s=u}Fo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(a=t.pendingProps).children,aa(t,n),r=r(i=oa(i,a.unstable_observedBits)),t.flags|=1,Fo(e,t,r,n),t.child;case 14:return a=Xi(i=t.type,t.pendingProps),Vo(e,t,i,a=Xi(i.type,a),r,n);case 15:return qo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Xi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,mi(r)?(e=!0,bi(t)):e=!1,aa(t,n),ka(t,r,i),ba(t,r,i,n),Ko(null,t,r,!0,e,n);case 19:return iu(e,t,n);case 23:case 24:return Bo(e,t,n)}throw Error(o(156,t.tag))},ic.prototype.render=function(e){ec(e,this._internalRoot,null,null)},ic.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;ec(null,e,null,(function(){t[ei]=null}))},tt=function(e){13===e.tag&&(ps(e,4,hs()),rc(e,4))},nt=function(e){13===e.tag&&(ps(e,67108864,hs()),rc(e,67108864))},rt=function(e){if(13===e.tag){var t=hs(),n=ds(e);ps(e,n,t),rc(e,n)}},it=function(e,t){return t()},Se=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ai(r);if(!i)throw Error(o(90));X(r),ne(r,i)}}}break;case"textarea":ce(e,n);break;case"select":null!=(t=n.value)&&oe(e,!!n.multiple,t,!1)}},Oe=ws,De=function(e,t,n,r,i){var a=Pu;Pu|=4;try{return Ki(98,e.bind(null,t,n,r,i))}finally{0===(Pu=a)&&(Gu(),Qi())}},Le=function(){0===(49&Pu)&&(function(){if(null!==is){var e=is;is=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,ys(e,zi())}))}Qi()}(),Ls())},Me=function(e,t){var n=Pu;Pu|=2;try{return e(t)}finally{0===(Pu=n)&&(Gu(),Qi())}};var sc={Events:[ri,ii,ai,Re,Pe,Ls,{current:!1}]},cc={findFiberByHostInstance:ni,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},lc={bundleType:cc.bundleType,version:cc.version,rendererPackageName:cc.rendererPackageName,rendererConfig:cc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ze(e))?null:e.stateNode},findFiberByHostInstance:cc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var fc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fc.isDisabled&&fc.supportsFiber)try{xi=fc.inject(lc),Ii=fc}catch(ye){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sc,t.createPortal=uc,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=Ze(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Pu;if(0!==(48&n))return e(t);Pu|=1;try{if(e)return Ki(99,e.bind(null,t))}finally{Pu=n,Qi()}},t.hydrate=function(e,t,n){if(!ac(t))throw Error(o(200));return oc(null,e,t,!0,n)},t.render=function(e,t,n){if(!ac(t))throw Error(o(200));return oc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!ac(e))throw Error(o(40));return!!e._reactRootContainer&&(bs((function(){oc(null,null,e,!1,(function(){e._reactRootContainer=null,e[ei]=null}))})),!0)},t.unstable_batchedUpdates=ws,t.unstable_createPortal=function(e,t){return uc(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ac(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return oc(e,t,n,!1,r)},t.version="17.0.2"},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){"use strict";n(725);var r=n(791),i=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var a=Symbol.for;i=a("react.element"),t.Fragment=a("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u=Object.prototype.hasOwnProperty,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)u.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:o.current}}t.jsx=c,t.jsxs=c},117:function(e,t,n){"use strict";var r=n(725),i=60103,a=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,u=60110,s=60112;t.Suspense=60113;var c=60115,l=60116;if("function"===typeof Symbol&&Symbol.for){var f=Symbol.for;i=f("react.element"),a=f("react.portal"),t.Fragment=f("react.fragment"),t.StrictMode=f("react.strict_mode"),t.Profiler=f("react.profiler"),o=f("react.provider"),u=f("react.context"),s=f("react.forward_ref"),t.Suspense=f("react.suspense"),c=f("react.memo"),l=f("react.lazy")}var h="function"===typeof Symbol&&Symbol.iterator;function d(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function y(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}function m(){}function g(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(d(85));this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},m.prototype=y.prototype;var k=g.prototype=new m;k.constructor=g,r(k,y.prototype),k.isPureReactComponent=!0;var w={current:null},b=Object.prototype.hasOwnProperty,_={key:!0,ref:!0,__self:!0,__source:!0};function x(e,t,n){var r,a={},o=null,u=null;if(null!=t)for(r in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)b.call(t,r)&&!_.hasOwnProperty(r)&&(a[r]=t[r]);var s=arguments.length-2;if(1===s)a.children=n;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===a[r]&&(a[r]=s[r]);return{$$typeof:i,type:e,key:o,ref:u,props:a,_owner:w.current}}function I(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var E=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function S(e,t,n,r,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case i:case a:s=!0}}if(s)return o=o(s=e),e=""===r?"."+T(s,0):r,Array.isArray(o)?(n="",null!=e&&(n=e.replace(E,"$&/")+"/"),S(o,t,n,"",(function(e){return e}))):null!=o&&(I(o)&&(o=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(E,"$&/")+"/")+e)),t.push(o)),1;if(s=0,r=""===r?".":r+":",Array.isArray(e))for(var c=0;c<e.length;c++){var l=r+T(u=e[c],c);s+=S(u,t,n,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=S(u=u.value,t,n,l=r+T(u,c++),o);else if("object"===u)throw t=""+e,Error(d(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return s}function C(e,t,n){if(null==e)return e;var r=[],i=0;return S(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function A(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var N={current:null};function R(){var e=N.current;if(null===e)throw Error(d(321));return e}var P={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:w,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:C,forEach:function(e,t,n){C(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return C(e,(function(){t++})),t},toArray:function(e){return C(e,(function(e){return e}))||[]},only:function(e){if(!I(e))throw Error(d(143));return e}},t.Component=y,t.PureComponent=g,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(d(267,e));var a=r({},e.props),o=e.key,u=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(u=t.ref,s=w.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)b.call(t,l)&&!_.hasOwnProperty(l)&&(a[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)a.children=n;else if(1<l){c=Array(l);for(var f=0;f<l;f++)c[f]=arguments[f+2];a.children=c}return{$$typeof:i,type:e.type,key:o,ref:u,props:a,_owner:s}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:u,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=x,t.createFactory=function(e){var t=x.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:s,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:l,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return R().useCallback(e,t)},t.useContext=function(e,t){return R().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return R().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return R().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return R().useLayoutEffect(e,t)},t.useMemo=function(e,t){return R().useMemo(e,t)},t.useReducer=function(e,t,n){return R().useReducer(e,t,n)},t.useRef=function(e){return R().useRef(e)},t.useState=function(e){return R().useState(e)},t.version="17.0.2"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},727:function(e){var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(R){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),o=new C(r||[]);return a._invoke=function(e,t,n){var r=f;return function(i,a){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw a;return N()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=E(o,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var s=l(e,t,n);if("normal"===s.type){if(r=n.done?p:h,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=p,n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(R){return{type:"throw",arg:R}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",d="executing",p="completed",v={};function y(){}function m(){}function g(){}var k={};s(k,a,(function(){return this}));var w=Object.getPrototypeOf,b=w&&w(w(A([])));b&&b!==n&&r.call(b,a)&&(k=b);var _=g.prototype=y.prototype=Object.create(k);function x(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function I(e,t){function n(i,a,o,u){var s=l(e[i],e,a);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"===typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,o,u)}),(function(e){n("throw",e,o,u)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,u)}))}u(s.arg)}var i;this._invoke=function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}}function E(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,E(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function A(e){if(e){var n=e[a];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:N}}function N(){return{value:t,done:!0}}return m.prototype=g,s(_,"constructor",g),s(g,"constructor",m),m.displayName=s(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,u,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},x(I.prototype),s(I.prototype,o,(function(){return this})),e.AsyncIterator=I,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new I(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},x(_),s(_,u,"Generator"),s(_,a,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=A,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return u.type="throw",u.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:A(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(n){"object"===typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},813:function(e,t){"use strict";var n,r,i,a;if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var c=null,l=null,f=function e(){if(null!==c)try{var n=t.unstable_now();c(!0,n),c=null}catch(r){throw setTimeout(e,0),r}};n=function(e){null!==c?setTimeout(n,0,e):(c=e,setTimeout(f,0))},r=function(e,t){l=setTimeout(e,t)},i=function(){clearTimeout(l)},t.unstable_shouldYield=function(){return!1},a=t.unstable_forceFrameRate=function(){}}else{var h=window.setTimeout,d=window.clearTimeout;if("undefined"!==typeof console){var p=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof p&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var v=!1,y=null,m=-1,g=5,k=0;t.unstable_shouldYield=function(){return t.unstable_now()>=k},a=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):g=0<e?Math.floor(1e3/e):5};var w=new MessageChannel,b=w.port2;w.port1.onmessage=function(){if(null!==y){var e=t.unstable_now();k=e+g;try{y(!0,e)?b.postMessage(null):(v=!1,y=null)}catch(n){throw b.postMessage(null),n}}else v=!1},n=function(e){y=e,v||(v=!0,b.postMessage(null))},r=function(e,n){m=h((function(){e(t.unstable_now())}),n)},i=function(){d(m),m=-1}}function _(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<E(i,t)))break e;e[r]=t,e[n]=i,n=r}}function x(e){return void 0===(e=e[0])?null:e}function I(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var a=2*(r+1)-1,o=e[a],u=a+1,s=e[u];if(void 0!==o&&0>E(o,n))void 0!==s&&0>E(s,o)?(e[r]=s,e[u]=n,r=u):(e[r]=o,e[a]=n,r=a);else{if(!(void 0!==s&&0>E(s,n)))break e;e[r]=s,e[u]=n,r=u}}}return t}return null}function E(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var T=[],S=[],C=1,A=null,N=3,R=!1,P=!1,O=!1;function D(e){for(var t=x(S);null!==t;){if(null===t.callback)I(S);else{if(!(t.startTime<=e))break;I(S),t.sortIndex=t.expirationTime,_(T,t)}t=x(S)}}function L(e){if(O=!1,D(e),!P)if(null!==x(T))P=!0,n(M);else{var t=x(S);null!==t&&r(L,t.startTime-e)}}function M(e,n){P=!1,O&&(O=!1,i()),R=!0;var a=N;try{for(D(n),A=x(T);null!==A&&(!(A.expirationTime>n)||e&&!t.unstable_shouldYield());){var o=A.callback;if("function"===typeof o){A.callback=null,N=A.priorityLevel;var u=o(A.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?A.callback=u:A===x(T)&&I(T),D(n)}else I(T);A=x(T)}if(null!==A)var s=!0;else{var c=x(S);null!==c&&r(L,c.startTime-n),s=!1}return s}finally{A=null,N=a,R=!1}}var U=a;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){P||R||(P=!0,n(M))},t.unstable_getCurrentPriorityLevel=function(){return N},t.unstable_getFirstCallbackNode=function(){return x(T)},t.unstable_next=function(e){switch(N){case 1:case 2:case 3:var t=3;break;default:t=N}var n=N;N=t;try{return e()}finally{N=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=U,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=N;N=e;try{return t()}finally{N=n}},t.unstable_scheduleCallback=function(e,a,o){var u=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?u+o:u:o=u,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:C++,callback:a,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>u?(e.sortIndex=o,_(S,e),null===x(T)&&e===x(S)&&(O?i():O=!0,r(L,o-u))):(e.sortIndex=s,_(T,e),P||R||(P=!0,n(M))),e},t.unstable_wrapCallback=function(e){var t=N;return function(){var n=N;N=t;try{return e.apply(this,arguments)}finally{N=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return Re},SDK_VERSION:function(){return Tt},_DEFAULT_ENTRY_NAME:function(){return ft},_addComponent:function(){return vt},_addOrOverwriteComponent:function(){return yt},_apps:function(){return dt},_clearComponents:function(){return wt},_components:function(){return pt},_getProvider:function(){return gt},_registerComponent:function(){return mt},_removeServiceInstance:function(){return kt},deleteApp:function(){return Nt},getApp:function(){return Ct},getApps:function(){return At},initializeApp:function(){return St},onLog:function(){return Ot},registerVersion:function(){return Pt},setLogLevel:function(){return Dt}});var t=n(791),r=n(164);function i(e){if(Array.isArray(e))return e}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){if(e){if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){return i(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){u=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}}(e,t)||o(e,t)||u()}function c(){return c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}var l,f=l||(l={});f.Pop="POP",f.Push="PUSH",f.Replace="REPLACE";var h=function(e){return e};function d(e){e.preventDefault(),e.returnValue=""}function p(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter((function(e){return e!==t}))}},call:function(t){e.forEach((function(e){return e&&e(t)}))}}}function v(){return Math.random().toString(36).substr(2,8)}function y(e){var t=e.pathname;t=void 0===t?"/":t;var n=e.search;return n=void 0===n?"":n,e=void 0===(e=e.hash)?"":e,n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),e&&"#"!==e&&(t+="#"===e.charAt(0)?e:"#"+e),t}function m(e){var t={};if(e){var n=e.indexOf("#");0<=n&&(t.hash=e.substr(n),e=e.substr(0,n)),0<=(n=e.indexOf("?"))&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function g(e,t){if(!e)throw new Error(t)}var k=(0,t.createContext)(null);var w=(0,t.createContext)(null);var b=(0,t.createContext)({outlet:null,matches:[]});function _(e){return function(e){var n=(0,t.useContext)(b).outlet;if(n)return(0,t.createElement)(N.Provider,{value:e},n);return n}(e.context)}function x(e){g(!1)}function I(e){var n=e.basename,r=void 0===n?"/":n,i=e.children,a=void 0===i?null:i,o=e.location,u=e.navigationType,s=void 0===u?l.Pop:u,c=e.navigator,f=e.static,h=void 0!==f&&f;S()&&g(!1);var d=z(r),p=(0,t.useMemo)((function(){return{basename:d,navigator:c,static:h}}),[d,c,h]);"string"===typeof o&&(o=m(o));var v=o,y=v.pathname,b=void 0===y?"/":y,_=v.search,x=void 0===_?"":_,I=v.hash,E=void 0===I?"":I,T=v.state,C=void 0===T?null:T,A=v.key,N=void 0===A?"default":A,R=(0,t.useMemo)((function(){var e=q(b,d);return null==e?null:{pathname:e,search:x,hash:E,state:C,key:N}}),[d,b,x,E,C,N]);return null==R?null:(0,t.createElement)(k.Provider,{value:p},(0,t.createElement)(w.Provider,{children:a,value:{location:R,navigationType:s}}))}function E(e){var n=e.children,r=e.location;return function(e,n){S()||g(!1);var r=(0,t.useContext)(b).matches,i=r[r.length-1],a=i?i.params:{},o=(i&&i.pathname,i?i.pathnameBase:"/");i&&i.route;0;var u,s=C();if(n){var c,l="string"===typeof n?m(n):n;"/"===o||(null==(c=l.pathname)?void 0:c.startsWith(o))||g(!1),u=l}else u=s;var f=u.pathname||"/",h="/"===o?f:f.slice(o.length)||"/",d=function(e,t,n){void 0===n&&(n="/");var r=q(("string"===typeof t?m(t):t).pathname||"/",n);if(null==r)return null;var i=O(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=U(i[o],r);return a}(e,{pathname:h});0;return F(d&&d.map((function(e){return Object.assign({},e,{params:Object.assign({},a,e.params),pathname:B([o,e.pathname]),pathnameBase:"/"===e.pathnameBase?o:B([o,e.pathnameBase])})})),r)}(P(n),r)}function T(e){S()||g(!1);var n=(0,t.useContext)(k),r=n.basename,i=n.navigator,a=R(e),o=a.hash,u=a.pathname,s=a.search,c=u;if("/"!==r){var l=function(e){return""===e||""===e.pathname?"/":"string"===typeof e?m(e).pathname:e.pathname}(e),f=null!=l&&l.endsWith("/");c="/"===u?r+(f?"/":""):B([r,u])}return i.createHref({pathname:c,search:s,hash:o})}function S(){return null!=(0,t.useContext)(w)}function C(){return S()||g(!1),(0,t.useContext)(w).location}function A(){S()||g(!1);var e=(0,t.useContext)(k),n=e.basename,r=e.navigator,i=(0,t.useContext)(b).matches,a=C().pathname,o=JSON.stringify(i.map((function(e){return e.pathnameBase}))),u=(0,t.useRef)(!1);(0,t.useEffect)((function(){u.current=!0}));var s=(0,t.useCallback)((function(e,t){if(void 0===t&&(t={}),u.current)if("number"!==typeof e){var i=V(e,JSON.parse(o),a);"/"!==n&&(i.pathname=B([n,i.pathname])),(t.replace?r.replace:r.push)(i,t.state)}else r.go(e)}),[n,r,o,a]);return s}var N=(0,t.createContext)(null);function R(e){var n=(0,t.useContext)(b).matches,r=C().pathname,i=JSON.stringify(n.map((function(e){return e.pathnameBase})));return(0,t.useMemo)((function(){return V(e,JSON.parse(i),r)}),[e,i,r])}function P(e){var n=[];return t.Children.forEach(e,(function(e){if((0,t.isValidElement)(e))if(e.type!==t.Fragment){e.type!==x&&g(!1);var r={caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path};e.props.children&&(r.children=P(e.props.children)),n.push(r)}else n.push.apply(n,P(e.props.children))})),n}function O(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach((function(e,i){var a={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(a.relativePath.startsWith(r)||g(!1),a.relativePath=a.relativePath.slice(r.length));var o=B([r,a.relativePath]),u=n.concat(a);e.children&&e.children.length>0&&(!0===e.index&&g(!1),O(e.children,t,u,o)),(null!=e.path||e.index)&&t.push({path:o,score:M(o,e.index),routesMeta:u})})),t}var D=/^:\w+$/,L=function(e){return"*"===e};function M(e,t){var n=e.split("/"),r=n.length;return n.some(L)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!L(e)})).reduce((function(e,t){return e+(D.test(t)?3:""===t?1:10)}),r)}function U(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var u=n[o],s=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=j({path:u.relativePath,caseSensitive:u.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);var f=u.route;a.push({params:r,pathname:B([i,l.pathname]),pathnameBase:B([i,l.pathnameBase]),route:f}),"/"!==l.pathnameBase&&(i=B([i,l.pathnameBase]))}return a}function F(e,n){return void 0===n&&(n=[]),null==e?null:e.reduceRight((function(r,i,a){return(0,t.createElement)(b.Provider,{children:void 0!==i.route.element?i.route.element:(0,t.createElement)(_,null),value:{outlet:r,matches:n.concat(e.slice(0,a+1))}})}),null)}function j(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):i+=n?"\\/*$":"(?:\\b|\\/|$)";return[new RegExp(i,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),r=s(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var u=o[0],c=u.replace(/(.)\/+$/,"$1"),l=o.slice(1);return{params:a.reduce((function(e,t,n){if("*"===t){var r=l[n]||"";c=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return e}}(l[n]||""),e}),{}),pathname:u,pathnameBase:c,pattern:e}}function V(e,t,n){var r,i="string"===typeof e?m(e):e,a=""===e||""===i.pathname?"/":i.pathname;if(null==a)r=n;else{var o=t.length-1;if(a.startsWith("..")){for(var u=a.split("/");".."===u[0];)u.shift(),o-=1;i.pathname=u.join("/")}r=o>=0?t[o]:"/"}var s=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?m(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,u=void 0===o?"":o,s=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:s,search:W(a),hash:H(u)}}(i,r);return a&&"/"!==a&&a.endsWith("/")&&!s.pathname.endsWith("/")&&(s.pathname+="/"),s}function q(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=e.charAt(t.length);return n&&"/"!==n?null:e.slice(t.length)||"/"}var B=function(e){return e.join("/").replace(/\/\/+/g,"/")},z=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},W=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},H=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""};function K(){return K=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},K.apply(this,arguments)}function G(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var Q=["onClick","reloadDocument","replace","state","target","to"];function Y(e){var n=e.basename,r=e.children,i=e.window,a=(0,t.useRef)();null==a.current&&(a.current=function(e){function t(){var e=o.location,t=u.state||{};return[t.idx,h({pathname:e.pathname,search:e.search,hash:e.hash,state:t.usr||null,key:t.key||"default"})]}function n(e){return"string"===typeof e?e:y(e)}function r(e,t){return void 0===t&&(t=null),h(c({pathname:k.pathname,hash:"",search:""},"string"===typeof e?m(e):e,{state:t,key:v()}))}function i(e){f=e,e=t(),g=e[0],k=e[1],w.call({action:f,location:k})}function a(e){u.go(e)}void 0===e&&(e={});var o=void 0===(e=e.window)?document.defaultView:e,u=o.history,s=null;o.addEventListener("popstate",(function(){if(s)b.call(s),s=null;else{var e=l.Pop,n=t(),r=n[0];if(n=n[1],b.length){if(null!=r){var o=g-r;o&&(s={action:e,location:n,retry:function(){a(-1*o)}},a(o))}}else i(e)}}));var f=l.Pop,g=(e=t())[0],k=e[1],w=p(),b=p();return null==g&&(g=0,u.replaceState(c({},u.state,{idx:g}),"")),{get action(){return f},get location(){return k},createHref:n,push:function e(t,a){var s=l.Push,c=r(t,a);if(!b.length||(b.call({action:s,location:c,retry:function(){e(t,a)}}),0)){var f=[{usr:c.state,key:c.key,idx:g+1},n(c)];c=f[0],f=f[1];try{u.pushState(c,"",f)}catch(yv){o.location.assign(f)}i(s)}},replace:function e(t,a){var o=l.Replace,s=r(t,a);b.length&&(b.call({action:o,location:s,retry:function(){e(t,a)}}),1)||(s=[{usr:s.state,key:s.key,idx:g},n(s)],u.replaceState(s[0],"",s[1]),i(o))},go:a,back:function(){a(-1)},forward:function(){a(1)},listen:function(e){return w.push(e)},block:function(e){var t=b.push(e);return 1===b.length&&o.addEventListener("beforeunload",d),function(){t(),b.length||o.removeEventListener("beforeunload",d)}}}}({window:i}));var o=a.current,u=s((0,t.useState)({action:o.action,location:o.location}),2),f=u[0],g=u[1];return(0,t.useLayoutEffect)((function(){return o.listen(g)}),[o]),(0,t.createElement)(I,{basename:n,children:r,location:f.location,navigationType:f.action,navigator:o})}function J(e){var n=e.basename,r=e.children,i=e.window,a=(0,t.useRef)();null==a.current&&(a.current=function(e){function t(){var e=m(u.location.hash.substr(1)),t=e.pathname,n=e.search;e=e.hash;var r=s.state||{};return[r.idx,h({pathname:void 0===t?"/":t,search:void 0===n?"":n,hash:void 0===e?"":e,state:r.usr||null,key:r.key||"default"})]}function n(){if(f)_.call(f),f=null;else{var e=l.Pop,n=t(),r=n[0];if(n=n[1],_.length){if(null!=r){var i=k-r;i&&(f={action:e,location:n,retry:function(){o(-1*i)}},o(i))}}else a(e)}}function r(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&(n=-1===(n=(t=u.location.href).indexOf("#"))?t:t.slice(0,n)),n+"#"+("string"===typeof e?e:y(e))}function i(e,t){return void 0===t&&(t=null),h(c({pathname:w.pathname,hash:"",search:""},"string"===typeof e?m(e):e,{state:t,key:v()}))}function a(e){g=e,e=t(),k=e[0],w=e[1],b.call({action:g,location:w})}function o(e){s.go(e)}void 0===e&&(e={});var u=void 0===(e=e.window)?document.defaultView:e,s=u.history,f=null;u.addEventListener("popstate",n),u.addEventListener("hashchange",(function(){y(t()[1])!==y(w)&&n()}));var g=l.Pop,k=(e=t())[0],w=e[1],b=p(),_=p();return null==k&&(k=0,s.replaceState(c({},s.state,{idx:k}),"")),{get action(){return g},get location(){return w},createHref:r,push:function e(t,n){var o=l.Push,c=i(t,n);if(!_.length||(_.call({action:o,location:c,retry:function(){e(t,n)}}),0)){var f=[{usr:c.state,key:c.key,idx:k+1},r(c)];c=f[0],f=f[1];try{s.pushState(c,"",f)}catch(Fh){u.location.assign(f)}a(o)}},replace:function e(t,n){var o=l.Replace,u=i(t,n);_.length&&(_.call({action:o,location:u,retry:function(){e(t,n)}}),1)||(u=[{usr:u.state,key:u.key,idx:k},r(u)],s.replaceState(u[0],"",u[1]),a(o))},go:o,back:function(){o(-1)},forward:function(){o(1)},listen:function(e){return b.push(e)},block:function(e){var t=_.push(e);return 1===_.length&&u.addEventListener("beforeunload",d),function(){t(),_.length||u.removeEventListener("beforeunload",d)}}}}({window:i}));var o=a.current,u=s((0,t.useState)({action:o.action,location:o.location}),2),f=u[0],g=u[1];return(0,t.useLayoutEffect)((function(){return o.listen(g)}),[o]),(0,t.createElement)(I,{basename:n,children:r,location:f.location,navigationType:f.action,navigator:o})}var X=(0,t.forwardRef)((function(e,n){var r=e.onClick,i=e.reloadDocument,a=e.replace,o=void 0!==a&&a,u=e.state,s=e.target,c=e.to,l=G(e,Q),f=T(c),h=function(e,n){var r=void 0===n?{}:n,i=r.target,a=r.replace,o=r.state,u=A(),s=C(),c=R(e);return(0,t.useCallback)((function(t){if(0===t.button&&(!i||"_self"===i)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(t)){t.preventDefault();var n=!!a||y(s)===y(c);u(e,{replace:n,state:o})}}),[s,u,c,a,o,i,e])}(c,{replace:o,state:u,target:s});return(0,t.createElement)("a",K({},l,{href:f,onClick:function(e){r&&r(e),e.defaultPrevented||i||h(e)},ref:n,target:s}))}));function $(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function Z(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){$(a,r,i,o,u,"next",e)}function u(e){$(a,r,i,o,u,"throw",e)}o(void 0)}))}}var ee=n(757),te=n.n(ee);function ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function re(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ae(e,t,n){return t&&ie(e.prototype,t),n&&ie(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function oe(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=o(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,a=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw a}}}}function ue(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function se(e,t){return se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},se(e,t)}function ce(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&se(e,t)}function le(e){return le=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},le(e)}function fe(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function he(e){return he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},he(e)}function de(e,t){if(t&&("object"===he(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ue(e)}function pe(e){var t=fe();return function(){var n,r=le(e);if(t){var i=le(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return de(this,n)}}function ve(e,t,n){return ve=fe()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&se(i,n.prototype),i},ve.apply(null,arguments)}function ye(e){var t="function"===typeof Map?new Map:void 0;return ye=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return ve(e,arguments,le(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),se(n,e)},ye(e)}var me=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},ge={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(me(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},ke=function(e){return function(e){var t=me(e);return ge.encodeByteArray(t,!0)}(e).replace(/\./g,"")},we=function(e){try{return ge.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function be(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=be(e[n],t[n]));return e}var _e=function(){function e(){var t=this;re(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return ae(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function xe(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[ke(JSON.stringify({alg:"none",type:"JWT"})),ke(JSON.stringify(a)),""].join(".")}function Ie(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Ee(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ie())}function Te(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function Se(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Ce(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Ae(){var e=Ie();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Ne(){return"object"===typeof indexedDB}var Re=function(e){ce(n,e);var t=pe(n);function n(e,r,i){var a;return re(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(ue(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(ue(a),Pe.prototype.create),a}return ae(n)}(ye(Error)),Pe=function(){function e(t,n,r){re(this,e),this.service=t,this.serviceName=n,this.errors=r}return ae(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?Oe(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new Re(n,a,t);return o}}]),e}();function Oe(e,t){return e.replace(De,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var De=/\{\$([^}]+)}/g;function Le(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Me(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(Ue(u)&&Ue(s)){if(!Me(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function Ue(e){return null!==e&&"object"===typeof e}function Fe(e){for(var t=[],n=function(){var e=s(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function je(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=s(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function Ve(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function qe(e,t){var n=new Be(e,t);return n.subscribe.bind(n)}var Be=function(){function e(t,n){var r=this;re(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return ae(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=oe(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=ze),void 0===r.error&&(r.error=ze),void 0===r.complete&&(r.complete=ze);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function ze(){}function We(e){return e&&e._delegate?e._delegate:e}function He(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Ke(e){return function(e){if(Array.isArray(e))return a(e)}(e)||He(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Ge=function(){function e(t,n,r){re(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return ae(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),Qe="[DEFAULT]",Ye=function(){function e(t,n){re(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return ae(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new _e;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Qe})}catch(c){}var t,n=oe(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=s(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(c){}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=Z(ee.mark((function e(){var t;return ee.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(Ke(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),Ke(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=oe(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=s(i.value,2),c=u[0],l=u[1],f=this.normalizeInstanceIdentifier(c);r===f&&l.resolve(a)}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=oe(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(rx){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===Qe?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(rx){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe;return this.component?this.component.multipleInstances?e:Qe:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var Je,Xe,$e=function(){function e(t){re(this,e),this.name=t,this.providers=new Map}return ae(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new Ye(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),Ze=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Xe||(Xe={}));var et,tt,nt={debug:Xe.DEBUG,verbose:Xe.VERBOSE,info:Xe.INFO,warn:Xe.WARN,error:Xe.ERROR,silent:Xe.SILENT},rt=Xe.INFO,it=(ne(Je={},Xe.DEBUG,"log"),ne(Je,Xe.VERBOSE,"log"),ne(Je,Xe.INFO,"info"),ne(Je,Xe.WARN,"warn"),ne(Je,Xe.ERROR,"error"),Je),at=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=it[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},ot=function(){function e(t){re(this,e),this.name=t,this._logLevel=rt,this._logHandler=at,this._userLogHandler=null,Ze.push(this)}return ae(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Xe))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?nt[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Xe.DEBUG].concat(t)),this._logHandler.apply(this,[this,Xe.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Xe.VERBOSE].concat(t)),this._logHandler.apply(this,[this,Xe.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Xe.INFO].concat(t)),this._logHandler.apply(this,[this,Xe.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Xe.WARN].concat(t)),this._logHandler.apply(this,[this,Xe.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Xe.ERROR].concat(t)),this._logHandler.apply(this,[this,Xe.ERROR].concat(t))}}]),e}();var ut=function(){function e(t){re(this,e),this.container=t}return ae(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var st="@firebase/app",ct="0.7.11",lt=new ot("@firebase/app"),ft="[DEFAULT]",ht=(ne(et={},st,"fire-core"),ne(et,"@firebase/app-compat","fire-core-compat"),ne(et,"@firebase/analytics","fire-analytics"),ne(et,"@firebase/analytics-compat","fire-analytics-compat"),ne(et,"@firebase/app-check","fire-app-check"),ne(et,"@firebase/app-check-compat","fire-app-check-compat"),ne(et,"@firebase/auth","fire-auth"),ne(et,"@firebase/auth-compat","fire-auth-compat"),ne(et,"@firebase/database","fire-rtdb"),ne(et,"@firebase/database-compat","fire-rtdb-compat"),ne(et,"@firebase/functions","fire-fn"),ne(et,"@firebase/functions-compat","fire-fn-compat"),ne(et,"@firebase/installations","fire-iid"),ne(et,"@firebase/installations-compat","fire-iid-compat"),ne(et,"@firebase/messaging","fire-fcm"),ne(et,"@firebase/messaging-compat","fire-fcm-compat"),ne(et,"@firebase/performance","fire-perf"),ne(et,"@firebase/performance-compat","fire-perf-compat"),ne(et,"@firebase/remote-config","fire-rc"),ne(et,"@firebase/remote-config-compat","fire-rc-compat"),ne(et,"@firebase/storage","fire-gcs"),ne(et,"@firebase/storage-compat","fire-gcs-compat"),ne(et,"@firebase/firestore","fire-fst"),ne(et,"@firebase/firestore-compat","fire-fst-compat"),ne(et,"fire-js","fire-js"),ne(et,"firebase","fire-js-all"),et),dt=new Map,pt=new Map;function vt(e,t){try{e.container.addComponent(t)}catch(n){lt.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function yt(e,t){e.container.addOrOverwriteComponent(t)}function mt(e){var t=e.name;if(pt.has(t))return lt.debug("There were multiple attempts to register component ".concat(t,".")),!1;pt.set(t,e);var n,r=oe(dt.values());try{for(r.s();!(n=r.n()).done;){vt(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function gt(e,t){return e.container.getProvider(t)}function kt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ft;gt(e,t).clearInstance(n)}function wt(){pt.clear()}var bt,_t,xt=(ne(tt={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),ne(tt,"bad-app-name","Illegal App name: '{$appName}"),ne(tt,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),ne(tt,"app-deleted","Firebase App named '{$appName}' already deleted"),ne(tt,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),ne(tt,"invalid-log-argument","First argument to `onLog` must be null or a function."),tt),It=new Pe("app","Firebase",xt),Et=function(){function e(t,n,r){var i=this;re(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ge("app",(function(){return i}),"PUBLIC"))}return ae(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw It.create("app-deleted",{appName:this._name})}}]),e}(),Tt="9.6.1";function St(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:ft,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw It.create("bad-app-name",{appName:String(i)});var a=dt.get(i);if(a){if(Me(e,a.options)&&Me(r,a.config))return a;throw It.create("duplicate-app",{appName:i})}var o,u=new $e(i),s=oe(pt.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new Et(e,r,u);return dt.set(i,l),l}function Ct(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft,t=dt.get(e);if(!t)throw It.create("no-app",{appName:e});return t}function At(){return Array.from(dt.values())}function Nt(e){return Rt.apply(this,arguments)}function Rt(){return(Rt=Z(ee.mark((function e(t){var n;return ee.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!dt.has(n)){e.next=6;break}return dt.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pt(e,t,n){var r,i=null!==(r=ht[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void lt.warn(u.join(" "))}mt(new Ge("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function Ot(e,t){if(null!==e&&"function"!==typeof e)throw It.create("invalid-log-argument");!function(e,t){var n,r=oe(Ze);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=nt[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:Xe[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function Dt(e){var t;t=e,Ze.forEach((function(e){e.setLogLevel(t)}))}bt="",mt(new Ge("platform-logger",(function(e){return new ut(e)}),"PRIVATE")),Pt(st,ct,bt),Pt(st,ct,"esm2017"),Pt("fire-js","");var Lt=function(){function e(t,n){var r=this;re(this,e),this._delegate=t,this.firebase=n,vt(t,new Ge("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return ae(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),Nt(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ft;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ft;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){vt(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){yt(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),Mt=(ne(_t={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),ne(_t,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),_t),Ut=new Pe("app-compat","Firebase",Mt);var Ft=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=St(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Le(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:Pt,setLogLevel:Dt,onLog:Ot,apps:null,SDK_VERSION:Tt,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(mt(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw Ut.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&be(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Le(n,e=e||ft))throw Ut.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(Lt);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){be(n,e)},createSubscribe:qe,ErrorFactory:Pe,deepExtend:be}),n}(),jt=new ot("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){jt.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Vt=self.firebase.SDK_VERSION;Vt&&Vt.indexOf("LITE")>=0&&jt.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var qt=Ft;!function(e){Pt("@firebase/app-compat","0.1.12",e)}();qt.registerVersion("firebase","9.6.1","app-compat");var Bt="firebasestorage.googleapis.com",zt=function(e){ce(n,e);var t=pe(n);function n(e,r){var i;return re(this,n),(i=t.call(this,Wt(e),"Firebase Storage: ".concat(r," (").concat(Wt(e),")"))).customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(ue(i),n.prototype),i}return ae(n,[{key:"_codeEquals",value:function(e){return Wt(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(Re);function Wt(e){return"storage/"+e}function Ht(){return new zt("unknown","An unknown error occurred, please check the error payload for server response.")}function Kt(){return new zt("canceled","User canceled the upload/download.")}function Gt(){return new zt("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Qt(e){return new zt("invalid-argument",e)}function Yt(){return new zt("app-deleted","The Firebase app was deleted.")}function Jt(e){return new zt("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Xt(e,t){return new zt("invalid-format","String does not match format '"+e+"': "+t)}function $t(e){throw new zt("internal-error","Internal error: "+e)}var Zt,en=function(){function e(t,n){re(this,e),this.bucket=t,this.path_=n}return ae(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r;try{r=e.makeFromUrl(t,n)}catch(i){return new e(t,"")}if(""===r.path)return r;throw new zt("invalid-default-bucket","Invalid default bucket '"+t+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var a=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var u=n.replace(/[.]/g,"\\."),s=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(u,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(n===Bt?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}],c=0;c<s.length;c++){var l=s[c],f=l.regex.exec(t);if(f){var h=f[l.indices.bucket],d=f[l.indices.path];d||(d=""),r=new e(h,d),l.postModify(r);break}}if(null==r)throw function(e){return new zt("invalid-url","Invalid URL '"+e+"'.")}(t);return r}}]),e}(),tn=function(){function e(t){re(this,e),this.promise_=Promise.reject(t)}return ae(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function nn(e){return"string"===typeof e||e instanceof String}function rn(e){return an()&&e instanceof Blob}function an(){return"undefined"!==typeof Blob}function on(e,t,n,r){if(r<t)throw Qt("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw Qt("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function un(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function sn(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(Zt||(Zt={}));var cn=function(){function e(t,n,r,i,a,o,u,s,c,l,f){var h=this;re(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=u,this.errorCallback_=s,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){h.resolve_=e,h.reject_=t,h.start_()}))}return ae(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponse());!function(e){return void 0!==e}(o)?r():r(o)}catch(s){i(s)}else if(null!==a){var u=Ht();u.serverResponse=a.getErrorText(),e.errorCallback_?i(e.errorCallback_(a,u)):i(u)}else{if(n.canceled)i(e.appDelete_?Yt():Kt());else i(new zt("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}};this.canceled_?t(0,new ln(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,a=null,o=!1,u=0;function s(){return 2===u}var c=!1;function l(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function f(t){i=setTimeout((function(){i=null,e(d,s())}),t)}function h(){a&&clearTimeout(a)}function d(e){if(c)h();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void l.call.apply(l,[null,e].concat(n));var a;if(s()||o)return h(),void l.call.apply(l,[null,e].concat(n));r<64&&(r*=2),1===u?(u=2,a=0):a=1e3*(r+Math.random()),f(a)}}var p=!1;function v(e){p||(p=!0,h(),c||(null!==i?(e||(u=2),clearTimeout(i),f(0)):e||(u=1)))}return f(0),a=setTimeout((function(){o=!0,v(!0)}),n),v}((function(t,n){if(n)t(!1,new ln(!1,null,!0));else{var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===Zt.NO_ERROR,a=r.getStatus();if(n&&!e.isRetryStatusCode_(a)){var o=-1!==e.successCodes_.indexOf(a);t(!0,new ln(o,r))}else{var u=r.getErrorCode()===Zt.ABORT;t(!1,new ln(!1,null,u))}}))}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}},{key:"isRetryStatusCode_",value:function(e){var t=e>=500&&e<600,n=-1!==[408,429].indexOf(e),r=-1!==this.additionalRetryCodes_.indexOf(e);return t||n||r}}]),e}(),ln=ae((function e(t,n,r){re(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}));function fn(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function hn(){for(var e=fn(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var i=new e,a=0;a<n.length;a++)i.append(n[a]);return i.getBlob()}if(an())return new Blob(n);throw new zt("unsupported-environment","This browser doesn't seem to support creating Blobs")}var dn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},pn=ae((function e(t,n){re(this,e),this.data=t,this.contentType=n||null}));function vn(e,t){switch(e){case dn.RAW:return new pn(yn(t));case dn.BASE64:case dn.BASE64URL:return new pn(mn(e,t));case dn.DATA_URL:return new pn(function(e){var t=new gn(e);return t.base64?mn(dn.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(n){throw Xt(dn.DATA_URL,"Malformed data URL.")}return yn(t)}(t.rest)}(t),new gn(t).contentType)}throw Ht()}function yn(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function mn(e,t){switch(e){case dn.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw Xt(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case dn.BASE64URL:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw Xt(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=atob(t)}catch(c){throw Xt(e,"Invalid character found")}for(var u=new Uint8Array(o.length),s=0;s<o.length;s++)u[s]=o.charCodeAt(s);return u}var gn=ae((function e(t){re(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw Xt(dn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}));var kn=function(){function e(t,n){re(this,e);var r=0,i="";rn(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return ae(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(rn(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}var i=new Uint8Array(this.data_.buffer,t,n-t);return new e(i,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(an()){var i=n.map((function(t){return t instanceof e?t.data_:t}));return new e(hn.apply(null,i))}var a=n.map((function(e){return nn(e)?vn(dn.RAW,e).data:e.data_})),o=0;a.forEach((function(e){o+=e.byteLength}));var u=new Uint8Array(o),s=0;return a.forEach((function(e){for(var t=0;t<e.length;t++)u[s++]=e[t]})),new e(u,!0)}}]),e}();function wn(e){var t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function bn(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function _n(e,t){return t}var xn=ae((function e(t,n,r,i){re(this,e),this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||_n})),In=null;function En(){if(In)return In;var e=[];e.push(new xn("bucket")),e.push(new xn("generation")),e.push(new xn("metageneration")),e.push(new xn("name","fullPath",!0));var t=new xn("name");t.xform=function(e,t){return function(e){return!nn(e)||e.length<2?e:bn(e)}(t)},e.push(t);var n=new xn("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new xn("timeCreated")),e.push(new xn("updated")),e.push(new xn("md5Hash",null,!0)),e.push(new xn("cacheControl",null,!0)),e.push(new xn("contentDisposition",null,!0)),e.push(new xn("contentEncoding",null,!0)),e.push(new xn("contentLanguage",null,!0)),e.push(new xn("contentType",null,!0)),e.push(new xn("metadata","customMetadata",!0)),In=e}function Tn(e,t,n){for(var r={type:"file"},i=n.length,a=0;a<i;a++){var o=n[a];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new en(n,r);return t._makeStorageReference(i)}})}(r,e),r}function Sn(e,t,n){var r=wn(t);return null===r?null:Tn(e,r,n)}function Cn(e,t){for(var n={},r=t.length,i=0;i<r;i++){var a=t[i];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}function An(e,t,n){var r=wn(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes){var i,a=oe(n.prefixes);try{for(a.s();!(i=a.n()).done;){var o=i.value.replace(/\/$/,""),u=e._makeStorageReference(new en(t,o));r.prefixes.push(u)}}catch(h){a.e(h)}finally{a.f()}}if(n.items){var s,c=oe(n.items);try{for(c.s();!(s=c.n()).done;){var l=s.value,f=e._makeStorageReference(new en(t,l.name));r.items.push(f)}}catch(h){c.e(h)}finally{c.f()}}return r}(e,t,r)}var Nn=ae((function e(t,n,r,i){re(this,e),this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}));function Rn(e){if(!e)throw Ht()}function Pn(e,t){return function(n,r){var i=Sn(e,r,t);return Rn(null!==i),i}}function On(e,t){return function(n,r){var i=Sn(e,r,t);return Rn(null!==i),function(e,t,n,r){var i=wn(t);if(null===i)return null;if(!nn(i.downloadTokens))return null;var a=i.downloadTokens;if(0===a.length)return null;var o=encodeURIComponent;return a.split(",").map((function(t){var i=e.bucket,a=e.fullPath;return un("/b/"+o(i)+"/o/"+o(a),n,r)+sn({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function Dn(e){return function(t,n){var r,i,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new zt("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new zt("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new zt("quota-exceeded","Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new zt("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function Ln(e){var t=Dn(e);return function(n,r){var i,a=t(n,r);return 404===n.getStatus()&&(i=e.path,a=new zt("object-not-found","Object '"+i+"' does not exist.")),a.serverResponse=r.serverResponse,a}}function Mn(e,t,n){var r=un(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new Nn(r,"GET",Pn(e,n),i);return a.errorHandler=Ln(t),a}function Un(e,t,n,r,i){var a={};t.isRoot?a.prefix="":a.prefix=t.path+"/",n&&n.length>0&&(a.delimiter=n),r&&(a.pageToken=r),i&&(a.maxResults=i);var o=un(t.bucketOnlyServerUrl(),e.host,e._protocol),u=e.maxOperationRetryTime,s=new Nn(o,"GET",function(e,t){return function(n,r){var i=An(e,t,r);return Rn(null!==i),i}}(e,t.bucket),u);return s.urlParams=a,s.errorHandler=Dn(t),s}function Fn(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function jn(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};var u=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+u;var s=Fn(t,r,i),c="--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Cn(s,n)+"\r\n--"+u+"\r\nContent-Type: "+s.contentType+"\r\n\r\n",l="\r\n--"+u+"--",f=kn.getBlob(c,r,l);if(null===f)throw Gt();var h={name:s.fullPath},d=un(a,e.host,e._protocol),p=e.maxUploadRetryTime,v=new Nn(d,"POST",Pn(e,n),p);return v.urlParams=h,v.headers=o,v.body=f.uploadData(),v.errorHandler=Dn(t),v}var Vn=ae((function e(t,n,r,i){re(this,e),this.current=t,this.total=n,this.finalized=!!r,this.metadata=i||null}));function qn(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){Rn(!1)}return Rn(!!n&&-1!==(t||["active"]).indexOf(n)),n}var Bn=262144;function zn(e,t,n,r,i,a,o,u){var s=new Vn(0,0);if(o?(s.current=o.current,s.total=o.total):(s.current=0,s.total=r.size()),r.size()!==s.total)throw new zt("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=s.total-s.current,l=c;i>0&&(l=Math.min(l,i));var f=s.current,h=f+l,d={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":"".concat(s.current)},p=r.slice(f,h);if(null===p)throw Gt();var v=t.maxUploadRetryTime,y=new Nn(n,"POST",(function(e,n){var i,o=qn(e,["active","final"]),u=s.current+l,c=r.size();return i="final"===o?Pn(t,a)(e,n):null,new Vn(u,c,"final"===o,i)}),v);return y.headers=d,y.body=p.uploadData(),y.progressCallback=u||null,y.errorHandler=Dn(e),y}var Wn={STATE_CHANGED:"state_changed"},Hn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Kn(e){switch(e){case"running":case"pausing":case"canceling":return Hn.RUNNING;case"paused":return Hn.PAUSED;case"success":return Hn.SUCCESS;case"canceled":return Hn.CANCELED;default:return Hn.ERROR}}var Gn=ae((function e(t,n,r){re(this,e);var i=function(e){return"function"===typeof e}(t)||null!=n||null!=r;if(i)this.next=t,this.error=null!==n&&void 0!==n?n:void 0,this.complete=null!==r&&void 0!==r?r:void 0;else{var a=t;this.next=a.next,this.error=a.error,this.complete=a.complete}}));function Qn(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((function(){return e.apply(void 0,n)}))}}var Yn=function(){function e(){var t=this;re(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Zt.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=Zt.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=Zt.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return ae(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw $t("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw $t("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw $t("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw $t("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw $t("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}(),Jn=function(e){ce(n,e);var t=pe(n);function n(){return re(this,n),t.apply(this,arguments)}return ae(n,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),n}(Yn);function Xn(){return new Jn}var $n=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;re(this,e),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=i,this._mappings=En(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){r._request=void 0,r._chunkMultiplier=1,e._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=e,r._transition("error"))},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals("canceled")?r.completeTransitions_():(r._error=e,r._transition("error"))},this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}return ae(e,[{key:"_makeProgressCallback",value:function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}}},{key:"_shouldDoResumable",value:function(e){return e.size()>262144}},{key:"_start",value:function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}},{key:"_resolveToken",value:function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=s(n,2),i=r[0],a=r[1];switch(t._state){case"running":e(i,a);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}}))}},{key:"_createResumable",value:function(){var e=this;this._resolveToken((function(t,n){var r=function(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o=Fn(t,r,i),u={name:o.fullPath},s=un(a,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},l=Cn(o,n),f=e.maxUploadRetryTime,h=new Nn(s,"POST",(function(e){var t;qn(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){Rn(!1)}return Rn(nn(t)),t}),f);return h.urlParams=u,h.headers=c,h.body=l,h.errorHandler=Dn(t),h}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,Xn,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))}},{key:"_fetchStatus",value:function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n,r){var i=function(e,t,n,r){var i=e.maxUploadRetryTime,a=new Nn(n,"POST",(function(e){var t=qn(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(a){Rn(!1)}n||Rn(!1);var i=Number(n);return Rn(!isNaN(i)),new Vn(i,r.size(),"final"===t)}),i);return a.headers={"X-Goog-Upload-Command":"query"},a.errorHandler=Dn(t),a}(e._ref.storage,e._ref._location,t,e._blob),a=e._ref.storage._makeRequest(i,Xn,n,r);e._request=a,a.getPromise().then((function(t){t=t,e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))}},{key:"_continueUpload",value:function(){var e=this,t=Bn*this._chunkMultiplier,n=new Vn(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,a){var o;try{o=zn(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(s){return e._error=s,void e._transition("error")}var u=e._ref.storage._makeRequest(o,Xn,i,a);e._request=u,u.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))}},{key:"_increaseMultiplier",value:function(){Bn*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}},{key:"_fetchMetadata",value:function(){var e=this;this._resolveToken((function(t,n){var r=Mn(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,Xn,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))}},{key:"_oneShotUpload",value:function(){var e=this;this._resolveToken((function(t,n){var r=jn(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,Xn,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))}},{key:"_updateProgress",value:function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}},{key:"_transition",value:function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=Kt(),this._state=e,this._notifyObservers()}}},{key:"completeTransitions_",value:function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}},{key:"snapshot",get:function(){var e=Kn(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}},{key:"on",value:function(e,t,n,r){var i=this,a=new Gn(t||void 0,n||void 0,r||void 0);return this._addObserver(a),function(){i._removeObserver(a)}}},{key:"then",value:function(e,t){return this._promise.then(e,t)}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"_addObserver",value:function(e){this._observers.push(e),this._notifyObserver(e)}},{key:"_removeObserver",value:function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}},{key:"_notifyObservers",value:function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))}},{key:"_finishPromise",value:function(){if(void 0!==this._resolve){var e=!0;switch(Kn(this._state)){case Hn.SUCCESS:Qn(this._resolve.bind(null,this.snapshot))();break;case Hn.CANCELED:case Hn.ERROR:Qn(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}},{key:"_notifyObserver",value:function(e){switch(Kn(this._state)){case Hn.RUNNING:case Hn.PAUSED:e.next&&Qn(e.next.bind(e,this.snapshot))();break;case Hn.SUCCESS:e.complete&&Qn(e.complete.bind(e))();break;default:e.error&&Qn(e.error.bind(e,this._error))()}}},{key:"resume",value:function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}},{key:"pause",value:function(){var e="running"===this._state;return e&&this._transition("pausing"),e}},{key:"cancel",value:function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}]),e}(),Zn=function(){function e(t,n){re(this,e),this._service=t,this._location=n instanceof en?n:en.makeFromUrl(n,t.host)}return ae(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new en(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return bn(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new en(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw Jt(e)}}]),e}();function er(e,t,n){return tr.apply(this,arguments)}function tr(){return(tr=Z(te().mark((function e(t,n,r){var i,a,o,u;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={pageToken:r},e.next=3,nr(t,o);case 3:if(u=e.sent,(i=n.prefixes).push.apply(i,Ke(u.prefixes)),(a=n.items).push.apply(a,Ke(u.items)),null==u.nextPageToken){e.next=9;break}return e.next=9,er(t,n,u.nextPageToken);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nr(e,t){null!=t&&"number"===typeof t.maxResults&&on("options.maxResults",1,1e3,t.maxResults);var n=t||{},r=Un(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,Xn)}function rr(e,t){e._throwIfRoot("updateMetadata");var n=function(e,t,n,r){var i=un(t.fullServerUrl(),e.host,e._protocol),a=Cn(n,r),o=e.maxOperationRetryTime,u=new Nn(i,"PATCH",Pn(e,r),o);return u.headers={"Content-Type":"application/json; charset=utf-8"},u.body=a,u.errorHandler=Ln(t),u}(e.storage,e._location,t,En());return e.storage.makeRequestWithTokens(n,Xn)}function ir(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=un(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new Nn(r,"GET",On(e,n),i);return a.errorHandler=Ln(t),a}(e.storage,e._location,En());return e.storage.makeRequestWithTokens(t,Xn).then((function(e){if(null===e)throw new zt("no-download-url","The given file does not have any download URLs.");return e}))}function ar(e){e._throwIfRoot("deleteObject");var t=function(e,t){var n=un(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new Nn(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=Ln(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,Xn)}function or(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new en(e._location.bucket,n);return new Zn(e.storage,r)}function ur(e,t){if(e instanceof fr){var n=e;if(null==n._bucket)throw new zt("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new Zn(n,n._bucket);return null!=t?ur(r,t):r}return void 0!==t?or(e,t):e}function sr(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof fr)return new Zn(e,t);throw Qt("To use ref(service, url), the first argument must be a Storage instance.")}return ur(e,t)}function cr(e,t){var n=null===t||void 0===t?void 0:t.storageBucket;return null==n?null:en.makeFromBucketSpec(n,e)}function lr(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";var i=r.mockUserToken;i&&(e._overrideAuthToken="string"===typeof i?i:xe(i,e.app.options.projectId))}var fr=function(){function e(t,n,r,i,a){re(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=Bt,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?en.makeFromBucketSpec(i,this._host):cr(this._host,this.app.options)}return ae(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=en.makeFromBucketSpec(this._url,e):this._bucket=cr(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){on("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){on("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=Z(te().mark((function e(){var t,n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=Z(te().mark((function e(){var t,n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new Zn(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this;if(this._deleted)return new tn(Yt());var a=function(e,t,n,r,i,a){var o=sn(e.urlParams),u=e.url+o,s=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(s,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(s,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(s,a),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(s,r),new cn(u,e.method,s,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i)}(e,this._appId,n,r,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then((function(){return i._requests.delete(a)}),(function(){return i._requests.delete(a)})),a}},{key:"makeRequestWithTokens",value:function(){var e=Z(te().mark((function e(t,n){var r,i,a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return r=e.sent,i=s(r,2),a=i[0],o=i[1],e.abrupt("return",this._makeRequest(t,n,a,o).getPromise());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),hr="@firebase/storage",dr="0.9.0",pr="storage";function vr(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new $n(e,new kn(t),n)}(e=We(e),t,n)}function yr(e){return function(e){e._throwIfRoot("getMetadata");var t=Mn(e.storage,e._location,En());return e.storage.makeRequestWithTokens(t,Xn)}(e=We(e))}function mr(e){return function(e){var t={prefixes:[],items:[]};return er(e,t).then((function(){return t}))}(e=We(e))}function gr(e,t){return sr(e=We(e),t)}function kr(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};lr(e,t,n,r)}function wr(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new fr(r,i,a,n,Tt)}mt(new Ge(pr,wr,"PUBLIC").setMultipleInstances(!0)),Pt(hr,dr,""),Pt(hr,dr,"esm2017");var br=function(){function e(t,n,r){re(this,e),this._delegate=t,this.task=n,this.ref=r}return ae(e,[{key:"bytesTransferred",get:function(){return this._delegate.bytesTransferred}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"state",get:function(){return this._delegate.state}},{key:"totalBytes",get:function(){return this._delegate.totalBytes}}]),e}(),_r=function(){function e(t,n){re(this,e),this._delegate=t,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return ae(e,[{key:"snapshot",get:function(){return new br(this._delegate.snapshot,this,this._ref)}},{key:"then",value:function(e,t){var n=this;return this._delegate.then((function(t){if(e)return e(new br(t,n,n._ref))}),t)}},{key:"on",value:function(e,t,n,r){var i=this,a=void 0;return t&&(a="function"===typeof t?function(e){return t(new br(e,i,i._ref))}:{next:t.next?function(e){return t.next(new br(e,i,i._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,n||void 0,r||void 0)}}]),e}(),xr=function(){function e(t,n){re(this,e),this._delegate=t,this._service=n}return ae(e,[{key:"prefixes",get:function(){var e=this;return this._delegate.prefixes.map((function(t){return new Ir(t,e._service)}))}},{key:"items",get:function(){var e=this;return this._delegate.items.map((function(t){return new Ir(t,e._service)}))}},{key:"nextPageToken",get:function(){return this._delegate.nextPageToken||null}}]),e}(),Ir=function(){function e(t,n){re(this,e),this._delegate=t,this.storage=n}return ae(e,[{key:"name",get:function(){return this._delegate.name}},{key:"bucket",get:function(){return this._delegate.bucket}},{key:"fullPath",get:function(){return this._delegate.fullPath}},{key:"toString",value:function(){return this._delegate.toString()}},{key:"child",value:function(t){var n=function(e,t){return or(e,t)}(this._delegate,t);return new e(n,this.storage)}},{key:"root",get:function(){return new e(this._delegate.root,this.storage)}},{key:"parent",get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)}},{key:"put",value:function(e,t){return this._throwIfRoot("put"),new _r(vr(this._delegate,e,t),this)}},{key:"putString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:dn.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");var r=vn(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new _r(new $n(this._delegate,new kn(r.data,!0),i),this)}},{key:"listAll",value:function(){var e=this;return mr(this._delegate).then((function(t){return new xr(t,e.storage)}))}},{key:"list",value:function(e){var t=this;return function(e,t){return nr(e=We(e),t)}(this._delegate,e||void 0).then((function(e){return new xr(e,t.storage)}))}},{key:"getMetadata",value:function(){return yr(this._delegate)}},{key:"updateMetadata",value:function(e){return function(e,t){return rr(e=We(e),t)}(this._delegate,e)}},{key:"getDownloadURL",value:function(){return ir(We(this._delegate))}},{key:"delete",value:function(){return this._throwIfRoot("delete"),ar(We(this._delegate))}},{key:"_throwIfRoot",value:function(e){if(""===this._delegate._location.path)throw Jt(e)}}]),e}(),Er=function(){function e(t,n){re(this,e),this.app=t,this._delegate=n}return ae(e,[{key:"maxOperationRetryTime",get:function(){return this._delegate.maxOperationRetryTime}},{key:"maxUploadRetryTime",get:function(){return this._delegate.maxUploadRetryTime}},{key:"ref",value:function(e){if(Tr(e))throw Qt("ref() expected a child path but got a URL, use refFromURL instead.");return new Ir(gr(this._delegate,e),this)}},{key:"refFromURL",value:function(e){if(!Tr(e))throw Qt("refFromURL() expected a full URL but got a child path, use ref() instead.");try{en.makeFromUrl(e,this._delegate.host)}catch(t){throw Qt("refFromUrl() expected a valid full URL but got an invalid one.")}return new Ir(gr(this._delegate,e),this)}},{key:"setMaxUploadRetryTime",value:function(e){this._delegate.maxUploadRetryTime=e}},{key:"setMaxOperationRetryTime",value:function(e){this._delegate.maxOperationRetryTime=e}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};kr(this._delegate,e,t,n)}}]),e}();function Tr(e){return/^[A-Za-z]+:\/\//.test(e)}function Sr(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new Er(r,i)}function Cr(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=le(e)););return e}function Ar(){return Ar="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=Cr(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Ar.apply(this,arguments)}!function(e){var t={TaskState:Hn,TaskEvent:Wn,StringFormat:dn,Storage:Er,Reference:Ir};e.INTERNAL.registerComponent(new Ge("storage-compat",Sr,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.1.8")}(qt);function Nr(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var Rr;Object.create;var Pr="facebook.com",Or="github.com",Dr="google.com",Lr="password",Mr="twitter.com",Ur="EMAIL_SIGNIN",Fr="PASSWORD_RESET",jr="RECOVER_EMAIL",Vr="REVERT_SECOND_FACTOR_ADDITION",qr="VERIFY_AND_CHANGE_EMAIL",Br="VERIFY_EMAIL";function zr(){return ne({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var Wr=function(){var e;return ne(e={},"admin-restricted-operation","This operation is restricted to administrators only."),ne(e,"argument-error",""),ne(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),ne(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),ne(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),ne(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),ne(e,"cordova-not-ready","Cordova framework is not ready."),ne(e,"cors-unsupported","This browser is not supported."),ne(e,"credential-already-in-use","This credential is already associated with a different user account."),ne(e,"custom-token-mismatch","The custom token corresponds to a different audience."),ne(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),ne(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),ne(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),ne(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),ne(e,"email-already-in-use","The email address is already in use by another account."),ne(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),ne(e,"expired-action-code","The action code has expired."),ne(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),ne(e,"internal-error","An internal AuthError has occurred."),ne(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),ne(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),ne(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),ne(e,"invalid-auth-event","An internal AuthError has occurred."),ne(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),ne(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),ne(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),ne(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),ne(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),ne(e,"invalid-email","The email address is badly formatted."),ne(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),ne(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),ne(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),ne(e,"invalid-credential","The supplied auth credential is malformed or has expired."),ne(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),ne(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),ne(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),ne(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),ne(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),ne(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),ne(e,"wrong-password","The password is invalid or the user does not have a password."),ne(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),ne(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),ne(e,"invalid-provider-id","The specified provider ID is invalid."),ne(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),ne(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),ne(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),ne(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),ne(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),ne(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),ne(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),ne(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),ne(e,"missing-continue-uri","A continue URL must be provided in the request."),ne(e,"missing-iframe-start","An internal AuthError has occurred."),ne(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),ne(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),ne(e,"missing-multi-factor-info","No second factor identifier is provided."),ne(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),ne(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),ne(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),ne(e,"app-deleted","This instance of FirebaseApp has been deleted."),ne(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),ne(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),ne(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),ne(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),ne(e,"no-auth-event","An internal AuthError has occurred."),ne(e,"no-such-provider","User was not linked to an account with the given provider."),ne(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),ne(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),ne(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),ne(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),ne(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),ne(e,"provider-already-linked","User can only be linked to one identity for the given provider."),ne(e,"quota-exceeded","The project's quota for this operation has been exceeded."),ne(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),ne(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),ne(e,"rejected-credential","The request contains malformed or mismatching credentials."),ne(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),ne(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),ne(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),ne(e,"timeout","The operation has timed out."),ne(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),ne(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),ne(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),ne(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),ne(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),ne(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),ne(e,"unverified-email","The operation requires a verified email."),ne(e,"user-cancelled","The user did not grant your application the permissions it requested."),ne(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),ne(e,"user-disabled","The user account has been disabled by an administrator."),ne(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),ne(e,"user-signed-out",""),ne(e,"weak-password","The password must be 6 characters long or more."),ne(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),ne(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},Hr=zr,Kr=new Pe("auth","Firebase",zr()),Gr=new ot("@firebase/auth");function Qr(e){if(Gr.logLevel<=Xe.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Gr.error.apply(Gr,["Auth (".concat(Tt,"): ").concat(e)].concat(n))}}function Yr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Zr.apply(void 0,[e].concat(n))}function Jr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Zr.apply(void 0,[e].concat(n))}function Xr(e,t,n){var r=Object.assign(Object.assign({},Hr()),ne({},t,n));return new Pe("auth","Firebase",r).create(t,{appName:e.name})}function $r(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Yr(e,"argument-error"),Xr(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Zr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=Ke(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(Ke(o)))}return Kr.create.apply(Kr,[e].concat(n))}function ei(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Zr.apply(void 0,[t].concat(r))}}function ti(e){var t="INTERNAL ASSERTION FAILED: "+e;throw Qr(t),new Error(t)}function ni(e,t){e||ti(t)}var ri=new Map;function ii(e){ni(e instanceof Function,"Expected a class definition");var t=ri.get(e);return t?(ni(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,ri.set(e,t),t)}function ai(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function oi(){return"http:"===ui()||"https:"===ui()}function ui(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var si=function(){function e(t,n){re(this,e),this.shortDelay=t,this.longDelay=n,ni(n>t,"Short delay should be less than long delay!"),this.isMobile=Ee()||Ce()}return ae(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(oi()||Se()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function ci(e,t){ni(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var li=function(){function e(){re(this,e)}return ae(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void ti("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void ti("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void ti("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),fi=(ne(Rr={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),ne(Rr,"MISSING_CUSTOM_TOKEN","internal-error"),ne(Rr,"INVALID_IDENTIFIER","invalid-email"),ne(Rr,"MISSING_CONTINUE_URI","internal-error"),ne(Rr,"INVALID_PASSWORD","wrong-password"),ne(Rr,"MISSING_PASSWORD","internal-error"),ne(Rr,"EMAIL_EXISTS","email-already-in-use"),ne(Rr,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),ne(Rr,"INVALID_IDP_RESPONSE","invalid-credential"),ne(Rr,"INVALID_PENDING_TOKEN","invalid-credential"),ne(Rr,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),ne(Rr,"MISSING_REQ_TYPE","internal-error"),ne(Rr,"EMAIL_NOT_FOUND","user-not-found"),ne(Rr,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),ne(Rr,"EXPIRED_OOB_CODE","expired-action-code"),ne(Rr,"INVALID_OOB_CODE","invalid-action-code"),ne(Rr,"MISSING_OOB_CODE","internal-error"),ne(Rr,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),ne(Rr,"INVALID_ID_TOKEN","invalid-user-token"),ne(Rr,"TOKEN_EXPIRED","user-token-expired"),ne(Rr,"USER_NOT_FOUND","user-token-expired"),ne(Rr,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),ne(Rr,"INVALID_CODE","invalid-verification-code"),ne(Rr,"INVALID_SESSION_INFO","invalid-verification-id"),ne(Rr,"INVALID_TEMPORARY_PROOF","invalid-credential"),ne(Rr,"MISSING_SESSION_INFO","missing-verification-id"),ne(Rr,"SESSION_EXPIRED","code-expired"),ne(Rr,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),ne(Rr,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),ne(Rr,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),ne(Rr,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),ne(Rr,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),ne(Rr,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),ne(Rr,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),ne(Rr,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),ne(Rr,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),ne(Rr,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),ne(Rr,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),Rr),hi=new si(3e4,6e4);function di(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function pi(e,t,n,r){return vi.apply(this,arguments)}function vi(){return vi=Z(te().mark((function e(t,n,r,i){var a,o=arguments;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",yi(t,a,Z(te().mark((function e(){var a,o,u,s;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=Fe(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",li.fetch()(wi(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),vi.apply(this,arguments)}function yi(e,t,n){return mi.apply(this,arguments)}function mi(){return(mi=Z(te().mark((function e(t,n,r){var i,a,o,u,c,l,f,h,d,p;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},fi),n),e.prev=2,a=new bi(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw _i(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(c=o.ok?u.errorMessage:u.error.message,l=c.split(" : "),f=s(l,2),h=f[0],d=f[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){e.next=23;break}throw _i(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==h){e.next=25;break}throw _i(t,"email-already-in-use",u);case 25:if(p=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=30;break}throw Xr(t,p,d);case 30:Yr(t,p);case 31:e.next=38;break;case 33:if(e.prev=33,e.t0=e.catch(2),!(e.t0 instanceof Re)){e.next=37;break}throw e.t0;case 37:Yr(t,"network-request-failed");case 38:case"end":return e.stop()}}),e,null,[[2,33]])})))).apply(this,arguments)}function gi(e,t,n,r){return ki.apply(this,arguments)}function ki(){return ki=Z(te().mark((function e(t,n,r,i){var a,o,u=arguments;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,pi(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&Yr(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),ki.apply(this,arguments)}function wi(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?ci(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var bi=function(){function e(t){var n=this;re(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(Jr(n.auth,"timeout"))}),hi.get())}))}return ae(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function _i(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=Jr(e,t,r);return i.customData._tokenResponse=n,i}function xi(e,t){return Ii.apply(this,arguments)}function Ii(){return(Ii=Z(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pi(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ei(e,t){return Ti.apply(this,arguments)}function Ti(){return(Ti=Z(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pi(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Si(e,t){return Ci.apply(this,arguments)}function Ci(){return(Ci=Z(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pi(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ai(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function Ni(){return Ni=Z(te().mark((function e(t){var n,r,i,a,o,u,s=arguments;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=We(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,ei((a=Pi(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:Ai(Ri(a.auth_time)),issuedAtTime:Ai(Ri(a.iat)),expirationTime:Ai(Ri(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Ni.apply(this,arguments)}function Ri(e){return 1e3*Number(e)}function Pi(e){var t=s(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return Qr("JWT malformed, contained fewer than 3 sections"),null;try{var a=we(r);return a?JSON.parse(a):(Qr("Failed to decode base64 JWT payload"),null)}catch(o){return Qr("Caught error parsing JWT payload as JSON",o),null}}function Oi(e,t){return Di.apply(this,arguments)}function Di(){return Di=Z(te().mark((function e(t,n){var r=arguments;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof Re&&Li(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),Di.apply(this,arguments)}function Li(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var Mi=function(){function e(t){re(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return ae(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(Z(te().mark((function t(){return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=Z(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Ui=function(){function e(t,n){re(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return ae(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=Ai(this.lastLoginAt),this.creationTime=Ai(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function Fi(e){return ji.apply(this,arguments)}function ji(){return ji=Z(te().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,h;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,Oi(t,Si(r,{idToken:i}));case 6:ei(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?Bi(o.providerUserInfo):[],s=qi(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new Ui(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),ji.apply(this,arguments)}function Vi(){return(Vi=Z(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=We(t),e.next=3,Fi(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qi(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(Ke(n),Ke(t))}function Bi(e){return e.map((function(e){var t=e.providerId,n=Nr(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function zi(e,t){return Wi.apply(this,arguments)}function Wi(){return(Wi=Z(te().mark((function e(t,n){var r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yi(t,{},Z(te().mark((function e(){var r,i,a,o,u,s;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Fe({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=wi(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",li.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Hi=function(){function e(){re(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return ae(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){ei(e.idToken,"internal-error"),ei("undefined"!==typeof e.idToken,"internal-error"),ei("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=Pi(e);return ei(t,"internal-error"),ei("undefined"!==typeof t.exp,"internal-error"),ei("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=Z(te().mark((function e(t){var n,r=arguments;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],ei(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=Z(te().mark((function e(t,n){var r,i,a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zi(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return ti("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(ei("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(ei("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(ei("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function Ki(e,t){ei("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var Gi=function(){function e(t){re(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=Nr(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new Mi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.metadata=new Ui(a.createdAt||void 0,a.lastLoginAt||void 0)}return ae(e,[{key:"getIdToken",value:function(){var e=Z(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oi(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(ei(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return Ni.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return Vi.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(ei(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){ei(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=Z(te().mark((function e(t){var n,r,i=arguments;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,Fi(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Z(te().mark((function e(){var t;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,Oi(this,xi(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,y=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,w=n.emailVerified,b=n.isAnonymous,_=n.providerData,x=n.stsTokenManager;ei(k&&x,t,"internal-error");var I=Hi.fromJSON(this.name,x);ei("string"===typeof k,t,"internal-error"),Ki(f,t.name),Ki(h,t.name),ei("boolean"===typeof w,t,"internal-error"),ei("boolean"===typeof b,t,"internal-error"),Ki(d,t.name),Ki(p,t.name),Ki(v,t.name),Ki(y,t.name),Ki(m,t.name),Ki(g,t.name);var E=new e({uid:k,auth:t,email:h,emailVerified:w,displayName:f,isAnonymous:b,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:I,createdAt:m,lastLoginAt:g});return _&&Array.isArray(_)&&(E.providerData=_.map((function(e){return Object.assign({},e)}))),y&&(E._redirectEventId=y),E}},{key:"_fromIdTokenResponse",value:function(){var t=Z(te().mark((function t(n,r){var i,a,o,u=arguments;return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new Hi).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,Fi(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),Qi=function(){function e(){re(this,e),this.type="NONE",this.storage={}}return ae(e,[{key:"_isAvailable",value:function(){var e=Z(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Z(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Z(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Z(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Qi.type="NONE";var Yi=Qi;function Ji(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var Xi=function(){function e(t,n,r){re(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=Ji(this.userKey,a.apiKey,o),this.fullPersistenceKey=Ji("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return ae(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=Z(te().mark((function e(){var t;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?Gi._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=Z(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=Z(te().mark((function t(n,r){var i,a,o,u,s,c,l,f,h,d,p,v=arguments;return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(ii(Yi),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=Z(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||ii(Yi),u=Ji(i,n.config.apiKey,n.name),s=null,c=oe(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(u);case 17:if(!(h=t.sent)){t.next=23;break}return d=Gi._fromJSON(n,h),f!==o&&(s=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=Z(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function $i(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(na(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Zi(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(ia(t))return"Blackberry";if(aa(t))return"Webos";if(ea(t))return"Safari";if((t.includes("chrome/")||ta(t))&&!t.includes("edge/"))return"Chrome";if(ra(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function Zi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie();return/firefox\//i.test(e)}function ea(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function ta(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie();return/crios\//i.test(e)}function na(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie();return/iemobile/i.test(e)}function ra(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie();return/android/i.test(e)}function ia(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie();return/blackberry/i.test(e)}function aa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie();return/webos/i.test(e)}function oa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie();return/iphone|ipad|ipod/i.test(e)}function ua(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie();return oa(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function sa(){return Ae()&&10===document.documentMode}function ca(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie();return oa(e)||ra(e)||aa(e)||ia(e)||/windows phone/i.test(e)||na(e)}function la(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=$i(Ie());break;case"Worker":t="".concat($i(Ie()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Tt,"/").concat(r)}var fa=function(){function e(t,n){re(this,e),this.app=t,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new da(this),this.idTokenSubscription=new da(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Kr,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=n.sdkClientVersion}return ae(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=ii(t)),this._initializationPromise=this.queue(Z(te().mark((function r(){var i,a;return te().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,Xi.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=Z(te().mark((function e(){var t;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=Z(te().mark((function e(t){var n,r,i,a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,!t||!this.config.authDomain){e.next=12;break}return e.next=6,this.getOrInitRedirectPersistenceManager();case 6:return i=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,a=null===r||void 0===r?void 0:r._redirectEventId,e.next=10,this.tryRedirectSignIn(t);case 10:o=e.sent,i&&i!==a||!(null===o||void 0===o?void 0:o.user)||(r=o.user);case 12:if(r){e.next=14;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 14:if(r._redirectEventId){e.next=16;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 16:return ei(this._popupRedirectResolver,this,"argument-error"),e.next=19,this.getOrInitRedirectPersistenceManager();case 19:if(!this.redirectUser||this.redirectUser._redirectEventId!==r._redirectEventId){e.next=21;break}return e.abrupt("return",this.directlySetCurrentUser(r));case 21:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=Z(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=Z(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Fi(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=Z(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=Z(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?We(t):null)&&ei(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=Z(te().mark((function e(t){var n=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return t&&ei(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e.abrupt("return",this.queue(Z(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.directlySetCurrentUser(t);case 2:n.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=Z(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=3;break}return e.next=3,this._setRedirectUser(null);case 3:return e.abrupt("return",this._updateCurrentUser(null));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(Z(te().mark((function n(){return te().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(ii(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new Pe("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=Z(te().mark((function e(t,n){var r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=Z(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return ei(n=t&&ii(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,Xi.create(this,[ii(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=Z(te().mark((function e(t){var n,r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(Z(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=Z(te().mark((function e(t){var n=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(Z(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return ei(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=Z(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return ei(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=la(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=Z(te().mark((function e(){var t;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=ne({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId),e.abrupt("return",t);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function ha(e){return We(e)}var da=function(){function e(t){var n=this;re(this,e),this.auth=t,this.observer=null,this.addObserver=qe((function(e){return n.observer=e}))}return ae(e,[{key:"next",get:function(){return ei(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function pa(e,t,n){var r=ha(e);ei(r._canInitEmulator,r,"emulator-config-failed"),ei(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=va(t),o=function(e){var t=va(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:ya(r.substr(a.length+1))}}var o=s(r.split(":"),2);return{host:o[0],port:ya(o[1])}}(t),u=o.host,c=o.port,l=null===c?"":":".concat(c);r.config.emulator={url:"".concat(a,"//").concat(u).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function va(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function ya(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var ma=function(){function e(t,n){re(this,e),this.providerId=t,this.signInMethod=n}return ae(e,[{key:"toJSON",value:function(){return ti("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return ti("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return ti("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return ti("not implemented")}}]),e}();function ga(e,t){return ka.apply(this,arguments)}function ka(){return(ka=Z(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pi(t,"POST","/v1/accounts:resetPassword",di(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wa(e,t){return ba.apply(this,arguments)}function ba(){return(ba=Z(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pi(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _a(e,t){return xa.apply(this,arguments)}function xa(){return(xa=Z(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pi(t,"POST","/v1/accounts:update",di(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ia(e,t){return Ea.apply(this,arguments)}function Ea(){return(Ea=Z(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gi(t,"POST","/v1/accounts:signInWithPassword",di(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ta(e,t){return Sa.apply(this,arguments)}function Sa(){return(Sa=Z(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pi(t,"POST","/v1/accounts:sendOobCode",di(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ca(e,t){return Aa.apply(this,arguments)}function Aa(){return(Aa=Z(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ta(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Na(e,t){return Ra.apply(this,arguments)}function Ra(){return(Ra=Z(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ta(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pa(e,t){return Oa.apply(this,arguments)}function Oa(){return(Oa=Z(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ta(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Da(e,t){return La.apply(this,arguments)}function La(){return(La=Z(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ta(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ma(e,t){return Ua.apply(this,arguments)}function Ua(){return(Ua=Z(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gi(t,"POST","/v1/accounts:signInWithEmailLink",di(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fa(e,t){return ja.apply(this,arguments)}function ja(){return(ja=Z(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gi(t,"POST","/v1/accounts:signInWithEmailLink",di(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Va=function(e){ce(n,e);var t=pe(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return re(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return ae(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=Z(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Ia(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Ma(t,{email:this._email,oobCode:this._password}));case 5:Yr(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=Z(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",wa(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Fa(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:Yr(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(ma);function qa(e,t){return Ba.apply(this,arguments)}function Ba(){return(Ba=Z(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gi(t,"POST","/v1/accounts:signInWithIdp",di(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var za=function(e){ce(n,e);var t=pe(n);function n(){var e;return re(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return ae(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return qa(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,qa(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,qa(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Fe(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Yr("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=Nr(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(ma);function Wa(e,t){return Ha.apply(this,arguments)}function Ha(){return(Ha=Z(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pi(t,"POST","/v1/accounts:sendVerificationCode",di(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ka(){return(Ka=Z(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gi(t,"POST","/v1/accounts:signInWithPhoneNumber",di(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ga(){return(Ga=Z(te().mark((function e(t,n){var r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gi(t,"POST","/v1/accounts:signInWithPhoneNumber",di(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw _i(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Qa=ne({},"USER_NOT_FOUND","user-not-found");function Ya(){return(Ya=Z(te().mark((function e(t,n){var r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",gi(t,"POST","/v1/accounts:signInWithPhoneNumber",di(t,r),Qa));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ja=function(e){ce(n,e);var t=pe(n);function n(e){var r;return re(this,n),(r=t.call(this,"phone","phone")).params=e,r}return ae(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Ka.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Ga.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return Ya.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(ma);var Xa=function(){function e(t){var n,r,i,a,o,u;re(this,e);var s=je(Ve(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);ei(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return ae(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=je(Ve(e)).link,n=t?je(Ve(t)).deep_link_id:null,r=je(Ve(e)).deep_link_id;return(r?je(Ve(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(rx){return null}}}]),e}();var $a=function(){function e(){re(this,e),this.providerId=e.PROVIDER_ID}return ae(e,null,[{key:"credential",value:function(e,t){return Va._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=Xa.parseLink(t);return ei(n,"argument-error"),Va._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();$a.PROVIDER_ID="password",$a.EMAIL_PASSWORD_SIGN_IN_METHOD="password",$a.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var Za=function(){function e(t){re(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return ae(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),eo=function(e){ce(n,e);var t=pe(n);function n(){var e;return re(this,n),(e=t.apply(this,arguments)).scopes=[],e}return ae(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return Ke(this.scopes)}}]),n}(Za),to=function(e){ce(n,e);var t=pe(n);function n(){return re(this,n),t.apply(this,arguments)}return ae(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return ei(e.idToken||e.accessToken,"argument-error"),za._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return ei("providerId"in t&&"signInMethod"in t,"argument-error"),za._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(eo),no=function(e){ce(n,e);var t=pe(n);function n(){return re(this,n),t.call(this,"facebook.com")}return ae(n,null,[{key:"credential",value:function(e){return za._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(rx){return null}}}]),n}(eo);no.FACEBOOK_SIGN_IN_METHOD="facebook.com",no.PROVIDER_ID="facebook.com";var ro=function(e){ce(n,e);var t=pe(n);function n(){var e;return re(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return ae(n,null,[{key:"credential",value:function(e,t){return za._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(rx){return null}}}]),n}(eo);ro.GOOGLE_SIGN_IN_METHOD="google.com",ro.PROVIDER_ID="google.com";var io=function(e){ce(n,e);var t=pe(n);function n(){return re(this,n),t.call(this,"github.com")}return ae(n,null,[{key:"credential",value:function(e){return za._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(rx){return null}}}]),n}(eo);io.GITHUB_SIGN_IN_METHOD="github.com",io.PROVIDER_ID="github.com";var ao=function(e){ce(n,e);var t=pe(n);function n(e,r){var i;return re(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return ae(n,[{key:"_getIdTokenResponse",value:function(e){return qa(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,qa(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,qa(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(ma),oo=function(e){ce(n,e);var t=pe(n);function n(e){return re(this,n),ei(e.startsWith("saml."),"argument-error"),t.call(this,e)}return ae(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=ao.fromJSON(e);return ei(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return ao._create(r,n)}catch(i){return null}}}]),n}(Za),uo=function(e){ce(n,e);var t=pe(n);function n(){return re(this,n),t.call(this,"twitter.com")}return ae(n,null,[{key:"credential",value:function(e,t){return za._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(rx){return null}}}]),n}(eo);function so(e,t){return co.apply(this,arguments)}function co(){return(co=Z(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gi(t,"POST","/v1/accounts:signUp",di(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}uo.TWITTER_SIGN_IN_METHOD="twitter.com",uo.PROVIDER_ID="twitter.com";var lo=function(){function e(t){re(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return ae(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=Z(te().mark((function t(n,r,i){var a,o,u,s,c=arguments;return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,Gi._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=fo(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=Z(te().mark((function t(n,r,i){var a;return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=fo(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function fo(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function ho(){return ho=Z(te().mark((function e(t){var n,r,i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ha(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new lo({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,so(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,lo._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),ho.apply(this,arguments)}var po=function(e){ce(n,e);var t=pe(n);function n(e,r,i,a){var o,u;return re(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(ue(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return ae(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(Re);function vo(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw po._fromErrorAndOperation(e,n,t,r);throw n}))}function yo(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function mo(e,t){return go.apply(this,arguments)}function go(){return go=Z(te().mark((function e(t,n){var r,i,a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=We(t),e.next=3,bo(!0,r,n);case 3:return e.t0=Ei,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=yo(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),go.apply(this,arguments)}function ko(e,t){return wo.apply(this,arguments)}function wo(){return wo=Z(te().mark((function e(t,n){var r,i,a=arguments;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=Oi,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",lo._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),wo.apply(this,arguments)}function bo(e,t,n){return _o.apply(this,arguments)}function _o(){return(_o=Z(te().mark((function e(t,n,r){var i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fi(n);case 2:i=yo(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",ei(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xo(e,t){return Io.apply(this,arguments)}function Io(){return Io=Z(te().mark((function e(t,n){var r,i,a,o,u,s,c=arguments;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,Oi(t,vo(i,a,n,t),r);case 6:return ei((o=e.sent).idToken,i,"internal-error"),ei(u=Pi(o.idToken),i,"internal-error"),s=u.sub,ei(t.uid===s,i,"user-mismatch"),e.abrupt("return",lo._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&Yr(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),Io.apply(this,arguments)}function Eo(e,t){return To.apply(this,arguments)}function To(){return To=Z(te().mark((function e(t,n){var r,i,a,o,u=arguments;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,vo(t,i,n);case 4:return a=e.sent,e.next=7,lo._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),To.apply(this,arguments)}function So(e,t){return Co.apply(this,arguments)}function Co(){return(Co=Z(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Eo(ha(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ao(e,t){return No.apply(this,arguments)}function No(){return(No=Z(te().mark((function e(t,n){var r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=We(t),e.next=3,bo(!1,r,n.providerId);case 3:return e.abrupt("return",ko(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ro(e,t){return Po.apply(this,arguments)}function Po(){return(Po=Z(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",xo(We(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oo(e,t){return Do.apply(this,arguments)}function Do(){return(Do=Z(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gi(t,"POST","/v1/accounts:signInWithCustomToken",di(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Lo(){return(Lo=Z(te().mark((function e(t,n){var r,i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ha(t),e.next=3,Oo(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,lo._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Mo=function(){function e(t,n){re(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return ae(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?Uo._fromServerResponse(e,t):Yr(e,"internal-error")}}]),e}(),Uo=function(e){ce(n,e);var t=pe(n);function n(e){var r;return re(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return ae(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(Mo);function Fo(e,t,n){var r;ei((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),ei("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(ei(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(ei(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function jo(){return(jo=Z(te().mark((function e(t,n,r){var i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=We(t),a={requestType:"PASSWORD_RESET",email:n},r&&Fo(i,a,r),e.next=5,Na(i,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vo(){return(Vo=Z(te().mark((function e(t,n,r){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ga(We(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qo(){return(qo=Z(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_a(We(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bo(e,t){return zo.apply(this,arguments)}function zo(){return(zo=Z(te().mark((function e(t,n){var r,i,a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=We(t),e.next=3,ga(r,{oobCode:n});case 3:i=e.sent,ei(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return ei(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:ei(i.mfaInfo,r,"internal-error");case 13:ei(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=Mo._fromServerResponse(ha(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wo(){return(Wo=Z(te().mark((function e(t,n){var r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Bo(We(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ho(e,t,n){return Ko.apply(this,arguments)}function Ko(){return(Ko=Z(te().mark((function e(t,n,r){var i,a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ha(t),e.next=3,so(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,lo._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Go(){return(Go=Z(te().mark((function e(t,n,r){var i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=We(t),a={requestType:"EMAIL_SIGNIN",email:n},ei(r.handleCodeInApp,i,"argument-error"),r&&Fo(i,a,r),e.next=6,Pa(i,a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qo(){return(Qo=Z(te().mark((function e(t,n,r){var i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=We(t),ei((a=$a.credentialWithLink(n,r||ai()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",So(i,a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yo(e,t){return Jo.apply(this,arguments)}function Jo(){return(Jo=Z(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pi(t,"POST","/v1/accounts:createAuthUri",di(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xo(){return(Xo=Z(te().mark((function e(t,n){var r,i,a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=oi()?ai():"http://localhost",i={identifier:n,continueUri:r},e.next=4,Yo(We(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $o(){return($o=Z(te().mark((function e(t,n){var r,i,a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=We(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&Fo(r.auth,a,n),e.next=8,Ca(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zo(){return(Zo=Z(te().mark((function e(t,n,r){var i,a,o,u;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=We(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&Fo(i.auth,o,r),e.next=8,Da(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function eu(e,t){return tu.apply(this,arguments)}function tu(){return(tu=Z(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pi(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nu(){return(nu=Z(te().mark((function e(t,n){var r,i,a,o,u,s,c;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=We(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,Oi(a,eu(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ru(e,t,n){return iu.apply(this,arguments)}function iu(){return(iu=Z(te().mark((function e(t,n,r){var i,a,o,u;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,Oi(t,wa(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var au=ae((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};re(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),ou=function(e){ce(n,e);var t=pe(n);function n(e,r,i,a){var o;return re(this,n),(o=t.call(this,e,r,i)).username=a,o}return ae(n)}(au),uu=function(e){ce(n,e);var t=pe(n);function n(e,r){return re(this,n),t.call(this,e,"facebook.com",r)}return ae(n)}(au),su=function(e){ce(n,e);var t=pe(n);function n(e,r){return re(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return ae(n)}(ou),cu=function(e){ce(n,e);var t=pe(n);function n(e,r){return re(this,n),t.call(this,e,"google.com",r)}return ae(n)}(au),lu=function(e){ce(n,e);var t=pe(n);function n(e,r,i){return re(this,n),t.call(this,e,"twitter.com",r,i)}return ae(n)}(ou);function fu(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=Pi(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new au(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new uu(a,i);case"github.com":return new su(a,i);case"google.com":return new cu(a,i);case"twitter.com":return new lu(a,i,e.screenName||null);case"custom":case"anonymous":return new au(a,null);default:return new au(a,r,i)}}(n)}var hu=function(){function e(t,n){re(this,e),this.type=t,this.credential=n}return ae(e,[{key:"toJSON",value:function(){return{multiFactorSession:ne({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),du=function(){function e(t,n,r){re(this,e),this.session=t,this.hints=n,this.signInResolver=r}return ae(e,[{key:"resolveSignIn",value:function(){var e=Z(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=ha(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return Mo._fromServerResponse(r,e)}));ei(i.mfaPendingCredential,r,"internal-error");var o=hu._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=Z(te().mark((function e(t){var a,u,s;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,lo._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return ei(n.user,r,"internal-error"),e.abrupt("return",lo._forOperation(n.user,n.operationType,u));case 17:Yr(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function pu(e,t){return pi(e,"POST","/v2/accounts/mfaEnrollment:start",di(e,t))}var vu=function(){function e(t){var n=this;re(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return Mo._fromServerResponse(t.auth,e)})))}))}return ae(e,[{key:"getSession",value:function(){var e=Z(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=hu,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=Z(te().mark((function e(t,n){var r,i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,Oi(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=Z(te().mark((function e(t){var n,r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.next=6,Oi(this.user,pi(a=this.user.auth,"POST","/v2/accounts/mfaEnrollment:withdraw",di(a,{idToken:r,mfaEnrollmentId:n})));case 6:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=10,this.user._updateTokensIfNecessary(i);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),e.t0.code==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}var a}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),yu=new WeakMap;var mu="__sak",gu=function(){function e(t,n){re(this,e),this.storageRetriever=t,this.type=n}return ae(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(mu,"1"),this.storage.removeItem(mu),Promise.resolve(!0)):Promise.resolve(!1)}catch(rx){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var ku=function(e){ce(n,e);var t=pe(n);function n(){var e;return re(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=Ie();return ea(e)||oa(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=ca(),e._shouldAllowMigration=!0,e}return ae(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);sa()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=Z(te().mark((function e(t,r){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ar(le(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Z(te().mark((function e(t){var r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ar(le(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Z(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ar(le(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(gu);ku.type="LOCAL";var wu=ku,bu=function(e){ce(n,e);var t=pe(n);function n(){return re(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return ae(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(gu);bu.type="SESSION";var _u=bu;function xu(e){return Promise.all(e.map(function(){var e=Z(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var Iu=function(){function e(t){re(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return ae(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=Z(te().mark((function e(t){var n,r,i,a,o,u,s,c;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=Z(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,xu(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function Eu(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Iu.receivers=[];var Tu=function(){function e(t){re(this,e),this.target=t,this.handlers=new Set}return ae(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=Z(te().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=Eu("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function Su(){return window}function Cu(){return"undefined"!==typeof Su().WorkerGlobalScope&&"function"===typeof Su().importScripts}function Au(){return Nu.apply(this,arguments)}function Nu(){return(Nu=Z(te().mark((function e(){var t;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function Ru(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var Pu="firebaseLocalStorageDb",Ou="firebaseLocalStorage",Du="fbase_key",Lu=function(){function e(t){re(this,e),this.request=t}return ae(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function Mu(e,t){return e.transaction([Ou],t?"readwrite":"readonly").objectStore(Ou)}function Uu(){var e=indexedDB.deleteDatabase(Pu);return new Lu(e).toPromise()}function Fu(){var e=indexedDB.open(Pu,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(Ou,{keyPath:Du})}catch(r){n(r)}})),e.addEventListener("success",Z(te().mark((function n(){var r;return te().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(Ou)){n.next=12;break}return r.close(),n.next=5,Uu();case 5:return n.t0=t,n.next=8,Fu();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function ju(e,t,n){return Vu.apply(this,arguments)}function Vu(){return Vu=Z(te().mark((function e(t,n,r){var i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Mu(t,!0).put((ne(i={},Du,n),ne(i,"value",r),i)),e.abrupt("return",new Lu(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),Vu.apply(this,arguments)}function qu(e,t){return Bu.apply(this,arguments)}function Bu(){return Bu=Z(te().mark((function e(t,n){var r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Mu(t,!1).get(n),e.next=3,new Lu(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),Bu.apply(this,arguments)}function zu(e,t){var n=Mu(e,!0).delete(t);return new Lu(n).toPromise()}var Wu=function(){function e(){re(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return ae(e,[{key:"_openDb",value:function(){var e=Z(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,Fu();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=Z(te().mark((function e(t){var n,r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=Z(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Cu()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=Z(te().mark((function e(){var t=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=Iu._getInstance(Cu()?self:null),this.receiver._subscribe("keyChanged",function(){var e=Z(te().mark((function e(n,r){var i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=Z(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=Z(te().mark((function e(){var t,n,r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Au();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new Tu(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=Z(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&Ru()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=Z(te().mark((function e(){var t;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,Fu();case 5:return t=e.sent,e.next=8,ju(t,mu,"1");case 8:return e.next=10,zu(t,mu);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=Z(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Z(te().mark((function e(t,n){var r=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Z(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return ju(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Z(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return qu(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Z(te().mark((function e(t){var n=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Z(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return zu(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=Z(te().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=Mu(e,!1).getAll();return new Lu(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=oe(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(Z(te().mark((function t(){return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();Wu.type="LOCAL";var Hu=Wu;function Ku(e,t){return pi(e,"POST","/v2/accounts/mfaSignIn:start",di(e,t))}function Gu(e){return Qu.apply(this,arguments)}function Qu(){return(Qu=Z(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pi(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yu(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=Jr("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Ju(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var Xu=1e12,$u=function(){function e(t){re(this,e),this.auth=t,this.counter=Xu,this._widgets=new Map}return ae(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new Zu(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||Xu;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||Xu;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=Z(te().mark((function e(t){var n,r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||Xu,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Zu=function(){function e(t,n,r){var i=this;re(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;ei(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return ae(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var es=Ju("rcb"),ts=new si(3e4,6e4),ns="https://www.google.com/recaptcha/api.js?",rs=function(){function e(){re(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Su().grecaptcha}return ae(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return ei(is(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(Su().grecaptcha):new Promise((function(r,i){var a=Su().setTimeout((function(){i(Jr(e,"network-request-failed"))}),ts.get());Su()[es]=function(){Su().clearTimeout(a),delete Su()[es];var o=Su().grecaptcha;if(o){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(Jr(e,"internal-error"))},Yu("".concat(ns,"?").concat(Fe({onload:es,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(Jr(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){return!!Su().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function is(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var as=function(){function e(){re(this,e)}return ae(e,[{key:"load",value:function(){var e=Z(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new $u(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),os="recaptcha",us={theme:"light",type:"image"},ss=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},us),r=arguments.length>2?arguments[2]:void 0;re(this,e),this.parameters=n,this.type=os,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ha(r),this.isInvisible="invisible"===this.parameters.size,ei("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;ei(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new as:new rs,this.validateStartingState()}return ae(e,[{key:"verify",value:function(){var e=Z(te().mark((function e(){var t,n,r,i=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){ei(!this.parameters.sitekey,this.auth,"argument-error"),ei(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ei("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=Su()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){ei(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=Z(te().mark((function e(){var t,n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=Z(te().mark((function e(){var t;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ei(oi()&&!Cu(),this.auth,"internal-error"),e.next=3,cs();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,Gu(this.auth);case 8:ei(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return ei(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function cs(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var ls=function(){function e(t,n){re(this,e),this.verificationId=t,this.onConfirmation=n}return ae(e,[{key:"confirm",value:function(e){var t=Ja._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function fs(){return(fs=Z(te().mark((function e(t,n,r){var i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ha(t),e.next=3,vs(i,n,We(r));case 3:return a=e.sent,e.abrupt("return",new ls(a,(function(e){return So(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hs(e,t,n){return ds.apply(this,arguments)}function ds(){return(ds=Z(te().mark((function e(t,n,r){var i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=We(t),e.next=3,bo(!1,i,"phone");case 3:return e.next=5,vs(i.auth,n,We(r));case 5:return a=e.sent,e.abrupt("return",new ls(a,(function(e){return Ao(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ps(){return(ps=Z(te().mark((function e(t,n,r){var i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=We(t),e.next=3,vs(i.auth,n,We(r));case 3:return a=e.sent,e.abrupt("return",new ls(a,(function(e){return Ro(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vs(e,t,n){return ys.apply(this,arguments)}function ys(){return ys=Z(te().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,ei("string"===typeof a,t,"argument-error"),ei(r.type===os,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return ei("enroll"===u.type,t,"internal-error"),e.next=13,pu(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return ei("signin"===u.type,t,"internal-error"),ei(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,Ku(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,Wa(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),ys.apply(this,arguments)}function ms(){return(ms=Z(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ko(We(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var gs=function(){function e(t){re(this,e),this.providerId=e.PROVIDER_ID,this.auth=ha(t)}return ae(e,[{key:"verifyPhoneNumber",value:function(e,t){return vs(this.auth,e,We(t))}}],[{key:"credential",value:function(e,t){return Ja._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?Ja._fromTokenResponse(n,r):null}}]),e}();function ks(e,t){return t?ii(t):(ei(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}gs.PROVIDER_ID="phone",gs.PHONE_SIGN_IN_METHOD="phone";var ws=function(e){ce(n,e);var t=pe(n);function n(e){var r;return re(this,n),(r=t.call(this,"custom","custom")).params=e,r}return ae(n,[{key:"_getIdTokenResponse",value:function(e){return qa(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return qa(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return qa(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(ma);function bs(e){return Eo(e.auth,new ws(e),e.bypassAuthState)}function _s(e){var t=e.auth,n=e.user;return ei(n,t,"internal-error"),xo(n,new ws(e),e.bypassAuthState)}function xs(e){return Is.apply(this,arguments)}function Is(){return(Is=Z(te().mark((function e(t){var n,r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,ei(r=t.user,n,"internal-error"),e.abrupt("return",ko(r,new ws(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Es=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];re(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return ae(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=Z(te().mark((function t(n,r){return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=Z(te().mark((function e(t){var n,r,i,a,o,u,s;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return bs;case"linkViaPopup":case"linkViaRedirect":return xs;case"reauthViaPopup":case"reauthViaRedirect":return _s;default:Yr(this.auth,"internal-error")}}},{key:"resolve",value:function(e){ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),Ts=new si(2e3,1e4);function Ss(e,t,n){return Cs.apply(this,arguments)}function Cs(){return(Cs=Z(te().mark((function e(t,n,r){var i,a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ha(t),$r(t,n,Za),a=ks(i,r),o=new Ps(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function As(){return(As=Z(te().mark((function e(t,n,r){var i,a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $r((i=We(t)).auth,n,Za),a=ks(i.auth,r),o=new Ps(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ns(e,t,n){return Rs.apply(this,arguments)}function Rs(){return(Rs=Z(te().mark((function e(t,n,r){var i,a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $r((i=We(t)).auth,n,Za),a=ks(i.auth,r),o=new Ps(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ps=function(e){ce(n,e);var t=pe(n);function n(e,r,i,a,o){var u;return re(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=ue(u),u}return ae(n,[{key:"executeNotNull",value:function(){var e=Z(te().mark((function e(){var t;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return ei(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Z(te().mark((function e(){var t,n=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ni(1===this.filter.length,"Popup operations only handle one event"),t=Eu(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(Jr(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(Jr(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(Jr(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,Ts.get())}()}}]),n}(Es);Ps.currentPopupAction=null;var Os=new Map,Ds=function(e){ce(n,e);var t=pe(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return re(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return ae(n,[{key:"execute",value:function(){var e=Z(te().mark((function e(){var t,r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Os.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,Ls(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,Ar(le(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:Os.set(this.auth._key(),t);case 21:return this.bypassAuthState||Os.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=Z(te().mark((function e(t){var r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",Ar(le(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",Ar(le(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Z(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(Es);function Ls(e,t){return Ms.apply(this,arguments)}function Ms(){return(Ms=Z(te().mark((function e(t,n){var r,i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Vs(n),i=js(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Us(e,t){return Fs.apply(this,arguments)}function Fs(){return(Fs=Z(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",js(t)._set(Vs(n),"true"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function js(e){return ii(e._redirectPersistence)}function Vs(e){return Ji("pendingRedirect",e.config.apiKey,e.name)}function qs(e,t,n){return function(e,t,n){return Bs.apply(this,arguments)}(e,t,n)}function Bs(){return(Bs=Z(te().mark((function e(t,n,r){var i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ha(t),$r(t,n,Za),a=ks(i,r),e.next=5,Us(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zs(e,t,n){return function(e,t,n){return Ws.apply(this,arguments)}(e,t,n)}function Ws(){return(Ws=Z(te().mark((function e(t,n,r){var i,a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $r((i=We(t)).auth,n,Za),a=ks(i.auth,r),e.next=5,Us(a,i.auth);case 5:return e.next=7,Xs(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hs(e,t,n){return function(e,t,n){return Ks.apply(this,arguments)}(e,t,n)}function Ks(){return(Ks=Z(te().mark((function e(t,n,r){var i,a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $r((i=We(t)).auth,n,Za),a=ks(i.auth,r),e.next=5,bo(!1,i,n.providerId);case 5:return e.next=7,Us(a,i.auth);case 7:return e.next=9,Xs(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gs(e,t){return Qs.apply(this,arguments)}function Qs(){return(Qs=Z(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ha(t)._initializationPromise;case 2:return e.abrupt("return",Ys(t,n,!1));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ys(e,t){return Js.apply(this,arguments)}function Js(){return Js=Z(te().mark((function e(t,n){var r,i,a,o,u,s=arguments;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=ha(t),a=ks(i,n),o=new Ds(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),Js.apply(this,arguments)}function Xs(e){return $s.apply(this,arguments)}function $s(){return($s=Z(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Eu("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Zs=function(){function e(t){re(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return ae(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return tc(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!tc(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Jr(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ec(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(ec(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function ec(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function tc(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function nc(e){return rc.apply(this,arguments)}function rc(){return rc=Z(te().mark((function e(t){var n,r=arguments;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",pi(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),rc.apply(this,arguments)}var ic=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ac=/^https?/;function oc(){return(oc=Z(te().mark((function e(t){var n,r,i,a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,nc(t);case 4:n=e.sent,r=n.authorizedDomains,i=oe(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!uc(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:Yr(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])})))).apply(this,arguments)}function uc(e){var t=ai(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!ac.test(r))return!1;if(ic.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var sc=new si(3e4,6e4);function cc(){var e=Su().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=Ke(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var lc=null;function fc(e){return lc=lc||function(e){return new Promise((function(t,n){var r,i,a;function o(){cc(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){cc(),n(Jr(e,"network-request-failed"))},timeout:sc.get()})}if(null===(i=null===(r=Su().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=Su().gapi)||void 0===a?void 0:a.load)){var u=Ju("iframefcb");return Su()[u]=function(){gapi.load?o():n(Jr(e,"network-request-failed"))},Yu("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw lc=null,e}))}(e),lc}var hc=new si(5e3,15e3),dc={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},pc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function vc(e){var t=e.config;ei(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?ci(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Tt},i=pc.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(Fe(r).slice(1))}function yc(e){return mc.apply(this,arguments)}function mc(){return mc=Z(te().mark((function e(t){var n,r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fc(t);case 2:return n=e.sent,ei(r=Su().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:vc(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:dc,dontclear:!0},(function(e){return new Promise(function(){var n=Z(te().mark((function n(r,i){var a,o,u;return te().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){Su().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=Jr(t,"network-request-failed"),o=Su().setTimeout((function(){i(a)}),hc.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),mc.apply(this,arguments)}var gc={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},kc="_blank",wc="http://localhost",bc=function(){function e(t){re(this,e),this.window=t,this.associatedEvent=null}return ae(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function _c(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",c=Object.assign(Object.assign({},gc),{width:r.toString(),height:i.toString(),top:a,left:o}),l=Ie().toLowerCase();n&&(u=ta(l)?kc:n),Zi(l)&&(t=t||wc,c.scrollbars="yes");var f=Object.entries(c).reduce((function(e,t){var n=s(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(ua(l)&&"_self"!==u)return xc(t||"",u),new bc(null);var h=window.open(t||"",u,f);ei(h,e,"popup-blocked");try{h.focus()}catch(d){}return new bc(h)}function xc(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var Ic="__/auth/handler",Ec="emulator/auth/handler";function Tc(e,t,n,r,i,a){ei(e.config.authDomain,e,"auth-domain-config-required"),ei(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Tt,eventId:i};if(t instanceof Za){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,c=Object.entries(a||{});u<c.length;u++){var l=s(c[u],2),f=l[0],h=l[1];o[f]=h}}if(t instanceof eo){var d=t.getScopes().filter((function(e){return""!==e}));d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var p=o,v=0,y=Object.keys(p);v<y.length;v++){var m=y[v];void 0===p[m]&&delete p[m]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Ic);return ci(t,Ec)}(e),"?").concat(Fe(p).slice(1))}var Sc="webStorageSupport",Cc=function(){function e(){re(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_u,this._completeRedirectFn=Ys}return ae(e,[{key:"_openPopup",value:function(){var e=Z(te().mark((function e(t,n,r,i){var a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ni(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=Tc(t,n,r,ai(),i),e.abrupt("return",_c(t,o,Eu()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Z(te().mark((function e(t,n,r,i){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=Tc(t,n,r,ai(),i),Su().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(ni(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=Z(te().mark((function e(t){var n,r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yc(t);case 2:return n=e.sent,r=new Zs(t),n.register("authEvent",(function(e){return ei(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(Sc,{type:Sc},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),Yr(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return oc.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return ca()||ea()||oa()}}]),e}(),Ac=Cc,Nc=function(e){ce(n,e);var t=pe(n);function n(e){var r;return re(this,n),(r=t.call(this,"phone")).credential=e,r}return ae(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return pi(e,"POST","/v2/accounts/mfaEnrollment:finalize",di(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return pi(e,"POST","/v2/accounts/mfaSignIn:finalize",di(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(function(){function e(t){re(this,e),this.factorId=t}return ae(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return ti("unexpected MultiFactorSessionType")}}}]),e}()),Rc=function(){function e(){re(this,e)}return ae(e,null,[{key:"assertion",value:function(e){return Nc._fromCredential(e)}}]),e}();Rc.FACTOR_ID="phone";var Pc,Oc="@firebase/auth",Dc="0.19.4",Lc=function(){function e(t){re(this,e),this.auth=t,this.internalListeners=new Map}return ae(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=Z(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){ei(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function Mc(){return window}Pc="Browser",mt(new Ge("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=r.options,a=i.apiKey,o=i.authDomain;return function(e){ei(a&&!a.includes(":"),"invalid-api-key",{appName:e.name}),ei(!(null===o||void 0===o?void 0:o.includes(":")),"argument-error",{appName:e.name});var t={apiKey:a,authDomain:o,clientPlatform:Pc,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:la(Pc)},r=new fa(e,t);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ii);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(r,n),r}(r)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),mt(new Ge("auth-internal",(function(e){return function(e){return new Lc(e)}(ha(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),Pt(Oc,Dc,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Pc)),Pt(Oc,Dc,"esm2017");function Uc(e,t,n){return Fc.apply(this,arguments)}function Fc(){return Fc=Z(te().mark((function e(t,n,r){var i,a,o,u,s;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Mc(),o=a.BuildInfo,ni(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,Wc(n.sessionId);case 4:return u=e.sent,s={},oa()?s.ibi=o.packageName:ra()?s.apn=o.packageName:Yr(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",Tc(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),Fc.apply(this,arguments)}function jc(){return(jc=Z(te().mark((function e(t){var n,r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Mc(),r=n.BuildInfo,i={},oa()?i.iosBundleId=r.packageName:ra()?i.androidPackageName=r.packageName:Yr(t,"operation-not-supported-in-this-environment"),e.next=5,nc(t,i);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vc(e){var t=Mc().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function qc(e,t,n){return Bc.apply(this,arguments)}function Bc(){return Bc=Z(te().mark((function e(t,n,r){var i,a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Mc(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(Jr(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),ra()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),Bc.apply(this,arguments)}function zc(e){var t,n,r,i,a,o,u,s,c,l,f=Mc();ei("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ei("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ei("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ei("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ei("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function Wc(e){return Hc.apply(this,arguments)}function Hc(){return(Hc=Z(te().mark((function e(t){var n,r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Kc(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Kc(e){if(ni(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var Gc=function(e){ce(n,e);var t=pe(n);function n(){var e;return re(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return ae(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),Ar(le(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=Z(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Zs);function Qc(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:Zc(),postBody:null,tenantId:e.tenantId,error:Jr(e,"no-auth-event")}}function Yc(e,t){return el()._set(tl(e),t)}function Jc(e){return Xc.apply(this,arguments)}function Xc(){return(Xc=Z(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,el()._get(tl(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,el()._remove(tl(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $c(e,t){var n,r,i=function(e){var t=nl(e),n=t.link?decodeURIComponent(t.link):void 0,r=nl(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return nl(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=nl(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?Jr(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function Zc(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function el(){return ii(wu)}function tl(e){return Ji("authEvent",e.config.apiKey,e.name)}function nl(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=i(t=n)||He(t)||o(t)||u();r[0];return je(r.slice(1).join("?"))}var rl=function(){function e(){re(this,e),this._redirectPersistence=_u,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Ys}return ae(e,[{key:"_initialize",value:function(){var e=Z(te().mark((function e(t){var n,r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new Gc(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){Yr(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=Z(te().mark((function e(t,n,r,i){var a,o,u,s;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return zc(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),Os.clear(),e.next=10,this._originValidation(t);case 10:return o=Qc(t,r,i),e.next=13,Yc(t,o);case 13:return e.next=15,Uc(t,o,n);case 15:return u=e.sent,e.next=18,Vc(u);case 18:return s=e.sent,e.abrupt("return",qc(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return jc.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=Mc(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(Z(te().mark((function n(){return te().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Jc(e);case 2:t.onEvent(al());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=Z(te().mark((function n(r){var i,a;return te().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,Jc(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=$c(i,r.url)),t.onEvent(a||al());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");Mc().handleOpenURL=function(){var e=Z(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),il=rl;function al(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Jr("no-auth-event")}}function ol(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function ul(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie();return!("file:"!==ol()&&"ionic:"!==ol()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function sl(){return Ae()&&11===(null===document||void 0===document?void 0:document.documentMode)}function cl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie();return/Edge\/\d+/.test(e)}function ll(){try{var e=self.localStorage,t=Eu();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie();return sl()||cl(e)}()||Ne()}catch(n){return fl()&&Ne()}return!1}function fl(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function hl(){return("http:"===ol()||"https:"===ol()||Se()||ul())&&!(Ce()||Te())&&ll()&&!fl()}function dl(){return ul()&&"undefined"!==typeof document}function pl(){return vl.apply(this,arguments)}function vl(){return(vl=Z(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(dl()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var yl={LOCAL:"local",NONE:"none",SESSION:"session"},ml=ei,gl="persistence";function kl(e,t){ml(Object.values(yl).includes(t),e,"invalid-persistence-type"),Ce()?ml(t!==yl.SESSION,e,"unsupported-persistence-type"):Te()?ml(t===yl.NONE,e,"unsupported-persistence-type"):fl()?ml(t===yl.NONE||t===yl.LOCAL&&Ne(),e,"unsupported-persistence-type"):ml(t===yl.NONE||ll(),e,"unsupported-persistence-type")}function wl(e){return bl.apply(this,arguments)}function bl(){return(bl=Z(te().mark((function e(t){var n,r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=_l(),r=Ji(gl,t.config.apiKey,t.name),(null===n||void 0===n?void 0:n.sessionStorage)&&n.sessionStorage.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _l(){return"undefined"!==typeof window?window:null}var xl=ei,Il=function(){function e(){re(this,e),this.browserResolver=ii(Ac),this.cordovaResolver=ii(il),this.underlyingResolver=null,this._redirectPersistence=_u,this._completeRedirectFn=Ys}return ae(e,[{key:"_initialize",value:function(){var e=Z(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=Z(te().mark((function e(t,n,r,i){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Z(te().mark((function e(t,n,r,i){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return dl()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return xl(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=Z(te().mark((function e(){var t;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,pl();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function El(e){return e.unwrap()}function Tl(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new Rl(e,function(e,t){var n,r=We(e),i=t;return ei(t.customData.operationType,r,"argument-error"),ei(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),du._fromError(r,i)}(e,t));else if(r){var i=Sl(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function Sl(e){var t=(e instanceof Re?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof Re)&&"temporaryProof"in t&&"phoneNumber"in t)return gs.credentialFromResult(e);var n,r=t.providerId;if(!r||r===Lr)return null;switch(r){case Dr:n=ro;break;case Pr:n=no;break;case Or:n=io;break;case Mr:n=uo;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?ao._create(r,u):za._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new to(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof Re?n.credentialFromError(e):n.credentialFromResult(e)}function Cl(e,t){return t.catch((function(t){throw t instanceof Re&&Tl(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,Sl(t)),additionalUserInfo:fu(e),user:Pl.getOrCreate(r)}}))}function Al(e,t){return Nl.apply(this,arguments)}function Nl(){return(Nl=Z(te().mark((function e(t,n){var r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return Cl(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Rl=function(){function e(t,n){re(this,e),this.resolver=n,this.auth=t.wrapped()}return ae(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return Cl(El(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),Pl=function(){function e(t){re(this,e),this._delegate=t,this.multiFactor=function(e){var t=We(e);return yu.has(t)||yu.set(t,vu._fromUser(t)),yu.get(t)}(t)}return ae(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=Z(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Cl(this.auth,Ao(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=Z(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Al(this.auth,hs(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=Z(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Cl(this.auth,Ns(this._delegate,t,Il)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=Z(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wl(ha(this.auth));case 2:return e.abrupt("return",Hs(this._delegate,t,Il));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=Z(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Cl(this.auth,Ro(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return Al(this.auth,function(e,t,n){return ps.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return Cl(this.auth,function(e,t,n){return As.apply(this,arguments)}(this._delegate,e,Il))}},{key:"reauthenticateWithRedirect",value:function(){var e=Z(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wl(ha(this.auth));case 2:return e.abrupt("return",zs(this._delegate,t,Il));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return $o.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=Z(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mo(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return ru(We(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return ru(We(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return ms.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return nu.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return Zo.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();Pl.USER_MAP=new WeakMap;var Ol=ei,Dl=function(){function e(t,n){if(re(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;Ol(r,"invalid-api-key",{appName:t.name});var i=[Yi];if("undefined"!==typeof window){i=function(e,t){var n=_l();if(!(null===n||void 0===n?void 0:n.sessionStorage))return[];var r=Ji(gl,e,t);switch(n.sessionStorage.getItem(r)){case yl.NONE:return[Yi];case yl.LOCAL:return[Hu,_u];case yl.SESSION:return[_u];default:return[]}}(r,t.name);for(var a=0,o=[Hu,wu,_u];a<o.length;a++){var u=o[a];i.includes(u)||i.push(u)}}Ol(r,"invalid-api-key",{appName:t.name});var s="undefined"!==typeof window?Il:void 0;this._delegate=n.initialize({options:{persistence:i,popupRedirectResolver:s}}),this._delegate._updateErrorMap(Wr),this.linkUnderlyingAuth()}return ae(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?Pl.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){pa(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return qo.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return Bo(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return Vo.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=Z(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Cl(this._delegate,Ho(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return Xo.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=Xa.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=Z(te().mark((function e(){var t;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ol(hl(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Gs(this._delegate,Il);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",Cl(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){ha(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=Ll(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=Ll(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return Go.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return jo.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=Z(te().mark((function e(t){var n,r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:kl(this._delegate,t),e.t0=t,e.next=e.t0===yl.SESSION?4:e.t0===yl.LOCAL?6:e.t0===yl.NONE?11:13;break;case 4:return n=_u,e.abrupt("break",14);case 6:return e.next=8,ii(Hu)._isAvailable();case 8:return r=e.sent,n=r?Hu:wu,e.abrupt("break",14);case 11:return n=Yi,e.abrupt("break",14);case 13:return e.abrupt("return",Yr("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return Cl(this._delegate,function(e){return ho.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return Cl(this._delegate,So(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return Cl(this._delegate,function(e,t){return Lo.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return Cl(this._delegate,function(e,t,n){return So(We(e),$a.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return Cl(this._delegate,function(e,t,n){return Qo.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return Al(this._delegate,function(e,t,n){return fs.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=Z(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ol(hl(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",Cl(this._delegate,Ss(this._delegate,t,Il)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=Z(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ol(hl(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,wl(this._delegate);case 3:return e.abrupt("return",qs(this._delegate,t,Il));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return Wo.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function Ll(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&Pl.getOrCreate(e))},error:t,complete:n}}Dl.Persistence=yl;var Ml=function(){function e(){re(this,e),this.providerId="phone",this._delegate=new gs(El(qt.auth()))}return ae(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return gs.credential(e,t)}}]),e}();Ml.PHONE_SIGN_IN_METHOD=gs.PHONE_SIGN_IN_METHOD,Ml.PROVIDER_ID=gs.PROVIDER_ID;var Ul,Fl=ei,jl=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:qt.app();re(this,e),Fl(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new ss(t,n,i.auth()),this.type=this._delegate.type}return ae(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();(Ul=qt).INTERNAL.registerComponent(new Ge("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Dl(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Ur,PASSWORD_RESET:Fr,RECOVER_EMAIL:jr,REVERT_SECOND_FACTOR_ADDITION:Vr,VERIFY_AND_CHANGE_EMAIL:qr,VERIFY_EMAIL:Br}},EmailAuthProvider:$a,FacebookAuthProvider:no,GithubAuthProvider:io,GoogleAuthProvider:ro,OAuthProvider:to,SAMLAuthProvider:oo,PhoneAuthProvider:Ml,PhoneMultiFactorGenerator:Rc,RecaptchaVerifier:jl,TwitterAuthProvider:uo,Auth:Dl,AuthCredential:ma,Error:Re}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Ul.registerVersion("@firebase/auth-compat","0.2.4");var Vl,ql="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Bl={},zl=zl||{},Wl=ql||self;function Hl(){}function Kl(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Gl(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Ql="closure_uid_"+(1e9*Math.random()>>>0),Yl=0;function Jl(e,t,n){return e.call.apply(e.bind,arguments)}function Xl(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function $l(e,t,n){return($l=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Jl:Xl).apply(null,arguments)}function Zl(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function ef(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function tf(){this.s=this.s,this.o=this.o}var nf={};tf.prototype.s=!1,tf.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,Ql)&&e[Ql]||(e[Ql]=++Yl)}(this);delete nf[e]}},tf.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var rf=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},af=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function of(e){return Array.prototype.concat.apply([],arguments)}function uf(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function sf(e){return/^[\s\xa0]*$/.test(e)}var cf,lf=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function ff(e,t){return-1!=e.indexOf(t)}function hf(e,t){return e<t?-1:e>t?1:0}e:{var df=Wl.navigator;if(df){var pf=df.userAgent;if(pf){cf=pf;break e}}cf=""}function vf(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function yf(e){var t={};for(var n in e)t[n]=e[n];return t}var mf="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function gf(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<mf.length;a++)n=mf[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function kf(e){return kf[" "](e),e}kf[" "]=Hl;var wf,bf=ff(cf,"Opera"),_f=ff(cf,"Trident")||ff(cf,"MSIE"),xf=ff(cf,"Edge"),If=xf||_f,Ef=ff(cf,"Gecko")&&!(ff(cf.toLowerCase(),"webkit")&&!ff(cf,"Edge"))&&!(ff(cf,"Trident")||ff(cf,"MSIE"))&&!ff(cf,"Edge"),Tf=ff(cf.toLowerCase(),"webkit")&&!ff(cf,"Edge");function Sf(){var e=Wl.document;return e?e.documentMode:void 0}e:{var Cf="",Af=function(){var e=cf;return Ef?/rv:([^\);]+)(\)|;)/.exec(e):xf?/Edge\/([\d\.]+)/.exec(e):_f?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Tf?/WebKit\/(\S+)/.exec(e):bf?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Af&&(Cf=Af?Af[1]:""),_f){var Nf=Sf();if(null!=Nf&&Nf>parseFloat(Cf)){wf=String(Nf);break e}}wf=Cf}var Rf,Pf={};function Of(){return function(e){var t=Pf;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=lf(String(wf)).split("."),n=lf("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=hf(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||hf(0==a[2].length,0==o[2].length)||hf(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(Wl.document&&_f){var Df=Sf();Rf=Df||(parseInt(wf,10)||void 0)}else Rf=void 0;var Lf=Rf,Mf=function(){if(!Wl.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Wl.addEventListener("test",Hl,t),Wl.removeEventListener("test",Hl,t)}catch(n){}return e}();function Uf(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function Ff(e,t){if(Uf.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Ef){e:{try{kf(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:jf[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Ff.Z.h.call(this)}}Uf.prototype.h=function(){this.defaultPrevented=!0},ef(Ff,Uf);var jf={2:"touch",3:"pen",4:"mouse"};Ff.prototype.h=function(){Ff.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Vf="closure_listenable_"+(1e6*Math.random()|0),qf=0;function Bf(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++qf,this.ca=this.fa=!1}function zf(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function Wf(e){this.src=e,this.g={},this.h=0}function Hf(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=rf(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(zf(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Kf(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}Wf.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Kf(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new Bf(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var Gf="closure_lm_"+(1e6*Math.random()|0),Qf={};function Yf(e,t,n,r,i){if(r&&r.once)return Xf(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Yf(e,t[a],n,r,i);return null}return n=ih(n),e&&e[Vf]?e.N(t,n,Gl(r)?!!r.capture:!!r,i):Jf(e,t,n,!1,r,i)}function Jf(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Gl(i)?!!i.capture:!!i,u=nh(e);if(u||(e[Gf]=u=new Wf(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=th;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Mf||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(eh(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Xf(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Xf(e,t[a],n,r,i);return null}return n=ih(n),e&&e[Vf]?e.O(t,n,Gl(r)?!!r.capture:!!r,i):Jf(e,t,n,!0,r,i)}function $f(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)$f(e,t[a],n,r,i);else r=Gl(r)?!!r.capture:!!r,n=ih(n),e&&e[Vf]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Kf(a=e.g[t],n,r,i))&&(zf(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=nh(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Kf(t,n,r,i)),(n=-1<e?t[e]:null)&&Zf(n))}function Zf(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[Vf])Hf(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(eh(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=nh(t))?(Hf(n,e),0==n.h&&(n.src=null,t[Gf]=null)):zf(e)}}}function eh(e){return e in Qf?Qf[e]:Qf[e]="on"+e}function th(e,t){if(e.ca)e=!0;else{t=new Ff(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&Zf(e),e=n.call(r,t)}return e}function nh(e){return(e=e[Gf])instanceof Wf?e:null}var rh="__closure_events_fn_"+(1e9*Math.random()>>>0);function ih(e){return"function"===typeof e?e:(e[rh]||(e[rh]=function(t){return e.handleEvent(t)}),e[rh])}function ah(){tf.call(this),this.i=new Wf(this),this.P=this,this.I=null}function oh(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new Uf(t,e);else if(t instanceof Uf)t.target=t.target||e;else{var i=t;gf(t=new Uf(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=uh(o,r,!0,t)&&i}if(i=uh(o=t.g=e,r,!0,t)&&i,i=uh(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=uh(o=t.g=n[a],r,!1,t)&&i}function uh(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var u=o.listener,s=o.ia||o.src;o.fa&&Hf(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}ef(ah,tf),ah.prototype[Vf]=!0,ah.prototype.removeEventListener=function(e,t,n,r){$f(this,e,t,n,r)},ah.prototype.M=function(){if(ah.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)zf(n[r]);delete t.g[e],t.h--}}this.I=null},ah.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ah.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var sh=Wl.JSON.stringify;function ch(){var e=mh,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var lh,fh=function(){function e(){re(this,e),this.h=this.g=null}return ae(e,[{key:"add",value:function(e,t){var n=hh.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),hh=new(function(){function e(t,n){re(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return ae(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new dh}),(function(e){return e.reset()})),dh=function(){function e(){re(this,e),this.next=this.g=this.h=null}return ae(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function ph(e){Wl.setTimeout((function(){throw e}),0)}function vh(e,t){lh||function(){var e=Wl.Promise.resolve(void 0);lh=function(){e.then(gh)}}(),yh||(lh(),yh=!0),mh.add(e,t)}var yh=!1,mh=new fh;function gh(){for(var e;e=ch();){try{e.h.call(e.g)}catch(n){ph(n)}var t=hh;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}yh=!1}function kh(e,t){ah.call(this),this.h=e||1,this.g=t||Wl,this.j=$l(this.kb,this),this.l=Date.now()}function wh(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function bh(e,t,n){if("function"===typeof e)n&&(e=$l(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=$l(e.handleEvent,e)}return 2147483647<Number(t)?-1:Wl.setTimeout(e,t||0)}function _h(e){e.g=bh((function(){e.g=null,e.i&&(e.i=!1,_h(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}ef(kh,ah),(Vl=kh.prototype).da=!1,Vl.S=null,Vl.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),oh(this,"tick"),this.da&&(wh(this),this.start()))}},Vl.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Vl.M=function(){kh.Z.M.call(this),wh(this),delete this.g};var xh=function(e){ce(n,e);var t=pe(n);function n(e,r){var i;return re(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return ae(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:_h(this)}},{key:"M",value:function(){Ar(le(n.prototype),"M",this).call(this),this.g&&(Wl.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(tf);function Ih(e){tf.call(this),this.h=e,this.g={}}ef(Ih,tf);var Eh=[];function Th(e,t,n,r){Array.isArray(n)||(n&&(Eh[0]=n.toString()),n=Eh);for(var i=0;i<n.length;i++){var a=Yf(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Sh(e){vf(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Zf(e)}),e),e.g={}}function Ch(){this.g=!0}function Ah(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return sh(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}Ih.prototype.M=function(){Ih.Z.M.call(this),Sh(this)},Ih.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ch.prototype.Aa=function(){this.g=!1},Ch.prototype.info=function(){};var Nh={},Rh=null;function Ph(){return Rh=Rh||new ah}function Oh(e){Uf.call(this,Nh.Ma,e)}function Dh(e){var t=Ph();oh(t,new Oh(t,e))}function Lh(e,t){Uf.call(this,Nh.STAT_EVENT,e),this.stat=t}function Mh(e){var t=Ph();oh(t,new Lh(t,e))}function Uh(e,t){Uf.call(this,Nh.Na,e),this.size=t}function Fh(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Wl.setTimeout((function(){e()}),t)}Nh.Ma="serverreachability",ef(Oh,Uf),Nh.STAT_EVENT="statevent",ef(Lh,Uf),Nh.Na="timingevent",ef(Uh,Uf);var jh={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Vh={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function qh(){}function Bh(e){return e.h||(e.h=e.i())}function zh(){}qh.prototype.h=null;var Wh,Hh={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Kh(){Uf.call(this,"d")}function Gh(){Uf.call(this,"c")}function Qh(){}function Yh(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new Ih(this),this.P=Xh,e=If?125:void 0,this.W=new kh(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Jh}function Jh(){this.i=null,this.g="",this.h=!1}ef(Kh,Uf),ef(Gh,Uf),ef(Qh,qh),Qh.prototype.g=function(){return new XMLHttpRequest},Qh.prototype.i=function(){return{}},Wh=new Qh;var Xh=45e3,$h={},Zh={};function ed(e,t,n){e.K=1,e.v=xd(md(t)),e.s=n,e.U=!0,td(e,null)}function td(e,t){e.F=Date.now(),ad(e),e.A=md(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),Md(n.h,"t",r),e.C=0,n=e.l.H,e.h=new Jh,e.g=Fp(e.l,n?t:null,!e.s),0<e.O&&(e.L=new xh($l(e.Ia,e,e.g),e.O)),Th(e.V,e.g,"readystatechange",e.gb),t=e.H?yf(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Dh(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function nd(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function rd(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=id(e,n))==Zh){4==t&&(e.o=4,Mh(14),i=!1),Ah(e.j,e.m,null,"[Incomplete Response]");break}if(r==$h){e.o=4,Mh(15),Ah(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Ah(e.j,e.m,r,null),ld(e,r)}nd(e)&&r!=Zh&&r!=$h&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Mh(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Np(t),t.L=!0,Mh(11))):(Ah(e.j,e.m,n,"[Invalid Chunked Response]"),cd(e),sd(e))}function id(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Zh:(n=Number(t.substring(n,r)),isNaN(n)?$h:(r+=1)+n>t.length?Zh:(t=t.substr(r,n),e.C=r+n,t))}function ad(e){e.Y=Date.now()+e.P,od(e,e.P)}function od(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Fh($l(e.eb,e),t)}function ud(e){e.B&&(Wl.clearTimeout(e.B),e.B=null)}function sd(e){0==e.l.G||e.I||Op(e.l,e)}function cd(e){ud(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,wh(e.W),Sh(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function ld(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Wd(n.i,e)))if(n.I=e.N,!e.J&&Wd(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Pp(n),bp(n)}Ap(n),Mh(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Fh($l(n.ab,n),6e3));if(1>=zd(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else Lp(n,11)}else if((e.J||n.g==e)&&Pp(n),!sf(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var u=a[4];null!=u&&(n.za=u,n.h.info("SVER="+n.za));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;!f.g&&(ff(l,"spdy")||ff(l,"quic")||ff(l,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(Hd(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.sa=h,_d(r.F,r.D,h))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=Up(r,r.H?r.la:null,r.W),d.J){Kd(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(ud(p),ad(p)),r.g=d}else Cp(r);0<n.l.length&&Ip(n)}else"stop"!=a[0]&&"close"!=a[0]||Lp(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Lp(n,7):wp(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}Dh(4)}catch(a){}}function fd(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Kl(e)||"string"===typeof e)af(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(Kl(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(Kl(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function hd(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof hd)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function dd(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];pd(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)pd(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function pd(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(Vl=Yh.prototype).setTimeout=function(e){this.P=e},Vl.gb=function(e){e=e.target;var t=this.L;t&&3==vp(e)?t.l():this.Ia(e)},Vl.Ia=function(e){try{if(e==this.g)e:{var t=vp(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||If||this.g&&(this.h.h||this.g.ga()||yp(this.g)))){this.I||4!=t||7==n||Dh(8==n||0>=r?3:2),ud(this);var i=this.g.ba();this.N=i;t:if(nd(this)){var a=yp(this.g);e="";var o=a.length,u=4==vp(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){cd(this),sd(this);var s="";break t}this.h.i=new Wl.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:u&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!sf(c)){var f=c;break t}}f=null}if(!(i=f)){this.i=!1,this.o=3,Mh(12),cd(this),sd(this);break e}Ah(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,ld(this,i)}this.U?(rd(this,t,s),If&&this.i&&3==t&&(Th(this.V,this.W,"tick",this.fb),this.W.start())):(Ah(this.j,this.m,s,null),ld(this,s)),4==t&&cd(this),this.i&&!this.I&&(4==t?Op(this.l,this):(this.i=!1,ad(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.o=3,Mh(12)):(this.o=0,Mh(13)),cd(this),sd(this)}}}catch(t){}},Vl.fb=function(){if(this.g){var e=vp(this.g),t=this.g.ga();this.C<t.length&&(ud(this),rd(this,e,t),this.i&&4!=e&&ad(this))}},Vl.cancel=function(){this.I=!0,cd(this)},Vl.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(Dh(3),Mh(17)),cd(this),this.o=2,sd(this)):od(this,this.Y-e)},(Vl=hd.prototype).R=function(){dd(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},Vl.T=function(){return dd(this),this.g.concat()},Vl.get=function(e,t){return pd(this.h,e)?this.h[e]:t},Vl.set=function(e,t){pd(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},Vl.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var vd=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function yd(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof yd){this.g=void 0!==t?t:e.g,gd(this,e.j),this.s=e.s,kd(this,e.i),wd(this,e.m),this.l=e.l,t=e.h;var n=new Pd;n.i=t.i,t.g&&(n.g=new hd(t.g),n.h=t.h),bd(this,n),this.o=e.o}else e&&(n=String(e).match(vd))?(this.g=!!t,gd(this,n[1]||"",!0),this.s=Id(n[2]||""),kd(this,n[3]||"",!0),wd(this,n[4]),this.l=Id(n[5]||"",!0),bd(this,n[6]||"",!0),this.o=Id(n[7]||"")):(this.g=!!t,this.h=new Pd(null,this.g))}function md(e){return new yd(e)}function gd(e,t,n){e.j=n?Id(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function kd(e,t,n){e.i=n?Id(t,!0):t}function wd(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function bd(e,t,n){t instanceof Pd?(e.h=t,function(e,t){t&&!e.j&&(Od(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Dd(this,t),Md(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=Ed(t,Nd)),e.h=new Pd(t,e.g))}function _d(e,t,n){e.h.set(t,n)}function xd(e){return _d(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Id(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Ed(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Td),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Td(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}yd.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Ed(t,Sd,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Ed(t,Sd,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(Ed(n,"/"==n.charAt(0)?Ad:Cd,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Ed(n,Rd)),e.join("")};var Sd=/[#\/\?@]/g,Cd=/[#\?:]/g,Ad=/[#\?]/g,Nd=/[#\?@]/g,Rd=/#/g;function Pd(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Od(e){e.g||(e.g=new hd,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Dd(e,t){Od(e),t=Ud(e,t),pd(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,pd((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&dd(e)))}function Ld(e,t){return Od(e),t=Ud(e,t),pd(e.g.h,t)}function Md(e,t,n){Dd(e,t),0<n.length&&(e.i=null,e.g.set(Ud(e,t),uf(n)),e.h+=n.length)}function Ud(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Vl=Pd.prototype).add=function(e,t){Od(this),this.i=null,e=Ud(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Vl.forEach=function(e,t){Od(this),this.g.forEach((function(n,r){af(n,(function(n){e.call(t,n,r,this)}),this)}),this)},Vl.T=function(){Od(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Vl.R=function(e){Od(this);var t=[];if("string"===typeof e)Ld(this,e)&&(t=of(t,this.g.get(Ud(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=of(t,e[n])}return t},Vl.set=function(e,t){return Od(this),this.i=null,Ld(this,e=Ud(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Vl.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},Vl.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var Fd=ae((function e(t,n){re(this,e),this.h=t,this.g=n}));function jd(e){this.l=e||qd,Wl.PerformanceNavigationTiming?e=0<(e=Wl.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Wl.g&&Wl.g.Ea&&Wl.g.Ea()&&Wl.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Vd,qd=10;function Bd(e){return!!e.h||!!e.g&&e.g.size>=e.j}function zd(e){return e.h?1:e.g?e.g.size:0}function Wd(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Hd(e,t){e.g?e.g.add(t):e.h=t}function Kd(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Gd(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=oe(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return uf(e.i)}function Qd(){}function Yd(){this.g=new Qd}function Jd(e,t,n){var r=n||"";try{fd(e,(function(e,n){var i=e;Gl(e)&&(i=sh(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Xd(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function $d(e){this.l=e.$b||null,this.j=e.ib||!1}function Zd(e,t){ah.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=ep,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}jd.prototype.cancel=function(){if(this.i=Gd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=oe(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Qd.prototype.stringify=function(e){return Wl.JSON.stringify(e,void 0)},Qd.prototype.parse=function(e){return Wl.JSON.parse(e,void 0)},ef($d,qh),$d.prototype.g=function(){return new Zd(this.l,this.j)},$d.prototype.i=(Vd={},function(){return Vd}),ef(Zd,ah);var ep=0;function tp(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function np(e){e.readyState=4,e.l=null,e.j=null,e.A=null,rp(e)}function rp(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Vl=Zd.prototype).open=function(e,t){if(this.readyState!=ep)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,rp(this)},Vl.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Wl).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},Vl.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,np(this)),this.readyState=ep},Vl.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,rp(this)),this.g&&(this.readyState=3,rp(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof Wl.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;tp(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},Vl.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?np(this):rp(this),3==this.readyState&&tp(this)}},Vl.Ua=function(e){this.g&&(this.response=this.responseText=e,np(this))},Vl.Ta=function(e){this.g&&(this.response=e,np(this))},Vl.ha=function(){this.g&&np(this)},Vl.setRequestHeader=function(e,t){this.v.append(e,t)},Vl.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Vl.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Zd.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var ip=Wl.JSON.parse;function ap(e){ah.call(this),this.headers=new hd,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=op,this.K=this.L=!1}ef(ap,ah);var op="",up=/^https?$/i,sp=["POST","PUT"];function cp(e){return"content-type"==e.toLowerCase()}function lp(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,fp(e),dp(e)}function fp(e){e.D||(e.D=!0,oh(e,"complete"),oh(e,"error"))}function hp(e){if(e.h&&"undefined"!=typeof zl&&(!e.C[1]||4!=vp(e)||2!=e.ba()))if(e.v&&4==vp(e))bh(e.Fa,0,e);else if(oh(e,"readystatechange"),4==vp(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(vd)[1]||null;if(!a&&Wl.self&&Wl.self.location){var o=Wl.self.location.protocol;a=o.substr(0,o.length-1)}i=!up.test(a?a.toLowerCase():"")}t=i}if(t)oh(e,"complete"),oh(e,"success");else{e.m=6;try{var u=2<vp(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.ba()+"]",fp(e)}}finally{dp(e)}}}function dp(e,t){if(e.g){pp(e);var n=e.g,r=e.C[0]?Hl:null;e.g=null,e.C=null,t||oh(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function pp(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Wl.clearTimeout(e.A),e.A=null)}function vp(e){return e.g?e.g.readyState:0}function yp(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case op:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function mp(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return vf(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):_d(e,t,n))}function gp(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function kp(e){this.za=0,this.l=[],this.h=new Ch,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=gp("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=gp("baseRetryDelayMs",5e3,e),this.$a=gp("retryDelaySeedMs",1e4,e),this.Ya=gp("forwardChannelMaxRetries",2,e),this.ra=gp("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new jd(e&&e.concurrentRequestLimit),this.Ca=new Yd,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function wp(e){if(_p(e),3==e.G){var t=e.V++,n=md(e.F);_d(n,"SID",e.J),_d(n,"RID",t),_d(n,"TYPE","terminate"),Tp(e,n),(t=new Yh(e,e.h,t,void 0)).K=2,t.v=xd(md(n)),n=!1,Wl.navigator&&Wl.navigator.sendBeacon&&(n=Wl.navigator.sendBeacon(t.v.toString(),"")),!n&&Wl.Image&&((new Image).src=t.v,n=!0),n||(t.g=Fp(t.l,null),t.g.ea(t.v)),t.F=Date.now(),ad(t)}Mp(e)}function bp(e){e.g&&(Np(e),e.g.cancel(),e.g=null)}function _p(e){bp(e),e.u&&(Wl.clearTimeout(e.u),e.u=null),Pp(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Wl.clearTimeout(e.m),e.m=null)}function xp(e,t){e.l.push(new Fd(e.Za++,t)),3==e.G&&Ip(e)}function Ip(e){Bd(e.i)||e.m||(e.m=!0,vh(e.Ha,e),e.C=0)}function Ep(e,t){var n;n=t?t.m:e.V++;var r=md(e.F);_d(r,"SID",e.J),_d(r,"RID",n),_d(r,"AID",e.U),Tp(e,r),e.o&&e.s&&mp(r,e.o,e.s),n=new Yh(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=Sp(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),Hd(e.i,n),ed(n,r,t)}function Tp(e,t){e.j&&fd({},(function(e,n){_d(t,n,e)}))}function Sp(e,t,n){n=Math.min(e.l.length,n);var r=e.j?$l(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{Jd(l,o,"req"+c+"_")}catch(yv){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function Cp(e){e.g||e.u||(e.Y=1,vh(e.Ga,e),e.A=0)}function Ap(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=Fh($l(e.Ga,e),Dp(e,e.A)),e.A++,!0)}function Np(e){null!=e.B&&(Wl.clearTimeout(e.B),e.B=null)}function Rp(e){e.g=new Yh(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=md(e.oa);_d(t,"RID","rpc"),_d(t,"SID",e.J),_d(t,"CI",e.N?"0":"1"),_d(t,"AID",e.U),Tp(e,t),_d(t,"TYPE","xmlhttp"),e.o&&e.s&&mp(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=xd(md(t)),n.s=null,n.U=!0,td(n,e)}function Pp(e){null!=e.v&&(Wl.clearTimeout(e.v),e.v=null)}function Op(e,t){var n=null;if(e.g==t){Pp(e),Np(e),e.g=null;var r=2}else{if(!Wd(e.i,t))return;n=t.D,Kd(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;oh(r=Ph(),new Uh(r,n,t,i)),Ip(e)}else Cp(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(zd(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=Fh($l(e.Ha,e,t),Dp(e,e.C)),e.C++,!0))}(e,t)||2==r&&Ap(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Lp(e,5);break;case 4:Lp(e,10);break;case 3:Lp(e,6);break;default:Lp(e,2)}}function Dp(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function Lp(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=$l(e.jb,e);n||(n=new yd("//www.google.com/images/cleardot.gif"),Wl.location&&"http"==Wl.location.protocol||gd(n,"https"),xd(n)),function(e,t){var n=new Ch;if(Wl.Image){var r=new Image;r.onload=Zl(Xd,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Zl(Xd,n,r,"TestLoadImage: error",!1,t),r.onabort=Zl(Xd,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Zl(Xd,n,r,"TestLoadImage: timeout",!1,t),Wl.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Mh(2);e.G=0,e.j&&e.j.va(t),Mp(e),_p(e)}function Mp(e){e.G=0,e.I=-1,e.j&&(0==Gd(e.i).length&&0==e.l.length||(e.i.i.length=0,uf(e.l),e.l.length=0),e.j.ua())}function Up(e,t,n){var r=function(e){return e instanceof yd?md(e):new yd(e,void 0)}(n);if(""!=r.i)t&&kd(r,t+"."+r.i),wd(r,r.m);else{var i=Wl.location;r=function(e,t,n,r){var i=new yd(null,void 0);return e&&gd(i,e),t&&kd(i,t),n&&wd(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&vf(e.aa,(function(e,t){_d(r,t,e)})),t=e.D,n=e.sa,t&&n&&_d(r,t,n),_d(r,"VER",e.ma),Tp(e,r),r}function Fp(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new ap(new $d({ib:!0})):new ap(e.qa)).L=e.H,t}function jp(){}function Vp(){if(_f&&!(10<=Number(Lf)))throw Error("Environmental error: no available transport.")}function qp(e,t){ah.call(this),this.g=new kp(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!sf(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!sf(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Wp(this)}function Bp(e){Kh.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function zp(){Gh.call(this),this.status=1}function Wp(e){this.g=e}(Vl=ap.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Wh.g(),this.C=this.u?Bh(this.u):Bh(Wh),this.g.onreadystatechange=$l(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void lp(this,a)}e=n||"";var i=new hd(this.headers);r&&fd(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=cp,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=Wl.FormData&&e instanceof Wl.FormData,!(0<=rf(sp,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{pp(this),0<this.B&&((this.K=function(e){return _f&&Of()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=$l(this.pa,this)):this.A=bh(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){lp(this,a)}},Vl.pa=function(){"undefined"!=typeof zl&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,oh(this,"timeout"),this.abort(8))},Vl.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,oh(this,"complete"),oh(this,"abort"),dp(this))},Vl.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),dp(this,!0)),ap.Z.M.call(this)},Vl.Fa=function(){this.s||(this.F||this.v||this.l?hp(this):this.cb())},Vl.cb=function(){hp(this)},Vl.ba=function(){try{return 2<vp(this)?this.g.status:-1}catch(Vd){return-1}},Vl.ga=function(){try{return this.g?this.g.responseText:""}catch(Vd){return""}},Vl.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ip(t)}},Vl.Da=function(){return this.m},Vl.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(Vl=kp.prototype).ma=8,Vl.G=1,Vl.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},Vl.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new Yh(this,this.h,e,void 0),n=this.s;if(this.P&&(n?gf(n=yf(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Sp(this,t,r),_d(i=md(this.F),"RID",e),_d(i,"CVER",22),this.D&&_d(i,"X-HTTP-Session-Id",this.D),Tp(this,i),this.o&&n&&mp(i,this.o,n),Hd(this.i,t),this.Ra&&_d(i,"TYPE","init"),this.ja?(_d(i,"$req",r),_d(i,"SID","null"),t.$=!0,ed(t,i,null)):ed(t,i,r),this.G=2}}else 3==this.G&&(e?Ep(this,e):0==this.l.length||Bd(this.i)||Ep(this))},Vl.Ga=function(){if(this.u=null,Rp(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=Fh($l(this.bb,this),e)}},Vl.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Mh(10),bp(this),Rp(this))},Vl.ab=function(){null!=this.v&&(this.v=null,bp(this),Ap(this),Mh(19))},Vl.jb=function(e){e?(this.h.info("Successfully pinged google.com"),Mh(2)):(this.h.info("Failed to ping google.com"),Mh(1))},(Vl=jp.prototype).xa=function(){},Vl.wa=function(){},Vl.va=function(){},Vl.ua=function(){},Vl.Oa=function(){},Vp.prototype.g=function(e,t){return new qp(e,t)},ef(qp,ah),qp.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),vh($l(e.hb,e,t))),Mh(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=Up(e,null,e.W),Ip(e)},qp.prototype.close=function(){wp(this.g)},qp.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,xp(this.g,t)}else this.v?((t={}).__data__=sh(e),xp(this.g,t)):xp(this.g,e)},qp.prototype.M=function(){this.g.j=null,delete this.j,wp(this.g),delete this.g,qp.Z.M.call(this)},ef(Bp,Kh),ef(zp,Gh),ef(Wp,jp),Wp.prototype.xa=function(){oh(this.g,"a")},Wp.prototype.wa=function(e){oh(this.g,new Bp(e))},Wp.prototype.va=function(e){oh(this.g,new zp(e))},Wp.prototype.ua=function(){oh(this.g,"b")},Vp.prototype.createWebChannel=Vp.prototype.g,qp.prototype.send=qp.prototype.u,qp.prototype.open=qp.prototype.m,qp.prototype.close=qp.prototype.close,jh.NO_ERROR=0,jh.TIMEOUT=8,jh.HTTP_ERROR=6,Vh.COMPLETE="complete",zh.EventType=Hh,Hh.OPEN="a",Hh.CLOSE="b",Hh.ERROR="c",Hh.MESSAGE="d",ah.prototype.listen=ah.prototype.N,ap.prototype.listenOnce=ap.prototype.O,ap.prototype.getLastError=ap.prototype.La,ap.prototype.getLastErrorCode=ap.prototype.Da,ap.prototype.getStatus=ap.prototype.ba,ap.prototype.getResponseJson=ap.prototype.Qa,ap.prototype.getResponseText=ap.prototype.ga,ap.prototype.send=ap.prototype.ea;var Hp=Bl.createWebChannelTransport=function(){return new Vp},Kp=Bl.getStatEventTarget=function(){return Ph()},Gp=Bl.ErrorCode=jh,Qp=Bl.EventType=Vh,Yp=Bl.Event=Nh,Jp=Bl.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Xp=Bl.FetchXmlHttpFactory=$d,$p=Bl.WebChannel=zh,Zp=Bl.XhrIo=ap,ev="@firebase/firestore",tv=function(){function e(t){re(this,e),this.uid=t}return ae(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();tv.UNAUTHENTICATED=new tv(null),tv.GOOGLE_CREDENTIALS=new tv("google-credentials-uid"),tv.FIRST_PARTY=new tv("first-party-uid"),tv.MOCK_USER=new tv("mock-user");var nv="9.6.1",rv=new ot("@firebase/firestore");function iv(){return rv.logLevel}function av(e){if(rv.logLevel<=Xe.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(sv);rv.debug.apply(rv,["Firestore (".concat(nv,"): ").concat(e)].concat(Ke(i)))}}function ov(e){if(rv.logLevel<=Xe.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(sv);rv.error.apply(rv,["Firestore (".concat(nv,"): ").concat(e)].concat(Ke(i)))}}function uv(e){if(rv.logLevel<=Xe.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(sv);rv.warn.apply(rv,["Firestore (".concat(nv,"): ").concat(e)].concat(Ke(i)))}}function sv(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function cv(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(nv,") INTERNAL ASSERTION FAILED: ")+e;throw ov(t),new Error(t)}function lv(e,t){e||cv()}function fv(e,t){return e}var hv={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},dv=function(e){ce(n,e);var t=pe(n);function n(e,r){var i;return re(this,n),(i=t.call(this,r)).code=e,i.message=r,i.name="FirebaseError",i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return ae(n)}(ye(Error)),pv=ae((function e(){var t=this;re(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),vv=ae((function e(t,n){re(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),yv=function(){function e(){re(this,e)}return ae(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(tv.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),mv=function(){function e(t){re(this,e),this.token=t,this.changeListener=null}return ae(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),gv=function(){function e(t){re(this,e),this.t=t,this.currentUser=tv.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return ae(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new pv;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new pv,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(Z(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){av("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(av("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new pv)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(av("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(lv("string"==typeof n.accessToken),new vv(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return lv(null===e||"string"==typeof e),new tv(e)}}]),e}(),kv=ae((function e(t,n,r){re(this,e),this.type="FirstParty",this.user=tv.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),wv=function(){function e(t,n,r){re(this,e),this.h=t,this.l=n,this.m=r}return ae(e,[{key:"getToken",value:function(){return Promise.resolve(new kv(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(tv.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),bv=ae((function e(t){re(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),_v=function(){function e(t){re(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null}return ae(e,[{key:"start",value:function(e,t){var n=this;this.o=function(n){e.enqueueRetryable((function(){return function(e){return null!=e.error&&av("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message)),t(e.token)}(n)}))};var r=function(e){av("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return r(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?r(e):av("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((function(e){return e?(lv("string"==typeof e.token),new bv(e.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}(),xv=function(){function e(t,n){var r=this;re(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.p(e)},this.T=function(e){return n.writeSequenceNumber(e)})}return ae(e,[{key:"p",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.T&&this.T(e),e}}]),e}();function Iv(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}xv.I=-1;var Ev=function(){function e(){re(this,e)}return ae(e,null,[{key:"A",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=Iv(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function Tv(e,t){return e<t?-1:e>t?1:0}function Sv(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Cv(e){return e+"\0"}var Av=function(){function e(t,n){if(re(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new dv(hv.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new dv(hv.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new dv(hv.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new dv(hv.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return ae(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Tv(this.nanoseconds,e.nanoseconds):Tv(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Nv=function(){function e(t){re(this,e),this.timestamp=t}return ae(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Av(0,0))}}]),e}();function Rv(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Pv(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Ov(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Dv=function(){function e(t,n,r){re(this,e),void 0===n?n=0:n>t.length&&cv(),void 0===r?r=t.length-n:r>t.length-n&&cv(),this.segments=t,this.offset=n,this.len=r}return ae(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Lv=function(e){ce(n,e);var t=pe(n);function n(){return re(this,n),t.apply(this,arguments)}return ae(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new dv(hv.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,Ke(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Dv),Mv=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Uv=function(e){ce(n,e);var t=pe(n);function n(){return re(this,n),t.apply(this,arguments)}return ae(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Mv.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new dv(hv.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new dv(hv.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new dv(hv.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new dv(hv.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Dv),Fv=function(){function e(t){re(this,e),this.fields=t,t.sort(Uv.comparator)}return ae(e,[{key:"covers",value:function(e){var t,n=oe(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Sv(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}]),e}();var jv=function(){function e(t){re(this,e),this.binaryString=t}return ae(e,[{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Tv(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(t){return new e(atob(t))}},{key:"fromUint8Array",value:function(t){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(t);return new e(n)}}]),e}();jv.EMPTY_BYTE_STRING=new jv("");var Vv=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qv(e){if(lv(!!e),"string"==typeof e){var t=0,n=Vv.exec(e);if(lv(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Bv(e.seconds),nanos:Bv(e.nanos)}}function Bv(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function zv(e){return"string"==typeof e?jv.fromBase64String(e):jv.fromUint8Array(e)}function Wv(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Hv(e){var t=e.mapValue.fields.__previous_value__;return Wv(t)?Hv(t):t}function Kv(e){var t=qv(e.mapValue.fields.__local_write_time__.timestampValue);return new Av(t.seconds,t.nanos)}function Gv(e){return null==e}function Qv(e){return 0===e&&1/e==-1/0}function Yv(e){return"number"==typeof e&&Number.isInteger(e)&&!Qv(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var Jv=function(){function e(t){re(this,e),this.path=t}return ae(e,[{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"isEqual",value:function(e){return null!==e&&0===Lv.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Lv.fromString(t))}},{key:"fromName",value:function(t){return new e(Lv.fromString(t).popFirst(5))}},{key:"comparator",value:function(e,t){return Lv.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Lv(t.slice()))}}]),e}();function Xv(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Wv(e)?4:10:cv()}function $v(e,t){var n=Xv(e);if(n!==Xv(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Kv(e).isEqual(Kv(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=qv(e.timestampValue),r=qv(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return zv(e.bytesValue).isEqual(zv(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Bv(e.geoPointValue.latitude)===Bv(t.geoPointValue.latitude)&&Bv(e.geoPointValue.longitude)===Bv(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Bv(e.integerValue)===Bv(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Bv(e.doubleValue),r=Bv(t.doubleValue);return n===r?Qv(n)===Qv(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Sv(e.arrayValue.values||[],t.arrayValue.values||[],$v);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Rv(n)!==Rv(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!$v(n[i],r[i])))return!1;return!0}(e,t);default:return cv()}}function Zv(e,t){return void 0!==(e.values||[]).find((function(e){return $v(e,t)}))}function ey(e,t){var n=Xv(e),r=Xv(t);if(n!==r)return Tv(n,r);switch(n){case 0:return 0;case 1:return Tv(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Bv(e.integerValue||e.doubleValue),r=Bv(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return ty(e.timestampValue,t.timestampValue);case 4:return ty(Kv(e),Kv(t));case 5:return Tv(e.stringValue,t.stringValue);case 6:return function(e,t){var n=zv(e),r=zv(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Tv(n[i],r[i]);if(0!==a)return a}return Tv(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Tv(Bv(e.latitude),Bv(t.latitude));return 0!==n?n:Tv(Bv(e.longitude),Bv(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=ey(n[i],r[i]);if(a)return a}return Tv(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=Tv(r[o],a[o]);if(0!==u)return u;var s=ey(n[r[o]],i[a[o]]);if(0!==s)return s}return Tv(r.length,a.length)}(e.mapValue,t.mapValue);default:throw cv()}}function ty(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Tv(e,t);var n=qv(e),r=qv(t),i=Tv(n.seconds,r.seconds);return 0!==i?i:Tv(n.nanos,r.nanos)}function ny(e){return ry(e)}function ry(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=qv(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?zv(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Jv.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=oe(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=ry(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=oe(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(ry(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):cv();var t,n}function iy(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function ay(e){return!!e&&"integerValue"in e}function oy(e){return!!e&&"arrayValue"in e}function uy(e){return!!e&&"nullValue"in e}function sy(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function cy(e){return!!e&&"mapValue"in e}function ly(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Pv(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=ly(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=ly(e.arrayValue.values[r]);return n}return Object.assign({},e)}var fy=function(){function e(t){re(this,e),this.value=t}return ae(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!cy(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ly(t)}},{key:"setAll",value:function(e){var t=this,n=Uv.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=ly(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());cy(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return $v(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];cy(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Pv(t,(function(t,n){return e[t]=n}));var r,i=oe(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(ly(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function hy(e){var t=[];return Pv(e.fields,(function(e,n){var r=new Uv([e]);if(cy(n)){var i=hy(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=oe(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new Fv(t)}var dy=function(){function e(t,n,r,i,a){re(this,e),this.key=t,this.documentType=n,this.version=r,this.data=i,this.documentState=a}return ae(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=fy.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=fy.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"clone",value:function(){return new e(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Nv.min(),fy.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,fy.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,fy.empty(),2)}}]),e}(),py=ae((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;re(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.R=null}));function vy(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new py(e,t,n,r,i,a,o)}function yy(e){var t=fv(e);if(null===t.R){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return function(e){return e.field.canonicalString()+e.op.toString()+ny(e.value)}(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Gv(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=Ay(t.startAt)),t.endAt&&(n+="|ub:",n+=Ay(t.endAt)),t.R=n}return t.R}function my(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Ry(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!$v(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Oy(e.startAt,t.startAt)&&Oy(e.endAt,t.endAt)}function gy(e){return Jv.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}var ky=function(e){ce(n,e);var t=pe(n);function n(e,r,i){var a;return re(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return ae(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(ey(t,this.value)):null!==t&&Xv(this.value)===Xv(t)&&this.v(ey(t,this.value))}},{key:"v",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return cv()}}},{key:"V",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.P(e,t,r):new wy(e,t,r):"array-contains"===t?new Iy(e,r):"in"===t?new Ey(e,r):"not-in"===t?new Ty(e,r):"array-contains-any"===t?new Sy(e,r):new n(e,t,r)}},{key:"P",value:function(e,t,n){return"in"===t?new by(e,n):new _y(e,n)}}]),n}(function(){return ae((function e(){re(this,e)}))}());var wy=function(e){ce(n,e);var t=pe(n);function n(e,r,i){var a;return re(this,n),(a=t.call(this,e,r,i)).key=Jv.fromName(i.referenceValue),a}return ae(n,[{key:"matches",value:function(e){var t=Jv.comparator(e.key,this.key);return this.v(t)}}]),n}(ky),by=function(e){ce(n,e);var t=pe(n);function n(e,r){var i;return re(this,n),(i=t.call(this,e,"in",r)).keys=xy("in",r),i}return ae(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(ky),_y=function(e){ce(n,e);var t=pe(n);function n(e,r){var i;return re(this,n),(i=t.call(this,e,"not-in",r)).keys=xy("not-in",r),i}return ae(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(ky);function xy(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Jv.fromName(e.referenceValue)}))}var Iy=function(e){ce(n,e);var t=pe(n);function n(e,r){return re(this,n),t.call(this,e,"array-contains",r)}return ae(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return oy(t)&&Zv(t.arrayValue,this.value)}}]),n}(ky),Ey=function(e){ce(n,e);var t=pe(n);function n(e,r){return re(this,n),t.call(this,e,"in",r)}return ae(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Zv(this.value.arrayValue,t)}}]),n}(ky),Ty=function(e){ce(n,e);var t=pe(n);function n(e,r){return re(this,n),t.call(this,e,"not-in",r)}return ae(n,[{key:"matches",value:function(e){if(Zv(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Zv(this.value.arrayValue,t)}}]),n}(ky),Sy=function(e){ce(n,e);var t=pe(n);function n(e,r){return re(this,n),t.call(this,e,"array-contains-any",r)}return ae(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!oy(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Zv(t.value.arrayValue,e)}))}}]),n}(ky),Cy=ae((function e(t,n){re(this,e),this.position=t,this.before=n}));function Ay(e){return"".concat(e.before?"b":"a",":").concat(e.position.map((function(e){return ny(e)})).join(","))}var Ny=ae((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";re(this,e),this.field=t,this.dir=n}));function Ry(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function Py(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Jv.comparator(Jv.fromName(o.referenceValue),n.key):ey(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return e.before?r<=0:r<0}function Oy(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.before!==t.before||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!$v(e.position[n],t.position[n]))return!1;return!0}var Dy=ae((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;re(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.S=null,this.D=null,this.startAt,this.endAt}));function Ly(e,t,n,r,i,a,o,u){return new Dy(e,t,n,r,i,a,o,u)}function My(e){return new Dy(e)}function Uy(e){return!Gv(e.limit)&&"F"===e.limitType}function Fy(e){return!Gv(e.limit)&&"L"===e.limitType}function jy(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Vy(e){var t,n=oe(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.V())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function qy(e){return null!==e.collectionGroup}function By(e){var t=fv(e);if(null===t.S){t.S=[];var n=Vy(t),r=jy(t);if(null!==n&&null===r)n.isKeyField()||t.S.push(new Ny(n)),t.S.push(new Ny(Uv.keyField(),"asc"));else{var i,a=!1,o=oe(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.S.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.S.push(new Ny(Uv.keyField(),s))}}}return t.S}function zy(e){var t=fv(e);if(!t.D)if("F"===t.limitType)t.D=vy(t.path,t.collectionGroup,By(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=oe(By(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new Ny(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new Cy(t.endAt.position,!t.endAt.before):null,s=t.startAt?new Cy(t.startAt.position,!t.startAt.before):null;t.D=vy(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.D}function Wy(e,t,n){return new Dy(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Hy(e,t){return my(zy(e),zy(t))&&e.limitType===t.limitType}function Ky(e){return"".concat(yy(zy(e)),"|lt:").concat(e.limitType)}function Gy(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(ny(t.value));var t})).join(", "),"]")),Gv(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: "+Ay(e.startAt)),e.endAt&&(t+=", endAt: "+Ay(e.endAt)),"Target(".concat(t,")")}(zy(e)),"; limitType=").concat(e.limitType,")")}function Qy(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Jv.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=oe(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=oe(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!Py(e.startAt,By(e),t))&&(!e.endAt||!Py(e.endAt,By(e),t))}(e,t)}function Yy(e){return function(t,n){var r,i=!1,a=oe(By(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=Jy(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function Jy(e,t,n){var r=e.field.isKeyField()?Jv.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?ey(r,i):cv()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return cv()}}function Xy(e,t){if(e.C){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Qv(t)?"-0":t}}function $y(e){return{integerValue:""+e}}function Zy(e,t){return Yv(t)?$y(t):Xy(e,t)}var em=ae((function e(){re(this,e),this._=void 0}));function tm(e,t,n){return e instanceof im?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof am?om(e,t):e instanceof um?sm(e,t):function(e,t){var n=rm(e,t),r=lm(n)+lm(e.N);return ay(n)&&ay(e.N)?$y(r):Xy(e.k,r)}(e,t)}function nm(e,t,n){return e instanceof am?om(e,t):e instanceof um?sm(e,t):n}function rm(e,t){return e instanceof cm?ay(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var im=function(e){ce(n,e);var t=pe(n);function n(){return re(this,n),t.apply(this,arguments)}return ae(n)}(em),am=function(e){ce(n,e);var t=pe(n);function n(e){var r;return re(this,n),(r=t.call(this)).elements=e,r}return ae(n)}(em);function om(e,t){var n,r=fm(t),i=oe(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return $v(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var um=function(e){ce(n,e);var t=pe(n);function n(e){var r;return re(this,n),(r=t.call(this)).elements=e,r}return ae(n)}(em);function sm(e,t){var n,r=fm(t),i=oe(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!$v(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var cm=function(e){ce(n,e);var t=pe(n);function n(e,r){var i;return re(this,n),(i=t.call(this)).k=e,i.N=r,i}return ae(n)}(em);function lm(e){return Bv(e.integerValue||e.doubleValue)}function fm(e){return oy(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var hm=ae((function e(t,n){re(this,e),this.field=t,this.transform=n}));var dm=ae((function e(t,n){re(this,e),this.version=t,this.transformResults=n})),pm=function(){function e(t,n){re(this,e),this.updateTime=t,this.exists=n}return ae(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function vm(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var ym=ae((function e(){re(this,e)}));function mm(e,t,n){e instanceof _m?function(e,t,n){var r=e.value.clone(),i=Em(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof xm?function(e,t,n){if(vm(e.precondition,t)){var r=Em(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Im(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function gm(e,t,n){e instanceof _m?function(e,t,n){if(vm(e.precondition,t)){var r=e.value.clone(),i=Tm(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(bm(t),r).setHasLocalMutations()}}(e,t,n):e instanceof xm?function(e,t,n){if(vm(e.precondition,t)){var r=Tm(e.fieldTransforms,n,t),i=t.data;i.setAll(Im(e)),i.setAll(r),t.convertToFoundDocument(bm(t),i).setHasLocalMutations()}}(e,t,n):function(e,t){vm(e.precondition,t)&&t.convertToNoDocument(Nv.min())}(e,t)}function km(e,t){var n,r=null,i=oe(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=rm(a.transform,o||null);null!=u&&(null==r&&(r=fy.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function wm(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Sv(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof am&&t instanceof am||e instanceof um&&t instanceof um?Sv(e.elements,t.elements,$v):e instanceof cm&&t instanceof cm?$v(e.N,t.N):e instanceof im&&t instanceof im}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function bm(e){return e.isFoundDocument()?e.version:Nv.min()}var _m=function(e){ce(n,e);var t=pe(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return re(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return ae(n)}(ym),xm=function(e){ce(n,e);var t=pe(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return re(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return ae(n)}(ym);function Im(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Em(e,t,n){var r=new Map;lv(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,nm(o,u,n[i]))}return r}function Tm(e,t,n){var r,i=new Map,a=oe(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,tm(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var Sm,Cm,Am=function(e){ce(n,e);var t=pe(n);function n(e,r){var i;return re(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return ae(n)}(ym),Nm=function(e){ce(n,e);var t=pe(n);function n(e,r){var i;return re(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return ae(n)}(ym),Rm=ae((function e(t){re(this,e),this.count=t}));function Pm(e){switch(e){default:return cv();case hv.CANCELLED:case hv.UNKNOWN:case hv.DEADLINE_EXCEEDED:case hv.RESOURCE_EXHAUSTED:case hv.INTERNAL:case hv.UNAVAILABLE:case hv.UNAUTHENTICATED:return!1;case hv.INVALID_ARGUMENT:case hv.NOT_FOUND:case hv.ALREADY_EXISTS:case hv.PERMISSION_DENIED:case hv.FAILED_PRECONDITION:case hv.ABORTED:case hv.OUT_OF_RANGE:case hv.UNIMPLEMENTED:case hv.DATA_LOSS:return!0}}function Om(e){if(void 0===e)return ov("GRPC error has no .code"),hv.UNKNOWN;switch(e){case Sm.OK:return hv.OK;case Sm.CANCELLED:return hv.CANCELLED;case Sm.UNKNOWN:return hv.UNKNOWN;case Sm.DEADLINE_EXCEEDED:return hv.DEADLINE_EXCEEDED;case Sm.RESOURCE_EXHAUSTED:return hv.RESOURCE_EXHAUSTED;case Sm.INTERNAL:return hv.INTERNAL;case Sm.UNAVAILABLE:return hv.UNAVAILABLE;case Sm.UNAUTHENTICATED:return hv.UNAUTHENTICATED;case Sm.INVALID_ARGUMENT:return hv.INVALID_ARGUMENT;case Sm.NOT_FOUND:return hv.NOT_FOUND;case Sm.ALREADY_EXISTS:return hv.ALREADY_EXISTS;case Sm.PERMISSION_DENIED:return hv.PERMISSION_DENIED;case Sm.FAILED_PRECONDITION:return hv.FAILED_PRECONDITION;case Sm.ABORTED:return hv.ABORTED;case Sm.OUT_OF_RANGE:return hv.OUT_OF_RANGE;case Sm.UNIMPLEMENTED:return hv.UNIMPLEMENTED;case Sm.DATA_LOSS:return hv.DATA_LOSS;default:return cv()}}(Cm=Sm||(Sm={}))[Cm.OK=0]="OK",Cm[Cm.CANCELLED=1]="CANCELLED",Cm[Cm.UNKNOWN=2]="UNKNOWN",Cm[Cm.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Cm[Cm.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Cm[Cm.NOT_FOUND=5]="NOT_FOUND",Cm[Cm.ALREADY_EXISTS=6]="ALREADY_EXISTS",Cm[Cm.PERMISSION_DENIED=7]="PERMISSION_DENIED",Cm[Cm.UNAUTHENTICATED=16]="UNAUTHENTICATED",Cm[Cm.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Cm[Cm.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Cm[Cm.ABORTED=10]="ABORTED",Cm[Cm.OUT_OF_RANGE=11]="OUT_OF_RANGE",Cm[Cm.UNIMPLEMENTED=12]="UNIMPLEMENTED",Cm[Cm.INTERNAL=13]="INTERNAL",Cm[Cm.UNAVAILABLE=14]="UNAVAILABLE",Cm[Cm.DATA_LOSS=15]="DATA_LOSS";var Dm=function(){function e(t,n){re(this,e),this.comparator=t,this.root=n||Mm.EMPTY}return ae(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Mm.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Mm.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Lm(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Lm(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Lm(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Lm(this.root,e,this.comparator,!0)}}]),e}(),Lm=function(){function e(t,n,r,i){re(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return ae(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Mm=function(){function e(t,n,r,i,a){re(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return ae(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw cv();if(this.right.isRed())throw cv();var e=this.left.check();if(e!==this.right.check())throw cv();return e+(this.isRed()?0:1)}}]),e}();Mm.EMPTY=null,Mm.RED=!0,Mm.BLACK=!1,Mm.EMPTY=new(function(){function e(){re(this,e),this.size=0}return ae(e,[{key:"key",get:function(){throw cv()}},{key:"value",get:function(){throw cv()}},{key:"color",get:function(){throw cv()}},{key:"left",get:function(){throw cv()}},{key:"right",get:function(){throw cv()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Mm(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Um=function(){function e(t){re(this,e),this.comparator=t,this.data=new Dm(this.comparator)}return ae(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Fm(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Fm(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Fm=function(){function e(t){re(this,e),this.iter=t}return ae(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}(),jm=new Dm(Jv.comparator);function Vm(){return jm}var qm=new Dm(Jv.comparator);function Bm(){return qm}var zm=new Dm(Jv.comparator);function Wm(){return zm}var Hm=new Um(Jv.comparator);function Km(){for(var e=Hm,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var Gm=new Um(Tv);function Qm(){return Gm}var Ym=function(){function e(t,n,r,i,a){re(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return ae(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,Jm.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(Nv.min(),r,Qm(),Vm(),Km())}}]),e}(),Jm=function(){function e(t,n,r,i,a){re(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return ae(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(jv.EMPTY_BYTE_STRING,n,Km(),Km(),Km())}}]),e}(),Xm=ae((function e(t,n,r,i){re(this,e),this.$=t,this.removedTargetIds=n,this.key=r,this.F=i})),$m=ae((function e(t,n){re(this,e),this.targetId=t,this.O=n})),Zm=ae((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:jv.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;re(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),eg=function(){function e(){re(this,e),this.M=0,this.L=rg(),this.B=jv.EMPTY_BYTE_STRING,this.U=!1,this.q=!0}return ae(e,[{key:"current",get:function(){return this.U}},{key:"resumeToken",get:function(){return this.B}},{key:"K",get:function(){return 0!==this.M}},{key:"j",get:function(){return this.q}},{key:"W",value:function(e){e.approximateByteSize()>0&&(this.q=!0,this.B=e)}},{key:"G",value:function(){var e=Km(),t=Km(),n=Km();return this.L.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:cv()}})),new Jm(this.B,this.U,e,t,n)}},{key:"H",value:function(){this.q=!1,this.L=rg()}},{key:"J",value:function(e,t){this.q=!0,this.L=this.L.insert(e,t)}},{key:"Y",value:function(e){this.q=!0,this.L=this.L.remove(e)}},{key:"X",value:function(){this.M+=1}},{key:"Z",value:function(){this.M-=1}},{key:"tt",value:function(){this.q=!0,this.U=!0}}]),e}(),tg=function(){function e(t){re(this,e),this.et=t,this.nt=new Map,this.st=Vm(),this.it=ng(),this.rt=new Um(Tv)}return ae(e,[{key:"ot",value:function(e){var t,n=oe(e.$);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.F&&e.F.isFoundDocument()?this.at(r,e.F):this.ct(r,e.key,e.F)}}catch(u){n.e(u)}finally{n.f()}var i,a=oe(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.ct(o,e.key,e.F)}}catch(u){a.e(u)}finally{a.f()}}},{key:"ut",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.ht(n);switch(e.state){case 0:t.lt(n)&&r.W(e.resumeToken);break;case 1:r.Z(),r.K||r.H(),r.W(e.resumeToken);break;case 2:r.Z(),r.K||t.removeTarget(n);break;case 3:t.lt(n)&&(r.tt(),r.W(e.resumeToken));break;case 4:t.lt(n)&&(t.ft(n),r.W(e.resumeToken));break;default:cv()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.nt.forEach((function(e,r){n.lt(r)&&t(r)}))}},{key:"dt",value:function(e){var t=e.targetId,n=e.O.count,r=this.wt(t);if(r){var i=r.target;if(gy(i))if(0===n){var a=new Jv(i.path);this.ct(t,a,dy.newNoDocument(a,Nv.min()))}else lv(1===n);else this._t(t)!==n&&(this.ft(t),this.rt=this.rt.add(t))}}},{key:"gt",value:function(e){var t=this,n=new Map;this.nt.forEach((function(r,i){var a=t.wt(i);if(a){if(r.current&&gy(a.target)){var o=new Jv(a.target.path);null!==t.st.get(o)||t.yt(i,o)||t.ct(i,o,dy.newNoDocument(o,e))}r.j&&(n.set(i,r.G()),r.H())}}));var r=Km();this.it.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.wt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))}));var i=new Ym(e,n,this.rt,this.st,r);return this.st=Vm(),this.it=ng(),this.rt=new Um(Tv),i}},{key:"at",value:function(e,t){if(this.lt(e)){var n=this.yt(e,t.key)?2:0;this.ht(e).J(t.key,n),this.st=this.st.insert(t.key,t),this.it=this.it.insert(t.key,this.Tt(t.key).add(e))}}},{key:"ct",value:function(e,t,n){if(this.lt(e)){var r=this.ht(e);this.yt(e,t)?r.J(t,1):r.Y(t),this.it=this.it.insert(t,this.Tt(t).delete(e)),n&&(this.st=this.st.insert(t,n))}}},{key:"removeTarget",value:function(e){this.nt.delete(e)}},{key:"_t",value:function(e){var t=this.ht(e).G();return this.et.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"X",value:function(e){this.ht(e).X()}},{key:"ht",value:function(e){var t=this.nt.get(e);return t||(t=new eg,this.nt.set(e,t)),t}},{key:"Tt",value:function(e){var t=this.it.get(e);return t||(t=new Um(Tv),this.it=this.it.insert(e,t)),t}},{key:"lt",value:function(e){var t=null!==this.wt(e);return t||av("WatchChangeAggregator","Detected inactive target",e),t}},{key:"wt",value:function(e){var t=this.nt.get(e);return t&&t.K?null:this.et.Et(e)}},{key:"ft",value:function(e){var t=this;this.nt.set(e,new eg),this.et.getRemoteKeysForTarget(e).forEach((function(n){t.ct(e,n,null)}))}},{key:"yt",value:function(e,t){return this.et.getRemoteKeysForTarget(e).has(t)}}]),e}();function ng(){return new Dm(Jv.comparator)}function rg(){return new Dm(Jv.comparator)}var ig={asc:"ASCENDING",desc:"DESCENDING"},ag={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},og=ae((function e(t,n){re(this,e),this.databaseId=t,this.C=n}));function ug(e,t){return e.C?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function sg(e,t){return e.C?t.toBase64():t.toUint8Array()}function cg(e,t){return ug(e,t.toTimestamp())}function lg(e){return lv(!!e),Nv.fromTimestamp(function(e){var t=qv(e);return new Av(t.seconds,t.nanos)}(e))}function fg(e,t){return function(e){return new Lv(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function hg(e){var t=Lv.fromString(e);return lv(Ug(t)),t}function dg(e,t){return fg(e.databaseId,t.path)}function pg(e,t){var n=hg(t);if(n.get(1)!==e.databaseId.projectId)throw new dv(hv.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new dv(hv.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Jv(gg(n))}function vg(e,t){return fg(e.databaseId,t)}function yg(e){var t=hg(e);return 4===t.length?Lv.emptyPath():gg(t)}function mg(e){return new Lv(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function gg(e){return lv(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function kg(e,t,n){return{name:dg(e,t),fields:n.value.mapValue.fields}}function wg(e,t,n){var r=pg(e,t.name),i=lg(t.updateTime),a=new fy({mapValue:{fields:t.fields}}),o=dy.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function bg(e,t){return"found"in t?function(e,t){lv(!!t.found),t.found.name,t.found.updateTime;var n=pg(e,t.found.name),r=lg(t.found.updateTime),i=new fy({mapValue:{fields:t.found.fields}});return dy.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){lv(!!t.missing),lv(!!t.readTime);var n=pg(e,t.missing),r=lg(t.readTime);return dy.newNoDocument(n,r)}(e,t):cv()}function _g(e,t){var n;if(t instanceof _m)n={update:kg(e,t.key,t.value)};else if(t instanceof Am)n={delete:dg(e,t.key)};else if(t instanceof xm)n={update:kg(e,t.key,t.data),updateMask:Mg(t.fieldMask)};else{if(!(t instanceof Nm))return cv();n={verify:dg(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof im)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof am)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof um)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof cm)return{fieldPath:t.field.canonicalString(),increment:n.N};throw cv()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:cg(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:cv()}(e,t.precondition)),n}function xg(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?pm.updateTime(lg(e.updateTime)):void 0!==e.exists?pm.exists(e.exists):pm.none()}(t.currentDocument):pm.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)lv("REQUEST_TIME"===t.setToServerValue),n=new im;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new am(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new um(i)}else"increment"in t?n=new cm(e,t.increment):cv();var a=Uv.fromServerFormat(t.fieldPath);return new hm(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=pg(e,t.update.name),a=new fy({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new Fv(t.map((function(e){return Uv.fromServerFormat(e)})))}(t.updateMask);return new xm(i,a,o,n,r)}return new _m(i,a,n,r)}if(t.delete){var u=pg(e,t.delete);return new Am(u,n)}if(t.verify){var s=pg(e,t.verify);return new Nm(s,n)}return cv()}function Ig(e,t){return{documents:[vg(e,t.path)]}}function Eg(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=vg(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=vg(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(sy(e.value))return{unaryFilter:{field:Pg(e.field),op:"IS_NAN"}};if(uy(e.value))return{unaryFilter:{field:Pg(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(sy(e.value))return{unaryFilter:{field:Pg(e.field),op:"IS_NOT_NAN"}};if(uy(e.value))return{unaryFilter:{field:Pg(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Pg(e.field),op:Rg(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Pg(e.field),direction:Ng(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o=function(e,t){return e.C||Gv(t)?t:{value:t}}(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=Cg(t.startAt)),t.endAt&&(n.structuredQuery.endAt=Cg(t.endAt)),n}function Tg(e){var t=yg(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){lv(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=Sg(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new Ny(Og(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return Gv(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=Ag(n.startAt));var l=null;return n.endAt&&(l=Ag(n.endAt)),Ly(t,i,u,o,s,"F",c,l)}function Sg(e){return e?void 0!==e.unaryFilter?[Lg(e)]:void 0!==e.fieldFilter?[Dg(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return Sg(e)})).reduce((function(e,t){return e.concat(t)})):cv():[]}function Cg(e){return{before:e.before,values:e.position}}function Ag(e){var t=!!e.before,n=e.values||[];return new Cy(n,t)}function Ng(e){return ig[e]}function Rg(e){return ag[e]}function Pg(e){return{fieldPath:e.canonicalString()}}function Og(e){return Uv.fromServerFormat(e.fieldPath)}function Dg(e){return ky.create(Og(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return cv()}}(e.fieldFilter.op),e.fieldFilter.value)}function Lg(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Og(e.unaryFilter.field);return ky.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Og(e.unaryFilter.field);return ky.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Og(e.unaryFilter.field);return ky.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Og(e.unaryFilter.field);return ky.create(i,"!=",{nullValue:"NULL_VALUE"});default:return cv()}}function Mg(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Ug(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function Fg(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Vg(t)),t=jg(e.get(n),t);return Vg(t)}function jg(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function Vg(e){return e+"\x01\x01"}function qg(e){var t=e.length;if(lv(t>=2),2===t)return lv("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Lv.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&cv(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:cv()}a=o+2}return new Lv(r)}var Bg=ae((function e(t,n){re(this,e),this.seconds=t,this.nanoseconds=n})),zg=ae((function e(t,n,r){re(this,e),this.ownerId=t,this.allowTabSynchronization=n,this.leaseTimestampMs=r}));zg.store="owner",zg.key="owner";var Wg=ae((function e(t,n,r){re(this,e),this.userId=t,this.lastAcknowledgedBatchId=n,this.lastStreamToken=r}));Wg.store="mutationQueues",Wg.keyPath="userId";var Hg=ae((function e(t,n,r,i,a){re(this,e),this.userId=t,this.batchId=n,this.localWriteTimeMs=r,this.baseMutations=i,this.mutations=a}));Hg.store="mutations",Hg.keyPath="batchId",Hg.userMutationsIndex="userMutationsIndex",Hg.userMutationsKeyPath=["userId","batchId"];var Kg=function(){function e(){re(this,e)}return ae(e,null,[{key:"prefixForUser",value:function(e){return[e]}},{key:"prefixForPath",value:function(e,t){return[e,Fg(t)]}},{key:"key",value:function(e,t,n){return[e,Fg(t),n]}}]),e}();Kg.store="documentMutations",Kg.PLACEHOLDER=new Kg;var Gg=ae((function e(t,n){re(this,e),this.path=t,this.readTime=n})),Qg=ae((function e(t,n){re(this,e),this.path=t,this.version=n})),Yg=ae((function e(t,n,r,i,a,o){re(this,e),this.unknownDocument=t,this.noDocument=n,this.document=r,this.hasCommittedMutations=i,this.readTime=a,this.parentPath=o}));Yg.store="remoteDocuments",Yg.readTimeIndex="readTimeIndex",Yg.readTimeIndexPath="readTime",Yg.collectionReadTimeIndex="collectionReadTimeIndex",Yg.collectionReadTimeIndexPath=["parentPath","readTime"];var Jg=ae((function e(t){re(this,e),this.byteSize=t}));Jg.store="remoteDocumentGlobal",Jg.key="remoteDocumentGlobalKey";var Xg=ae((function e(t,n,r,i,a,o,u){re(this,e),this.targetId=t,this.canonicalId=n,this.readTime=r,this.resumeToken=i,this.lastListenSequenceNumber=a,this.lastLimboFreeSnapshotVersion=o,this.query=u}));Xg.store="targets",Xg.keyPath="targetId",Xg.queryTargetsIndexName="queryTargetsIndex",Xg.queryTargetsKeyPath=["canonicalId","targetId"];var $g=ae((function e(t,n,r){re(this,e),this.targetId=t,this.path=n,this.sequenceNumber=r}));$g.store="targetDocuments",$g.keyPath=["targetId","path"],$g.documentTargetsIndex="documentTargetsIndex",$g.documentTargetsKeyPath=["path","targetId"];var Zg=ae((function e(t,n,r,i){re(this,e),this.highestTargetId=t,this.highestListenSequenceNumber=n,this.lastRemoteSnapshotVersion=r,this.targetCount=i}));Zg.key="targetGlobalKey",Zg.store="targetGlobal";var ek=ae((function e(t,n){re(this,e),this.collectionId=t,this.parent=n}));ek.store="collectionParents",ek.keyPath=["collectionId","parent"];var tk=ae((function e(t,n,r,i){re(this,e),this.clientId=t,this.updateTimeMs=n,this.networkEnabled=r,this.inForeground=i}));tk.store="clientMetadata",tk.keyPath="clientId";var nk=ae((function e(t,n,r){re(this,e),this.bundleId=t,this.createTime=n,this.version=r}));nk.store="bundles",nk.keyPath="bundleId";var rk=ae((function e(t,n,r){re(this,e),this.name=t,this.readTime=n,this.bundledQuery=r}));rk.store="namedQueries",rk.keyPath="name";var ik=[Wg.store,Hg.store,Kg.store,Yg.store,Xg.store,zg.store,Zg.store,$g.store].concat([tk.store]).concat([Jg.store]).concat([ek.store]).concat([nk.store,rk.store]),ak="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ok=function(){function e(){re(this,e),this.onCommittedListeners=[]}return ae(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}(),uk=function(){function e(t){var n=this;re(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return ae(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&cv(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=oe(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}}]),e}(),sk=function(){function e(t,n){var r=this;re(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.It=new pv,this.transaction.oncomplete=function(){r.It.resolve()},this.transaction.onabort=function(){n.error?r.It.reject(new fk(t,n.error)):r.It.resolve()},this.transaction.onerror=function(e){var n=yk(e.target.error);r.It.reject(new fk(t,n))}}return ae(e,[{key:"At",get:function(){return this.It.promise}},{key:"abort",value:function(e){e&&this.It.reject(e),this.aborted||(av("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new dk(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new fk(n,t)}}}]),e}(),ck=function(){function e(t,n,r){re(this,e),this.name=t,this.version=n,this.Rt=r,12.2===e.Pt(Ie())&&ov("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return ae(e,[{key:"Ct",value:function(){var e=Z(te().mark((function e(t){var n=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return av("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new fk(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new dv(hv.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new dv(hv.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new fk(t,n))},i.onupgradeneeded=function(e){av("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.Rt.Nt(t,i.transaction,e.oldVersion,n.version).next((function(){av("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.kt&&(this.db.onversionchange=function(e){return n.kt(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"xt",value:function(e){this.kt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=Z(te().mark((function e(t,n,r,i){var a,o,u,s,c=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(te().mark((function e(){var n,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Ct(t);case 2:return c.db=e.sent,n=sk.open(c.db,t,a?"readonly":"readwrite",r),o=i(n).catch((function(e){return n.abort(e),uk.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.At;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(u=e.t0)){e.next=8;break}return e.abrupt("return",u.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),s="FirebaseError"!==e.t1.name&&o<3,av("SimpleDb","Transaction failed with error:",e.t1.message,"Retrying:",s),this.close(),s){e.next=15;break}return e.abrupt("return",Promise.reject(e.t1));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return av("SimpleDb","Removing database:",e),pk(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"bt",value:function(){if(!Ne())return!1;if(e.vt())return!0;var t=Ie(),n=e.Pt(t),r=0<n&&n<10,i=e.Vt(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"vt",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"https://jy25827.github.io/nwitter",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyBBEr8SLQe69fkfF8l5v0pOJ9RJA0lxXx0",REACT_APP_APP_ID:"1:222585799700:web:258c6142bd688290b81301",REACT_APP_AUTH_DOMAIN:"nwitter-ae508.firebaseapp.com",REACT_APP_MESSAGING_SENDER_ID:"222585799700",REACT_APP_PROJECT_ID:"nwitter-ae508",REACT_APP_STORAGE_BUCKET:"nwitter-ae508.appspot.com"})||void 0===e?void 0:e.St)}},{key:"Dt",value:function(e,t){return e.store(t)}},{key:"Pt",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"Vt",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),lk=function(){function e(t){re(this,e),this.$t=t,this.Ft=!1,this.Ot=null}return ae(e,[{key:"isDone",get:function(){return this.Ft}},{key:"Mt",get:function(){return this.Ot}},{key:"cursor",set:function(e){this.$t=e}},{key:"done",value:function(){this.Ft=!0}},{key:"Lt",value:function(e){this.Ot=e}},{key:"delete",value:function(){return pk(this.$t.delete())}}]),e}(),fk=function(e){ce(n,e);var t=pe(n);function n(e,r){var i;return re(this,n),(i=t.call(this,hv.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return ae(n)}(dv);function hk(e){return"IndexedDbTransactionError"===e.name}var dk=function(){function e(t){re(this,e),this.store=t}return ae(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(av("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(av("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),pk(n)}},{key:"add",value:function(e){return av("SimpleDb","ADD",this.store.name,e,e),pk(this.store.add(e))}},{key:"get",value:function(e){var t=this;return pk(this.store.get(e)).next((function(n){return void 0===n&&(n=null),av("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return av("SimpleDb","DELETE",this.store.name,e),pk(this.store.delete(e))}},{key:"count",value:function(){return av("SimpleDb","COUNT",this.store.name),pk(this.store.count())}},{key:"Bt",value:function(e,t){var n=this.cursor(this.options(e,t)),r=[];return this.Ut(n,(function(e,t){r.push(t)})).next((function(){return r}))}},{key:"qt",value:function(e,t){av("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Kt=!1;var r=this.cursor(n);return this.Ut(r,(function(e,t,n){return n.delete()}))}},{key:"jt",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.Ut(r,t)}},{key:"Qt",value:function(e){var t=this.cursor({});return new uk((function(n,r){t.onerror=function(e){var t=yk(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"Ut",value:function(e,t){var n=[];return new uk((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new lk(i),o=t(i.primaryKey,i.value,a);if(o instanceof uk){var u=o.catch((function(e){return a.done(),uk.reject(e)}));n.push(u)}a.isDone?r():null===a.Mt?i.continue():i.continue(a.Mt)}else r()}})).next((function(){return uk.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Kt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function pk(e){return new uk((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=yk(e.target.error);n(t)}}))}var vk=!1;function yk(e){var t=ck.Pt(Ie());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new dv("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return vk||(vk=!0,setTimeout((function(){throw r}),0)),r}}return e}var mk=function(e){ce(n,e);var t=pe(n);function n(e,r){var i;return re(this,n),(i=t.call(this)).Wt=e,i.currentSequenceNumber=r,i}return ae(n)}(ok);function gk(e,t){var n=fv(e);return ck.Dt(n.Wt,t)}var kk=function(){function e(t,n,r,i){re(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return ae(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&mm(i,e,n[r])}}},{key:"applyToLocalView",value:function(e){var t,n=oe(this.baseMutations);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.key.isEqual(e.key)&&gm(r,e,this.localWriteTime)}}catch(u){n.e(u)}finally{n.f()}var i,a=oe(this.mutations);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.key.isEqual(e.key)&&gm(o,e,this.localWriteTime)}}catch(u){a.e(u)}finally{a.f()}}},{key:"applyToLocalDocumentSet",value:function(e){var t=this;this.mutations.forEach((function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Nv.min())}))}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Km())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Sv(this.mutations,e.mutations,(function(e,t){return wm(e,t)}))&&Sv(this.baseMutations,e.baseMutations,(function(e,t){return wm(e,t)}))}}]),e}(),wk=function(){function e(t,n,r,i){re(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return ae(e,null,[{key:"from",value:function(t,n,r){lv(t.mutations.length===r.length);for(var i=Wm(),a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),bk=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Nv.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Nv.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:jv.EMPTY_BYTE_STRING;re(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return ae(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),_k=ae((function e(t){re(this,e),this.Gt=t}));function xk(e,t){if(t.document)return wg(e.Gt,t.document,!!t.hasCommittedMutations);if(t.noDocument){var n=Jv.fromSegments(t.noDocument.path),r=Ck(t.noDocument.readTime),i=dy.newNoDocument(n,r);return t.hasCommittedMutations?i.setHasCommittedMutations():i}if(t.unknownDocument){var a=Jv.fromSegments(t.unknownDocument.path),o=Ck(t.unknownDocument.version);return dy.newUnknownDocument(a,o)}return cv()}function Ik(e,t,n){var r=Ek(n),i=t.key.path.popLast().toArray();if(t.isFoundDocument()){var a=function(e,t){return{name:dg(e,t.key),fields:t.data.value.mapValue.fields,updateTime:ug(e,t.version.toTimestamp())}}(e.Gt,t),o=t.hasCommittedMutations;return new Yg(null,null,a,o,r,i)}if(t.isNoDocument()){var u=t.key.path.toArray(),s=Sk(t.version),c=t.hasCommittedMutations;return new Yg(null,new Gg(u,s),null,c,r,i)}if(t.isUnknownDocument()){var l=t.key.path.toArray(),f=Sk(t.version);return new Yg(new Qg(l,f),null,null,!0,r,i)}return cv()}function Ek(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Tk(e){var t=new Av(e[0],e[1]);return Nv.fromTimestamp(t)}function Sk(e){var t=e.toTimestamp();return new Bg(t.seconds,t.nanoseconds)}function Ck(e){var t=new Av(e.seconds,e.nanoseconds);return Nv.fromTimestamp(t)}function Ak(e,t){for(var n=(t.baseMutations||[]).map((function(t){return xg(e.Gt,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return xg(e.Gt,t)})),u=Av.fromMillis(t.localWriteTimeMs);return new kk(t.batchId,u,n,o)}function Nk(e){var t,n,r=Ck(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?Ck(e.lastLimboFreeSnapshotVersion):Nv.min();return void 0!==e.query.documents?(lv(1===(n=e.query).documents.length),t=zy(My(yg(n.documents[0])))):t=function(e){return zy(Tg(e))}(e.query),new bk(t,e.targetId,0,e.lastListenSequenceNumber,r,i,jv.fromBase64String(e.resumeToken))}function Rk(e,t){var n,r=Sk(t.snapshotVersion),i=Sk(t.lastLimboFreeSnapshotVersion);n=gy(t.target)?Ig(e.Gt,t.target):Eg(e.Gt,t.target);var a=t.resumeToken.toBase64();return new Xg(t.targetId,yy(t.target),r,a,t.sequenceNumber,i,n)}function Pk(e){var t=Tg({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Wy(t,t.limit,"L"):t}var Ok=function(){function e(){re(this,e)}return ae(e,[{key:"getBundleMetadata",value:function(e,t){return Dk(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:Ck(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return Dk(e).put({bundleId:(n=t).id,createTime:Sk(lg(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return Lk(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:Pk(t.bundledQuery),readTime:Ck(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return Lk(e).put(function(e){return{name:e.name,readTime:Sk(lg(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function Dk(e){return gk(e,nk.store)}function Lk(e){return gk(e,rk.store)}var Mk=function(){function e(){re(this,e),this.zt=new Uk}return ae(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.zt.add(t),uk.resolve()}},{key:"getCollectionParents",value:function(e,t){return uk.resolve(this.zt.getEntries(t))}}]),e}(),Uk=function(){function e(){re(this,e),this.index={}}return ae(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Um(Lv.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Um(Lv.comparator)).toArray()}}]),e}(),Fk=function(){function e(){re(this,e),this.Ht=new Uk}return ae(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Ht.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Ht.add(t)}));var a={collectionId:r,parent:Fg(i)};return jk(e).put(a)}return uk.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Cv(t),""],!1,!0);return jk(e).Bt(r).next((function(e){var r,i=oe(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(qg(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}}]),e}();function jk(e){return gk(e,ek.store)}var Vk={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},qk=function(){function e(t,n,r){re(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return ae(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function Bk(e,t,n){var r=e.store(Hg.store),i=e.store(Kg.store),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.jt({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){lv(1===u)})));var c,l=[],f=oe(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=Kg.key(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return uk.waitFor(a).next((function(){return l}))}function zk(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw cv();t=e.noDocument}return JSON.stringify(t).length}qk.DEFAULT_COLLECTION_PERCENTILE=10,qk.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,qk.DEFAULT=new qk(41943040,qk.DEFAULT_COLLECTION_PERCENTILE,qk.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),qk.DISABLED=new qk(-1,0,0);var Wk=function(){function e(t,n,r,i){re(this,e),this.userId=t,this.k=n,this.Jt=r,this.referenceDelegate=i,this.Yt={}}return ae(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Kk(e).jt({index:Hg.userMutationsIndex,range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=Gk(e),o=Kk(e);return o.add({}).next((function(u){lv("number"==typeof u);var s,c=new kk(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return _g(e.Gt,t)})),i=n.mutations.map((function(t){return _g(e.Gt,t)}));return new Hg(t,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.k,i.userId,c),f=[],h=new Um((function(e,t){return Tv(e.canonicalString(),t.canonicalString())})),d=oe(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=Kg.key(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,Kg.PLACEHOLDER))}}catch(y){d.e(y)}finally{d.f()}return h.forEach((function(t){f.push(i.Jt.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.Yt[u]=c.keys()})),uk.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return Kk(e).get(t).next((function(e){return e?(lv(e.userId===n.userId),Ak(n.k,e)):null}))}},{key:"Zt",value:function(e,t){var n=this;return this.Yt[t]?uk.resolve(this.Yt[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.Yt[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return Kk(e).jt({index:Hg.userMutationsIndex,range:i},(function(e,t,i){t.userId===n.userId&&(lv(t.batchId>=r),a=Ak(n.k,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Kk(e).jt({index:Hg.userMutationsIndex,range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Kk(e).Bt(Hg.userMutationsIndex,n).next((function(e){return e.map((function(e){return Ak(t.k,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=Kg.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Gk(e).jt({range:i},(function(r,i,o){var u=s(r,3),c=u[0],l=u[1],f=u[2],h=qg(l);if(c===n.userId&&t.path.isEqual(h))return Kk(e).get(f).next((function(e){if(!e)throw cv();lv(e.userId===n.userId),a.push(Ak(n.k,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Um(Tv),i=[];return t.forEach((function(t){var a=Kg.prefixForPath(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=Gk(e).jt({range:o},(function(e,i,a){var o=s(e,3),u=o[0],c=o[1],l=o[2],f=qg(c);u===n.userId&&t.path.isEqual(f)?r=r.add(l):a.done()}));i.push(u)})),uk.waitFor(i).next((function(){return n.te(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=Kg.prefixForPath(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new Um(Tv);return Gk(e).jt({range:o},(function(e,t,a){var o=s(e,3),c=o[0],l=o[1],f=o[2],h=qg(l);c===n.userId&&r.isPrefixOf(h)?h.length===i&&(u=u.add(f)):a.done()})).next((function(){return n.te(e,u)}))}},{key:"te",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(Kk(e).get(t).next((function(e){if(null===e)throw cv();lv(e.userId===n.userId),r.push(Ak(n.k,e))})))})),uk.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return Bk(e.Wt,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.ee(t.batchId)})),uk.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"ee",value:function(e){delete this.Yt[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return uk.resolve();var r=IDBKeyRange.lowerBound(Kg.prefixForUser(t.userId)),i=[];return Gk(e).jt({range:r},(function(e,n,r){if(e[0]===t.userId){var a=qg(e[1]);i.push(a)}else r.done()})).next((function(){lv(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return Hk(e,this.userId,t)}},{key:"ne",value:function(e){var t=this;return Qk(e).get(this.userId).next((function(e){return e||new Wg(t.userId,-1,"")}))}}],[{key:"Xt",value:function(t,n,r,i){return lv(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function Hk(e,t,n){var r=Kg.prefixForPath(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return Gk(e).jt({range:a,Kt:!0},(function(e,n,r){var a=s(e,3),u=a[0],c=a[1];a[2];u===t&&c===i&&(o=!0),r.done()})).next((function(){return o}))}function Kk(e){return gk(e,Hg.store)}function Gk(e){return gk(e,Kg.store)}function Qk(e){return gk(e,Wg.store)}var Yk=function(){function e(t){re(this,e),this.se=t}return ae(e,[{key:"next",value:function(){return this.se+=2,this.se}}],[{key:"ie",value:function(){return new e(0)}},{key:"re",value:function(){return new e(-1)}}]),e}(),Jk=function(){function e(t,n){re(this,e),this.referenceDelegate=t,this.k=n}return ae(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.oe(e).next((function(n){var r=new Yk(n.highestTargetId);return n.highestTargetId=r.next(),t.ae(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.oe(e).next((function(e){return Nv.fromTimestamp(new Av(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.oe(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.oe(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.ae(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.ce(e,t).next((function(){return n.oe(e).next((function(r){return r.targetCount+=1,n.ue(t,r),n.ae(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.ce(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return Xk(e).delete(t.targetId)})).next((function(){return n.oe(e)})).next((function(t){return lv(t.targetCount>0),t.targetCount-=1,n.ae(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return Xk(e).jt((function(o,u){var s=Nk(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return uk.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return Xk(e).jt((function(e,n){var r=Nk(n);t(r)}))}},{key:"oe",value:function(e){return $k(e).get(Zg.key).next((function(e){return lv(null!==e),e}))}},{key:"ae",value:function(e,t){return $k(e).put(Zg.key,t)}},{key:"ce",value:function(e,t){return Xk(e).put(Rk(this.k,t))}},{key:"ue",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.oe(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=yy(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Xk(e).jt({range:r,index:Xg.queryTargetsIndexName},(function(e,n,r){var a=Nk(n);my(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=Zk(e);return t.forEach((function(t){var o=Fg(t.path);i.push(a.put(new $g(n,o))),i.push(r.referenceDelegate.addReference(e,n,t))})),uk.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=Zk(e);return uk.forEach(t,(function(t){var a=Fg(t.path);return uk.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=Zk(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Zk(e),i=Km();return r.jt({range:n,Kt:!0},(function(e,t,n){var r=qg(e[1]),a=new Jv(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=Fg(t.path),r=IDBKeyRange.bound([n],[Cv(n)],!1,!0),i=0;return Zk(e).jt({index:$g.documentTargetsIndex,Kt:!0,range:r},(function(e,t,n){var r=s(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"Et",value:function(e,t){return Xk(e).get(t).next((function(e){return e?Nk(e):null}))}}]),e}();function Xk(e){return gk(e,Xg.store)}function $k(e){return gk(e,Zg.store)}function Zk(e){return gk(e,$g.store)}function ew(e){return tw.apply(this,arguments)}function tw(){return tw=Z(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===hv.FAILED_PRECONDITION&&t.message===ak){e.next=2;break}throw t;case 2:av("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),tw.apply(this,arguments)}function nw(e,t){var n=s(e,2),r=n[0],i=n[1],a=s(t,2),o=a[0],u=a[1],c=Tv(r,o);return 0===c?Tv(i,u):c}var rw=function(){function e(t){re(this,e),this.he=t,this.buffer=new Um(nw),this.le=0}return ae(e,[{key:"fe",value:function(){return++this.le}},{key:"de",value:function(e){var t=[e,this.fe()];if(this.buffer.size<this.he)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();nw(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),iw=function(){function e(t,n){re(this,e),this.garbageCollector=t,this.asyncQueue=n,this.we=!1,this._e=null}return ae(e,[{key:"start",value:function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.me(e)}},{key:"stop",value:function(){this._e&&(this._e.cancel(),this._e=null)}},{key:"started",get:function(){return null!==this._e}},{key:"me",value:function(e){var t=this,n=this.we?3e5:6e4;av("LruGarbageCollector","Garbage collection scheduled in ".concat(n,"ms")),this._e=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,Z(te().mark((function n(){return te().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t._e=null,t.we=!0,n.prev=1,n.next=4,e.collectGarbage(t.garbageCollector);case 4:n.next=14;break;case 6:if(n.prev=6,n.t0=n.catch(1),!hk(n.t0)){n.next=12;break}av("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n.t0),n.next=14;break;case 12:return n.next=14,ew(n.t0);case 14:return n.next=16,t.me(e);case 16:case"end":return n.stop()}}),n,null,[[1,6]])}))))}}]),e}(),aw=function(){function e(t,n){re(this,e),this.ge=t,this.params=n}return ae(e,[{key:"calculateTargetCount",value:function(e,t){return this.ge.ye(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return uk.resolve(xv.I);var r=new rw(t);return this.ge.forEachTarget(e,(function(e){return r.de(e.sequenceNumber)})).next((function(){return n.ge.pe(e,(function(e){return r.de(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.ge.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.ge.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(av("LruGarbageCollector","Garbage collection skipped; disabled"),uk.resolve(Vk)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(av("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),Vk):n.Te(e,t)}))}},{key:"getCacheSize",value:function(e){return this.ge.getCacheSize(e)}},{key:"Te",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(av("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),iv()<=Xe.DEBUG&&av("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),uk.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),ow=function(){function e(t,n){re(this,e),this.db=t,this.garbageCollector=function(e,t){return new aw(e,t)}(this,n)}return ae(e,[{key:"ye",value:function(e){var t=this.Ee(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Ee",value:function(e){var t=0;return this.pe(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"pe",value:function(e,t){return this.Ie(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return uw(e,n)}},{key:"removeReference",value:function(e,t,n){return uw(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return uw(e,t)}},{key:"Ae",value:function(e,t){return function(e,t){var n=!1;return Qk(e).Qt((function(r){return Hk(e,r,t).next((function(e){return e&&(n=!0),uk.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Ie(e,(function(o,u){if(u<=t){var s=n.Ae(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o),Zk(e).delete([0,Fg(o.path)])}))}));i.push(s)}})).next((function(){return uk.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return uw(e,t)}},{key:"Ie",value:function(e,t){var n,r=Zk(e),i=xv.I;return r.jt({index:$g.documentTargetsIndex},(function(e,r){var a=s(e,2),o=a[0],u=(a[1],r.path),c=r.sequenceNumber;0===o?(i!==xv.I&&t(new Jv(qg(n)),i),i=c,n=u):i=xv.I})).next((function(){i!==xv.I&&t(new Jv(qg(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function uw(e,t){return Zk(e).put(function(e,t){return new $g(0,Fg(e.path),t)}(t,e.currentSequenceNumber))}var sw=function(){function e(t,n){re(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={}}return ae(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=oe(n);try{for(i.s();!(r=i.n()).done;){var a=s(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(c){i.e(c)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1}},{key:"forEach",value:function(e){Pv(this.inner,(function(t,n){var r,i=oe(n);try{for(i.s();!(r=i.n()).done;){var a=s(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(c){i.e(c)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Ov(this.inner)}}]),e}(),cw=function(){function e(){re(this,e),this.changes=new sw((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return ae(e,[{key:"getReadTime",value:function(e){var t=this.changes.get(e);return t?t.readTime:Nv.min()}},{key:"addEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})}},{key:"removeEntry",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.assertNotApplied(),this.changes.set(e,{document:dy.newInvalidDocument(e),readTime:t})}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?uk.resolve(n.document):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),lw=function(){function e(t,n){re(this,e),this.k=t,this.Jt=n}return ae(e,[{key:"addEntry",value:function(e,t,n){return dw(e).put(pw(t),n)}},{key:"removeEntry",value:function(e,t){var n=dw(e),r=pw(t);return n.delete(r)}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Re(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this;return dw(e).get(pw(t)).next((function(e){return n.Pe(t,e)}))}},{key:"be",value:function(e,t){var n=this;return dw(e).get(pw(t)).next((function(e){return{document:n.Pe(t,e),size:zk(e)}}))}},{key:"getEntries",value:function(e,t){var n=this,r=Vm();return this.ve(e,t,(function(e,t){var i=n.Pe(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Ve",value:function(e,t){var n=this,r=Vm(),i=new Dm(Jv.comparator);return this.ve(e,t,(function(e,t){var a=n.Pe(e,t);r=r.insert(e,a),i=i.insert(e,zk(t))})).next((function(){return{documents:r,Se:i}}))}},{key:"ve",value:function(e,t,n){if(t.isEmpty())return uk.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator(),a=i.getNext();return dw(e).jt({range:r},(function(e,t,r){for(var o=Jv.fromSegments(e);a&&Jv.comparator(a,o)<0;)n(a,null),a=i.getNext();a&&a.isEqual(o)&&(n(a,t),a=i.hasNext()?i.getNext():null),a?r.Lt(a.path.toArray()):r.done()})).next((function(){for(;a;)n(a,null),a=i.hasNext()?i.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){var r=this,i=Vm(),a=t.path.length+1,o={};if(n.isEqual(Nv.min())){var u=t.path.toArray();o.range=IDBKeyRange.lowerBound(u)}else{var s=t.path.toArray(),c=Ek(n);o.range=IDBKeyRange.lowerBound([s,c],!0),o.index=Yg.collectionReadTimeIndex}return dw(e).jt(o,(function(e,n,o){if(e.length===a){var u=xk(r.k,n);t.path.isPrefixOf(u.key.path)?Qy(t,u)&&(i=i.insert(u.key,u)):o.done()}})).next((function(){return i}))}},{key:"newChangeBuffer",value:function(e){return new fw(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return hw(e).get(Jg.key).next((function(e){return lv(!!e),e}))}},{key:"Re",value:function(e,t){return hw(e).put(Jg.key,t)}},{key:"Pe",value:function(e,t){if(t){var n=xk(this.k,t);if(!n.isNoDocument()||!n.version.isEqual(Nv.min()))return n}return dy.newInvalidDocument(e)}}]),e}(),fw=function(e){ce(n,e);var t=pe(n);function n(e,r){var i;return re(this,n),(i=t.call(this)).De=e,i.trackRemovals=r,i.Ce=new sw((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return ae(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Um((function(e,t){return Tv(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Ce.get(a);if(o.document.isValidDocument()){var s=Ik(t.De.k,o.document,t.getReadTime(a));i=i.add(a.path.popLast());var c=zk(s);r+=c-u,n.push(t.De.addEntry(e,a,s))}else if(r-=u,t.trackRemovals){var l=Ik(t.De.k,dy.newNoDocument(a,Nv.min()),t.getReadTime(a));n.push(t.De.addEntry(e,a,l))}else n.push(t.De.removeEntry(e,a))})),i.forEach((function(r){n.push(t.De.Jt.addToCollectionParentIndex(e,r))})),n.push(this.De.updateMetadata(e,r)),uk.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.De.be(e,t).next((function(e){return n.Ce.set(t,e.size),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.De.Ve(e,t).next((function(e){var t=e.documents;return e.Se.forEach((function(e,t){n.Ce.set(e,t)})),t}))}}]),n}(cw);function hw(e){return gk(e,Jg.store)}function dw(e){return gk(e,Yg.store)}function pw(e){return e.path.toArray()}var vw=function(){function e(t){re(this,e),this.k=t}return ae(e,[{key:"Nt",value:function(e,t,n,r){var i=this;lv(n<r&&n>=0&&r<=11);var a=new sk("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore(zg.store)}(e),function(e){e.createObjectStore(Wg.store,{keyPath:Wg.keyPath}),e.createObjectStore(Hg.store,{keyPath:Hg.keyPath,autoIncrement:!0}).createIndex(Hg.userMutationsIndex,Hg.userMutationsKeyPath,{unique:!0}),e.createObjectStore(Kg.store)}(e),yw(e),function(e){e.createObjectStore(Yg.store)}(e));var o=uk.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore($g.store),e.deleteObjectStore(Xg.store),e.deleteObjectStore(Zg.store)}(e),yw(e)),o=o.next((function(){return function(e){var t=e.store(Zg.store),n=new Zg(0,0,Nv.min().toTimestamp(),0);return t.put(Zg.key,n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store(Hg.store).Bt().next((function(n){e.deleteObjectStore(Hg.store),e.createObjectStore(Hg.store,{keyPath:Hg.keyPath,autoIncrement:!0}).createIndex(Hg.userMutationsIndex,Hg.userMutationsKeyPath,{unique:!0});var r=t.store(Hg.store),i=n.map((function(e){return r.put(e)}));return uk.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore(tk.store,{keyPath:tk.keyPath})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Ne(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore(Jg.store)}(e),i.ke(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.xe(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.$e(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e),function(e){var t=e.objectStore(Yg.store);t.createIndex(Yg.readTimeIndex,Yg.readTimeIndexPath,{unique:!1}),t.createIndex(Yg.collectionReadTimeIndex,Yg.collectionReadTimeIndexPath,{unique:!1})}(t)}))),n<10&&r>=10&&(o=o.next((function(){return i.Fe(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore(nk.store,{keyPath:nk.keyPath})}(e),function(e){e.createObjectStore(rk.store,{keyPath:rk.keyPath})}(e)}))),o}},{key:"ke",value:function(e){var t=0;return e.store(Yg.store).jt((function(e,n){t+=zk(n)})).next((function(){var n=new Jg(t);return e.store(Jg.store).put(Jg.key,n)}))}},{key:"Ne",value:function(e){var t=this,n=e.store(Wg.store),r=e.store(Hg.store);return n.Bt().next((function(n){return uk.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Bt(Hg.userMutationsIndex,i).next((function(r){return uk.forEach(r,(function(r){lv(r.userId===n.userId);var i=Ak(t.k,r);return Bk(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"xe",value:function(e){var t=e.store($g.store),n=e.store(Yg.store);return e.store(Zg.store).get(Zg.key).next((function(e){var r=[];return n.jt((function(n,i){var a=new Lv(n),o=function(e){return[0,Fg(e)]}(a);r.push(t.get(o).next((function(n){return n?uk.resolve():function(n){return t.put(new $g(0,Fg(n),e.highestListenSequenceNumber))}(a)})))})).next((function(){return uk.waitFor(r)}))}))}},{key:"$e",value:function(e,t){e.createObjectStore(ek.store,{keyPath:ek.keyPath});var n=t.store(ek.store),r=new Uk,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:Fg(i)})}};return t.store(Yg.store).jt({Kt:!0},(function(e,t){var n=new Lv(e);return i(n.popLast())})).next((function(){return t.store(Kg.store).jt({Kt:!0},(function(e,t){var n=s(e,3),r=(n[0],n[1]),a=(n[2],qg(r));return i(a.popLast())}))}))}},{key:"Fe",value:function(e){var t=this,n=e.store(Xg.store);return n.jt((function(e,r){var i=Nk(r),a=Rk(t.k,i);return n.put(a)}))}}]),e}();function yw(e){e.createObjectStore($g.store,{keyPath:$g.keyPath}).createIndex($g.documentTargetsIndex,$g.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(Xg.store,{keyPath:Xg.keyPath}).createIndex(Xg.queryTargetsIndexName,Xg.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(Zg.store)}var mw="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",gw=function(){function e(t,n,r,i,a,o,u,s,c,l){if(re(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Oe=a,this.window=o,this.document=u,this.Me=c,this.Le=l,this.Be=null,this.Ue=!1,this.isPrimary=!1,this.networkEnabled=!0,this.qe=null,this.inForeground=!1,this.Ke=null,this.je=null,this.Qe=Number.NEGATIVE_INFINITY,this.We=function(e){return Promise.resolve()},!e.bt())throw new dv(hv.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ow(this,i),this.Ge=n+"main",this.k=new _k(s),this.ze=new ck(this.Ge,11,new vw(this.k)),this.He=new Jk(this.referenceDelegate,this.k),this.Jt=new Fk,this.Je=function(e,t){return new lw(e,t)}(this.k,this.Jt),this.Ye=new Ok,this.window&&this.window.localStorage?this.Xe=this.window.localStorage:(this.Xe=null,!1===l&&ov("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return ae(e,[{key:"start",value:function(){var e=this;return this.Ze().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new dv(hv.FAILED_PRECONDITION,mw);return e.tn(),e.en(),e.nn(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.He.getHighestSequenceNumber(t)}))})).then((function(t){e.Be=new xv(t,e.Me)})).then((function(){e.Ue=!0})).catch((function(t){return e.ze&&e.ze.close(),Promise.reject(t)}))}},{key:"sn",value:function(e){var t=this;return this.We=function(){var n=Z(te().mark((function n(r){return te().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ze.xt(function(){var t=Z(te().mark((function t(n){return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Oe.enqueueAndForget(Z(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.Ze();case 4:case"end":return e.stop()}}),e)})))))}},{key:"Ze",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return ww(t).put(new tk(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next((function(){if(e.isPrimary)return e.rn(t).next((function(t){t||(e.isPrimary=!1,e.Oe.enqueueRetryable((function(){return e.We(!1)})))}))})).next((function(){return e.on(t)})).next((function(n){return e.isPrimary&&!n?e.an(t).next((function(){return!1})):!!n&&e.cn(t).next((function(){return!0}))}))})).catch((function(t){if(hk(t))return av("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return av("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Oe.enqueueRetryable((function(){return e.We(t)})),e.isPrimary=t}))}},{key:"rn",value:function(e){var t=this;return kw(e).get(zg.key).next((function(e){return uk.resolve(t.un(e))}))}},{key:"hn",value:function(e){return ww(e).delete(this.clientId)}},{key:"ln",value:function(){var e=Z(te().mark((function e(){var t,n,r,i,a=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.fn(this.Qe,18e5)){e.next=6;break}return this.Qe=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=gk(e,tk.store);return t.Bt().next((function(e){var n=a.dn(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return uk.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.Xe){n=oe(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.Xe.removeItem(this.wn(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"nn",value:function(){var e=this;this.je=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.Ze().then((function(){return e.ln()})).then((function(){return e.nn()}))}))}},{key:"un",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"on",value:function(e){var t=this;return this.Le?uk.resolve(!0):kw(e).get(zg.key).next((function(n){if(null!==n&&t.fn(n.leaseTimestampMs,5e3)&&!t._n(n.ownerId)){if(t.un(n)&&t.networkEnabled)return!0;if(!t.un(n)){if(!n.allowTabSynchronization)throw new dv(hv.FAILED_PRECONDITION,mw);return!1}}return!(!t.networkEnabled||!t.inForeground)||ww(e).Bt().next((function(e){return void 0===t.dn(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&av("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=Z(te().mark((function e(){var t=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Ue=!1,this.mn(),this.je&&(this.je.cancel(),this.je=null),this.gn(),this.yn(),e.next=7,this.ze.runTransaction("shutdown","readwrite",[zg.store,tk.store],(function(e){var n=new mk(e,xv.I);return t.an(n).next((function(){return t.hn(n)}))}));case 7:this.ze.close(),this.pn();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dn",value:function(e,t){var n=this;return e.filter((function(e){return n.fn(e.updateTimeMs,t)&&!n._n(e.clientId)}))}},{key:"Tn",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return ww(t).Bt().next((function(t){return e.dn(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Ue}},{key:"getMutationQueue",value:function(e){return Wk.Xt(e,this.k,this.Jt,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.He}},{key:"getRemoteDocumentCache",value:function(){return this.Je}},{key:"getIndexManager",value:function(){return this.Jt}},{key:"getBundleCache",value:function(){return this.Ye}},{key:"runTransaction",value:function(e,t,n){var r=this;av("IndexedDbPersistence","Starting transaction:",e);var i,a="readonly"===t?"readonly":"readwrite";return this.ze.runTransaction(e,a,ik,(function(a){return i=new mk(a,r.Be?r.Be.next():xv.I),"readwrite-primary"===t?r.rn(i).next((function(e){return!!e||r.on(i)})).next((function(t){if(!t)throw ov("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Oe.enqueueRetryable((function(){return r.We(!1)})),new dv(hv.FAILED_PRECONDITION,ak);return n(i)})).next((function(e){return r.cn(i).next((function(){return e}))})):r.En(i).next((function(){return n(i)}))})).then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"En",value:function(e){var t=this;return kw(e).get(zg.key).next((function(e){if(null!==e&&t.fn(e.leaseTimestampMs,5e3)&&!t._n(e.ownerId)&&!t.un(e)&&!(t.Le||t.allowTabSynchronization&&e.allowTabSynchronization))throw new dv(hv.FAILED_PRECONDITION,mw)}))}},{key:"cn",value:function(e){var t=new zg(this.clientId,this.allowTabSynchronization,Date.now());return kw(e).put(zg.key,t)}},{key:"an",value:function(e){var t=this,n=kw(e);return n.get(zg.key).next((function(e){return t.un(e)?(av("IndexedDbPersistence","Releasing primary lease."),n.delete(zg.key)):uk.resolve()}))}},{key:"fn",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(ov("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"tn",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ke=function(){e.Oe.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.Ze()}))},this.document.addEventListener("visibilitychange",this.Ke),this.inForeground="visible"===this.document.visibilityState)}},{key:"gn",value:function(){this.Ke&&(this.document.removeEventListener("visibilitychange",this.Ke),this.Ke=null)}},{key:"en",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.qe=function(){t.mn(),!Te()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.Oe.enterRestrictedMode(!0),t.Oe.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.qe))}},{key:"yn",value:function(){this.qe&&(this.window.removeEventListener("pagehide",this.qe),this.qe=null)}},{key:"_n",value:function(e){var t;try{var n=null!==(null===(t=this.Xe)||void 0===t?void 0:t.getItem(this.wn(e)));return av("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return ov("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"mn",value:function(){if(this.Xe)try{this.Xe.setItem(this.wn(this.clientId),String(Date.now()))}catch(ef){ov("Failed to set zombie client id.",ef)}}},{key:"pn",value:function(){if(this.Xe)try{this.Xe.removeItem(this.wn(this.clientId))}catch(ef){}}},{key:"wn",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"bt",value:function(){return ck.bt()}}]),e}();function kw(e){return gk(e,zg.store)}function ww(e){return gk(e,tk.store)}function bw(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var _w=ae((function e(t,n){re(this,e),this.progress=t,this.In=n})),xw=function(){function e(t,n,r){re(this,e),this.Je=t,this.An=n,this.Jt=r}return ae(e,[{key:"Rn",value:function(e,t){var n=this;return this.An.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.Pn(e,t,r)}))}},{key:"Pn",value:function(e,t,n){return this.Je.getEntry(e,t).next((function(e){var t,r=oe(n);try{for(r.s();!(t=r.n()).done;){t.value.applyToLocalView(e)}}catch(i){r.e(i)}finally{r.f()}return e}))}},{key:"bn",value:function(e,t){e.forEach((function(e,n){var r,i=oe(t);try{for(i.s();!(r=i.n()).done;){r.value.applyToLocalView(n)}}catch(a){i.e(a)}finally{i.f()}}))}},{key:"vn",value:function(e,t){var n=this;return this.Je.getEntries(e,t).next((function(t){return n.Vn(e,t).next((function(){return t}))}))}},{key:"Vn",value:function(e,t){var n=this;return this.An.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){return n.bn(t,e)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return Jv.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.Sn(e,t.path):qy(t)?this.Dn(e,t,n):this.Cn(e,t,n)}},{key:"Sn",value:function(e,t){return this.Rn(e,new Jv(t)).next((function(e){var t=Bm();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"Dn",value:function(e,t,n){var r=this,i=t.collectionGroup,a=Bm();return this.Jt.getCollectionParents(e,i).next((function(o){return uk.forEach(o,(function(o){var u=function(e,t){return new Dy(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.Cn(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"Cn",value:function(e,t,n){var r,i,a=this;return this.Je.getDocumentsMatchingQuery(e,t,n).next((function(n){return r=n,a.An.getAllMutationBatchesAffectingQuery(e,t)})).next((function(t){return i=t,a.Nn(e,i,r).next((function(e){r=e;var t,n=oe(i);try{for(n.s();!(t=n.n()).done;){var a,o=t.value,u=oe(o.mutations);try{for(u.s();!(a=u.n()).done;){var s=a.value,c=s.key,l=r.get(c);null==l&&(l=dy.newInvalidDocument(c),r=r.insert(c,l)),gm(s,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}}catch(f){u.e(f)}finally{u.f()}}}catch(f){n.e(f)}finally{n.f()}}))})).next((function(){return r.forEach((function(e,n){Qy(t,n)||(r=r.remove(e))})),r}))}},{key:"Nn",value:function(e,t,n){var r,i=Km(),a=oe(t);try{for(a.s();!(r=a.n()).done;){var o,u=oe(r.value.mutations);try{for(u.s();!(o=u.n()).done;){var s=o.value;s instanceof xm&&null===n.get(s.key)&&(i=i.add(s.key))}}catch(l){u.e(l)}finally{u.f()}}}catch(l){a.e(l)}finally{a.f()}var c=n;return this.Je.getEntries(e,i).next((function(e){return e.forEach((function(e,t){t.isFoundDocument()&&(c=c.insert(e,t))})),c}))}}]),e}(),Iw=function(){function e(t,n,r,i){re(this,e),this.targetId=t,this.fromCache=n,this.kn=r,this.xn=i}return ae(e,null,[{key:"$n",value:function(t,n){var r,i=Km(),a=Km(),o=oe(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),Ew=function(){function e(){re(this,e)}return ae(e,[{key:"Fn",value:function(e){this.On=e}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(Nv.min())?this.Mn(e,t):this.On.vn(e,r).next((function(a){var o=i.Ln(t,a);return(Uy(t)||Fy(t))&&i.Bn(t.limitType,o,r,n)?i.Mn(e,t):(iv()<=Xe.DEBUG&&av("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Gy(t)),i.On.getDocumentsMatchingQuery(e,t,n).next((function(e){return o.forEach((function(t){e=e.insert(t.key,t)})),e})))}))}},{key:"Ln",value:function(e,t){var n=new Um(Yy(e));return t.forEach((function(t,r){Qy(e,r)&&(n=n.add(r))})),n}},{key:"Bn",value:function(e,t,n,r){if(n.size!==t.size)return!0;var i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Mn",value:function(e,t){return iv()<=Xe.DEBUG&&av("QueryEngine","Using full collection scan to execute query:",Gy(t)),this.On.getDocumentsMatchingQuery(e,t,Nv.min())}}]),e}(),Tw=function(){function e(t,n,r,i){re(this,e),this.persistence=t,this.Un=n,this.k=i,this.qn=new Dm(Tv),this.Kn=new sw((function(e){return yy(e)}),my),this.jn=Nv.min(),this.An=t.getMutationQueue(r),this.Qn=t.getRemoteDocumentCache(),this.He=t.getTargetCache(),this.Wn=new xw(this.Qn,this.An,this.persistence.getIndexManager()),this.Ye=t.getBundleCache(),this.Un.Fn(this.Wn)}return ae(e,[{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.qn)}))}}]),e}();function Sw(e,t,n,r){return new Tw(e,t,n,r)}function Cw(e,t){return Aw.apply(this,arguments)}function Aw(){return Aw=Z(te().mark((function e(t,n){var r,i,a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=fv(t),i=r.An,a=r.Wn,e.next=4,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.An.getAllMutationBatches(e).next((function(o){return t=o,i=r.persistence.getMutationQueue(n),a=new xw(r.Qn,i,r.persistence.getIndexManager()),i.getAllMutationBatches(e)})).next((function(n){var r,i=[],o=[],u=Km(),s=oe(t);try{for(s.s();!(r=s.n()).done;){var c=r.value;i.push(c.batchId);var l,f=oe(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=oe(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var y,m=oe(v.mutations);try{for(m.s();!(y=m.n()).done;){var g=y.value;u=u.add(g.key)}}catch(k){m.e(k)}finally{m.f()}}}catch(k){p.e(k)}finally{p.f()}return a.vn(e,u).next((function(e){return{Gn:e,removedBatchIds:i,addedBatchIds:o}}))}))}));case 4:return o=e.sent,e.abrupt("return",(r.An=i,r.Wn=a,r.Un.Fn(r.Wn),o));case 6:case"end":return e.stop()}}),e)}))),Aw.apply(this,arguments)}function Nw(e,t){var n=fv(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Qn.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=uk.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);lv(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&r.addEntry(t,n.commitVersion))}))})),o.next((function(){return e.An.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.An.performConsistencyCheck(e)})).next((function(){return n.Wn.vn(e,r)}))}))}function Rw(e){var t=fv(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.He.getLastRemoteSnapshotVersion(e)}))}function Pw(e,t){var n=fv(e),r=t.snapshotVersion,i=n.qn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Qn.newChangeBuffer({trackRemovals:!0});i=n.qn;var o=[];t.targetChanges.forEach((function(t,a){var u=i.get(a);if(u){o.push(n.He.removeMatchingKeys(e,t.removedDocuments,a).next((function(){return n.He.addMatchingKeys(e,t.addedDocuments,a)})));var s=t.resumeToken;if(s.approximateByteSize()>0){var c=u.withResumeToken(s,r).withSequenceNumber(e.currentSequenceNumber);i=i.insert(a,c),function(e,t,n){return lv(t.resumeToken.approximateByteSize()>0),0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(u,c,t)&&o.push(n.He.updateTargetData(e,c))}}}));var u=Vm();if(t.documentUpdates.forEach((function(r,i){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Ow(e,a,t.documentUpdates,r,void 0).next((function(e){u=e}))),!r.isEqual(Nv.min())){var s=n.He.getLastRemoteSnapshotVersion(e).next((function(t){return n.He.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(s)}return uk.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.Wn.Vn(e,u)})).next((function(){return u}))})).then((function(e){return n.qn=i,e}))}function Ow(e,t,n,r,i){var a=Km();return n.forEach((function(e){return a=a.add(e)})),t.getEntries(e,a).next((function(e){var a=Vm();return n.forEach((function(n,o){var u=e.get(n),s=(null==i?void 0:i.get(n))||r;o.isNoDocument()&&o.version.isEqual(Nv.min())?(t.removeEntry(n,s),a=a.insert(n,o)):!u.isValidDocument()||o.version.compareTo(u.version)>0||0===o.version.compareTo(u.version)&&u.hasPendingWrites?(t.addEntry(o,s),a=a.insert(n,o)):av("LocalStore","Ignoring outdated watch update for ",n,". Current version:",u.version," Watch version:",o.version)})),a}))}function Dw(e,t){var n=fv(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.An.getNextMutationBatchAfterBatchId(e,t)}))}function Lw(e,t){var n=fv(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.He.getTargetData(e,t).next((function(i){return i?(r=i,uk.resolve(r)):n.He.allocateTargetId(e).next((function(i){return r=new bk(t,i,0,e.currentSequenceNumber),n.He.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.qn.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.qn=n.qn.insert(e.targetId,e),n.Kn.set(t,e.targetId)),e}))}function Mw(e,t,n){return Uw.apply(this,arguments)}function Uw(){return Uw=Z(te().mark((function e(t,n,r){var i,a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=fv(t),a=i.qn.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),hk(e.t1)){e.next=12;break}throw e.t1;case 12:av("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.qn=i.qn.remove(n),i.Kn.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),Uw.apply(this,arguments)}function Fw(e,t,n){var r=fv(e),i=Nv.min(),a=Km();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=fv(e),i=r.Kn.get(n);return void 0!==i?uk.resolve(r.qn.get(i)):r.He.getTargetData(t,n)}(r,e,zy(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.He.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Un.getDocumentsMatchingQuery(e,t,n?i:Nv.min(),n?a:Km())})).next((function(e){return{documents:e,zn:a}}))}))}function jw(e,t){var n=fv(e),r=fv(n.He),i=n.qn.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.Et(e,t).next((function(e){return e?e.target:null}))}))}function Vw(e){var t=fv(e);return t.persistence.runTransaction("Get new document changes","readonly",(function(e){return function(e,t,n){var r=fv(e),i=Vm(),a=Ek(n),o=dw(t),u=IDBKeyRange.lowerBound(a,!0);return o.jt({index:Yg.readTimeIndex,range:u},(function(e,t){var n=xk(r.k,t);i=i.insert(n.key,n),a=t.readTime})).next((function(){return{In:i,readTime:Tk(a)}}))}(t.Qn,e,t.jn)})).then((function(e){var n=e.In,r=e.readTime;return t.jn=r,n}))}function qw(e){return Bw.apply(this,arguments)}function Bw(){return Bw=Z(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=fv(t),e.abrupt("return",n.persistence.runTransaction("Synchronize last document change read time","readonly",(function(e){return function(e){var t=dw(e),n=Nv.min();return t.jt({index:Yg.readTimeIndex,reverse:!0},(function(e,t,r){t.readTime&&(n=Tk(t.readTime)),r.done()})).next((function(){return n}))}(e)})).then((function(e){n.jn=e})));case 2:case"end":return e.stop()}}),e)}))),Bw.apply(this,arguments)}function zw(e,t,n,r){return Ww.apply(this,arguments)}function Ww(){return Ww=Z(te().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=fv(t),o=Km(),u=Vm(),s=Wm(),c=oe(r);try{for(c.s();!(l=c.n()).done;)f=l.value,h=n.Hn(f.metadata.name),f.document&&(o=o.add(h)),u=u.insert(h,n.Jn(f)),s=s.insert(h,n.Yn(f.metadata.readTime))}catch(v){c.e(v)}finally{c.f()}return d=a.Qn.newChangeBuffer({trackRemovals:!0}),e.next=7,Lw(a,function(e){return zy(My(Lv.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return Ow(e,d,u,Nv.min(),s).next((function(t){return d.apply(e),t})).next((function(t){return a.He.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.He.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.Wn.Vn(e,t)})).next((function(){return t}))}))})));case 9:case"end":return e.stop()}}),e)}))),Ww.apply(this,arguments)}function Hw(e,t){return Kw.apply(this,arguments)}function Kw(){return Kw=Z(te().mark((function e(t,n){var r,i,a,o=arguments;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:Km(),e.next=3,Lw(t,zy(Pk(n.bundledQuery)));case 3:return i=e.sent,a=fv(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=lg(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Ye.saveNamedQuery(e,n);var o=i.withResumeToken(jv.EMPTY_BYTE_STRING,t);return a.qn=a.qn.insert(o.targetId,o),a.He.updateTargetData(e,o).next((function(){return a.He.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.He.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Ye.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),Kw.apply(this,arguments)}var Gw=function(){function e(t){re(this,e),this.k=t,this.Xn=new Map,this.Zn=new Map}return ae(e,[{key:"getBundleMetadata",value:function(e,t){return uk.resolve(this.Xn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Xn.set(t.id,{id:(n=t).id,version:n.version,createTime:lg(n.createTime)}),uk.resolve()}},{key:"getNamedQuery",value:function(e,t){return uk.resolve(this.Zn.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.Zn.set(t.name,function(e){return{name:e.name,query:Pk(e.bundledQuery),readTime:lg(e.readTime)}}(t)),uk.resolve()}}]),e}(),Qw=function(){function e(){re(this,e),this.ts=new Um(Yw.es),this.ns=new Um(Yw.ss)}return ae(e,[{key:"isEmpty",value:function(){return this.ts.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Yw(e,t);this.ts=this.ts.add(n),this.ns=this.ns.add(n)}},{key:"rs",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.os(new Yw(e,t))}},{key:"cs",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"us",value:function(e){var t=this,n=new Jv(new Lv([])),r=new Yw(n,e),i=new Yw(n,e+1),a=[];return this.ns.forEachInRange([r,i],(function(e){t.os(e),a.push(e.key)})),a}},{key:"hs",value:function(){var e=this;this.ts.forEach((function(t){return e.os(t)}))}},{key:"os",value:function(e){this.ts=this.ts.delete(e),this.ns=this.ns.delete(e)}},{key:"ls",value:function(e){var t=new Jv(new Lv([])),n=new Yw(t,e),r=new Yw(t,e+1),i=Km();return this.ns.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new Yw(e,0),n=this.ts.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Yw=function(){function e(t,n){re(this,e),this.key=t,this.fs=n}return ae(e,null,[{key:"es",value:function(e,t){return Jv.comparator(e.key,t.key)||Tv(e.fs,t.fs)}},{key:"ss",value:function(e,t){return Tv(e.fs,t.fs)||Jv.comparator(e.key,t.key)}}]),e}(),Jw=function(){function e(t,n){re(this,e),this.Jt=t,this.referenceDelegate=n,this.An=[],this.ds=1,this.ws=new Um(Yw.es)}return ae(e,[{key:"checkEmpty",value:function(e){return uk.resolve(0===this.An.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.ds;this.ds++,this.An.length>0&&this.An[this.An.length-1];var a=new kk(i,t,n,r);this.An.push(a);var o,u=oe(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.ws=this.ws.add(new Yw(s.key,i)),this.Jt.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return uk.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return uk.resolve(this._s(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.gs(n),i=r<0?0:r;return uk.resolve(this.An.length>i?this.An[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return uk.resolve(0===this.An.length?-1:this.ds-1)}},{key:"getAllMutationBatches",value:function(e){return uk.resolve(this.An.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Yw(t,0),i=new Yw(t,Number.POSITIVE_INFINITY),a=[];return this.ws.forEachInRange([r,i],(function(e){var t=n._s(e.fs);a.push(t)})),uk.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Um(Tv);return t.forEach((function(e){var t=new Yw(e,0),i=new Yw(e,Number.POSITIVE_INFINITY);n.ws.forEachInRange([t,i],(function(e){r=r.add(e.fs)}))})),uk.resolve(this.ys(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Jv.isDocumentKey(i)||(i=i.child(""));var a=new Yw(new Jv(i),0),o=new Um(Tv);return this.ws.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.fs)),!0)}),a),uk.resolve(this.ys(o))}},{key:"ys",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t._s(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;lv(0===this.ps(t.batchId,"removed")),this.An.shift();var r=this.ws;return uk.forEach(t.mutations,(function(i){var a=new Yw(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.ws=r}))}},{key:"ee",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Yw(t,0),r=this.ws.firstAfterOrEqual(n);return uk.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.An.length,uk.resolve()}},{key:"ps",value:function(e,t){return this.gs(e)}},{key:"gs",value:function(e){return 0===this.An.length?0:e-this.An[0].batchId}},{key:"_s",value:function(e){var t=this.gs(e);return t<0||t>=this.An.length?null:this.An[t]}}]),e}(),Xw=function(){function e(t,n){re(this,e),this.Jt=t,this.Ts=n,this.docs=new Dm(Jv.comparator),this.size=0}return ae(e,[{key:"addEntry",value:function(e,t,n){var r=t.key,i=this.docs.get(r),a=i?i.size:0,o=this.Ts(t);return this.docs=this.docs.insert(r,{document:t.clone(),size:o,readTime:n}),this.size+=o-a,this.Jt.addToCollectionParentIndex(e,r.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return uk.resolve(n?n.document.clone():dy.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Vm();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.clone():dy.newInvalidDocument(e))})),uk.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){for(var r=Vm(),i=new Jv(t.path.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value,c=s.document,l=s.readTime;if(!t.path.isPrefixOf(u.path))break;l.compareTo(n)<=0||Qy(t,c)&&(r=r.insert(c.key,c.clone()))}return uk.resolve(r)}},{key:"Es",value:function(e,t){return uk.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new $w(this)}},{key:"getSize",value:function(e){return uk.resolve(this.size)}}]),e}(),$w=function(e){ce(n,e);var t=pe(n);function n(e){var r;return re(this,n),(r=t.call(this)).De=e,r}return ae(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(t.De.addEntry(e,i.document,t.getReadTime(r))):t.De.removeEntry(r)})),uk.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.De.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.De.getEntries(e,t)}}]),n}(cw),Zw=function(){function e(t){re(this,e),this.persistence=t,this.Is=new sw((function(e){return yy(e)}),my),this.lastRemoteSnapshotVersion=Nv.min(),this.highestTargetId=0,this.As=0,this.Rs=new Qw,this.targetCount=0,this.Ps=Yk.ie()}return ae(e,[{key:"forEachTarget",value:function(e,t){return this.Is.forEach((function(e,n){return t(n)})),uk.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return uk.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return uk.resolve(this.As)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Ps.next(),uk.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.As&&(this.As=t),uk.resolve()}},{key:"ce",value:function(e){this.Is.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Ps=new Yk(t),this.highestTargetId=t),e.sequenceNumber>this.As&&(this.As=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.ce(t),this.targetCount+=1,uk.resolve()}},{key:"updateTargetData",value:function(e,t){return this.ce(t),uk.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Is.delete(t.target),this.Rs.us(t.targetId),this.targetCount-=1,uk.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Is.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Is.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),uk.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return uk.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Is.get(t)||null;return uk.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Rs.rs(t,n),uk.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Rs.cs(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),uk.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Rs.us(t),uk.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Rs.ls(t);return uk.resolve(n)}},{key:"containsKey",value:function(e,t){return uk.resolve(this.Rs.containsKey(t))}}]),e}(),eb=function(){function e(t,n){var r=this;re(this,e),this.bs={},this.Be=new xv(0),this.Ue=!1,this.Ue=!0,this.referenceDelegate=t(this),this.He=new Zw(this),this.Jt=new Mk,this.Je=function(e,t){return new Xw(e,(function(e){return r.referenceDelegate.vs(e)}))}(this.Jt),this.k=new _k(n),this.Ye=new Gw(this.k)}return ae(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Ue=!1,Promise.resolve()}},{key:"started",get:function(){return this.Ue}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(){return this.Jt}},{key:"getMutationQueue",value:function(e){var t=this.bs[e.toKey()];return t||(t=new Jw(this.Jt,this.referenceDelegate),this.bs[e.toKey()]=t),t}},{key:"getTargetCache",value:function(){return this.He}},{key:"getRemoteDocumentCache",value:function(){return this.Je}},{key:"getBundleCache",value:function(){return this.Ye}},{key:"runTransaction",value:function(e,t,n){var r=this;av("MemoryPersistence","Starting transaction:",e);var i=new tb(this.Be.next());return this.referenceDelegate.Vs(),n(i).next((function(e){return r.referenceDelegate.Ss(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ds",value:function(e,t){return uk.or(Object.values(this.bs).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),tb=function(e){ce(n,e);var t=pe(n);function n(e){var r;return re(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return ae(n)}(ok),nb=function(){function e(t){re(this,e),this.persistence=t,this.Cs=new Qw,this.Ns=null}return ae(e,[{key:"xs",get:function(){if(this.Ns)return this.Ns;throw cv()}},{key:"addReference",value:function(e,t,n){return this.Cs.addReference(n,t),this.xs.delete(n.toString()),uk.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Cs.removeReference(n,t),this.xs.add(n.toString()),uk.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.xs.add(t.toString()),uk.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Cs.us(t.targetId).forEach((function(e){return n.xs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.xs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Vs",value:function(){this.Ns=new Set}},{key:"Ss",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return uk.forEach(this.xs,(function(r){var i=Jv.fromPath(r);return t.$s(e,i).next((function(e){e||n.removeEntry(i)}))})).next((function(){return t.Ns=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.$s(e,t).next((function(e){e?n.xs.delete(t.toString()):n.xs.add(t.toString())}))}},{key:"vs",value:function(e){return 0}},{key:"$s",value:function(e,t){var n=this;return uk.or([function(){return uk.resolve(n.Cs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ds(e,t)}])}}],[{key:"ks",value:function(t){return new e(t)}}]),e}();function rb(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function ib(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function ab(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var ob=function(){function e(t,n,r,i){re(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return ae(e,[{key:"Os",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Fs",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new dv(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(ov("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),ub=function(){function e(t,n,r){re(this,e),this.targetId=t,this.state=n,this.error=r}return ae(e,[{key:"Os",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Fs",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new dv(i.error.code,i.error.message))),a?new e(t,i.state,r):(ov("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),sb=function(){function e(t,n){re(this,e),this.clientId=t,this.activeTargetIds=n}return ae(e,null,[{key:"Fs",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Qm(),o=0;i&&o<r.activeTargetIds.length;++o)i=Yv(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(ov("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),cb=function(){function e(t,n){re(this,e),this.clientId=t,this.onlineState=n}return ae(e,null,[{key:"Fs",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(ov("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),lb=function(){function e(){re(this,e),this.activeTargetIds=Qm()}return ae(e,[{key:"Ms",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Ls",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Os",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),fb=function(){function e(t,n,r,i,a){re(this,e),this.window=t,this.Oe=n,this.persistenceKey=r,this.Bs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Us=this.qs.bind(this),this.Ks=new Dm(Tv),this.started=!1,this.js=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.Qs=rb(this.persistenceKey,this.Bs),this.Ws=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.Ks=this.Ks.insert(this.Bs,new lb),this.Gs=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.zs=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.Hs=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.Js=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Ys=function(e){return"firestore_bundle_loaded_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.Us)}return ae(e,[{key:"start",value:function(){var e=Z(te().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Tn();case 2:t=e.sent,n=oe(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.Bs){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(rb(this.persistenceKey,i)))&&(o=sb.Fs(i,a))&&(this.Ks=this.Ks.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.Xs(),(u=this.storage.getItem(this.Js))&&(s=this.Zs(u))&&this.ti(s),c=oe(this.js);try{for(c.s();!(l=c.n()).done;)f=l.value,this.qs(f)}catch(d){c.e(d)}finally{c.f()}this.js=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.Ws,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.ei(this.Ks)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.Ks.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.ni(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.ni(e,t,n),this.si(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(ab(this.persistenceKey,e));if(n){var r=ub.Fs(e,n);r&&(t=r.state)}}return this.ii.Ms(e),this.Xs(),t}},{key:"removeLocalQueryTarget",value:function(e){this.ii.Ls(e),this.Xs()}},{key:"isLocalQueryTarget",value:function(e){return this.ii.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(ab(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.ri(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.si(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.oi(e)}},{key:"notifyBundleLoaded",value:function(){this.ai()}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.Us),this.removeItem(this.Qs),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return av("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){av("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){av("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"qs",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(av("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Qs)return void ov("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable(Z(te().mark((function e(){var r,i,a,o,u,s;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=41;break}if(null===n.key){e.next=39;break}if(!t.Gs.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.ci(n.key),e.abrupt("return",t.ui(r,null));case 6:if(!(i=t.hi(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.ui(i.clientId,i));case 9:e.next=39;break;case 11:if(!t.zs.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.li(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.fi(a));case 16:e.next=39;break;case 18:if(!t.Hs.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.di(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.wi(o));case 23:e.next=39;break;case 25:if(n.key!==t.Js){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.Zs(n.newValue))){e.next=30;break}return e.abrupt("return",t.ti(u));case 30:e.next=39;break;case 32:if(n.key!==t.Ws){e.next=37;break}s=function(e){var t=xv.I;if(null!=e)try{var n=JSON.parse(e);lv("number"==typeof n),t=n}catch(e){ov("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==xv.I&&t.sequenceNumberHandler(s),e.next=39;break;case 37:if(n.key!==t.Ys){e.next=39;break}return e.abrupt("return",t.syncEngine._i());case 39:e.next=42;break;case 41:t.js.push(n);case 42:case"end":return e.stop()}}),e)}))))}}},{key:"ii",get:function(){return this.Ks.get(this.Bs)}},{key:"Xs",value:function(){this.setItem(this.Qs,this.ii.Os())}},{key:"ni",value:function(e,t,n){var r=new ob(this.currentUser,e,t,n),i=ib(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Os())}},{key:"si",value:function(e){var t=ib(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"oi",value:function(e){var t={clientId:this.Bs,onlineState:e};this.storage.setItem(this.Js,JSON.stringify(t))}},{key:"ri",value:function(e,t,n){var r=ab(this.persistenceKey,e),i=new ub(e,t,n);this.setItem(r,i.Os())}},{key:"ai",value:function(){this.setItem(this.Ys,"value-not-used")}},{key:"ci",value:function(e){var t=this.Gs.exec(e);return t?t[1]:null}},{key:"hi",value:function(e,t){var n=this.ci(e);return sb.Fs(n,t)}},{key:"li",value:function(e,t){var n=this.zs.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return ob.Fs(new tv(i),r,t)}},{key:"di",value:function(e,t){var n=this.Hs.exec(e),r=Number(n[1]);return ub.Fs(r,t)}},{key:"Zs",value:function(e){return cb.Fs(e)}},{key:"fi",value:function(){var e=Z(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.mi(t.batchId,t.state,t.error));case 2:av("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"wi",value:function(e){return this.syncEngine.gi(e.targetId,e.state,e.error)}},{key:"ui",value:function(e,t){var n=this,r=t?this.Ks.insert(e,t):this.Ks.remove(e),i=this.ei(this.Ks),a=this.ei(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.yi(o,u).then((function(){n.Ks=r}))}},{key:"ti",value:function(e){this.Ks.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"ei",value:function(e){var t=Qm();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"bt",value:function(e){return!(!e||!e.localStorage)}}]),e}(),hb=function(){function e(){re(this,e),this.pi=new lb,this.Ti={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return ae(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.pi.Ms(e),this.Ti[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Ti[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.pi.Ls(e)}},{key:"isLocalQueryTarget",value:function(e){return this.pi.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Ti[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.pi.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.pi.activeTargetIds.has(e)}},{key:"start",value:function(){return this.pi=new lb,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(){}}]),e}(),db=function(){function e(){re(this,e)}return ae(e,[{key:"Ei",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),pb=function(){function e(){var t=this;re(this,e),this.Ii=function(){return t.Ai()},this.Ri=function(){return t.Pi()},this.bi=[],this.vi()}return ae(e,[{key:"Ei",value:function(e){this.bi.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Ii),window.removeEventListener("offline",this.Ri)}},{key:"vi",value:function(){window.addEventListener("online",this.Ii),window.addEventListener("offline",this.Ri)}},{key:"Ai",value:function(){av("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=oe(this.bi);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Pi",value:function(){av("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=oe(this.bi);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"bt",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),vb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},yb=function(){function e(t){re(this,e),this.Vi=t.Vi,this.Si=t.Si}return ae(e,[{key:"Di",value:function(e){this.Ci=e}},{key:"Ni",value:function(e){this.ki=e}},{key:"onMessage",value:function(e){this.xi=e}},{key:"close",value:function(){this.Si()}},{key:"send",value:function(e){this.Vi(e)}},{key:"$i",value:function(){this.Ci()}},{key:"Fi",value:function(e){this.ki(e)}},{key:"Oi",value:function(e){this.xi(e)}}]),e}(),mb=function(e){ce(n,e);var t=pe(n);function n(e){var r;return re(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return ae(n,[{key:"Ki",value:function(e,t,n,r){return new Promise((function(i,a){var o=new Zp;o.listenOnce(Qp.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case Gp.NO_ERROR:var t=o.getResponseJson();av("Connection","XHR received:",JSON.stringify(t)),i(t);break;case Gp.TIMEOUT:av("Connection",'RPC "'+e+'" timed out'),a(new dv(hv.DEADLINE_EXCEEDED,"Request time out"));break;case Gp.HTTP_ERROR:var n=o.getStatus();if(av("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var u=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(hv).indexOf(t)>=0?t:hv.UNKNOWN}(r.status);a(new dv(u,r.message))}else a(new dv(hv.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new dv(hv.UNAVAILABLE,"Connection failed."));break;default:cv()}}finally{av("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"Qi",value:function(e,t,n){var r=[this.Mi,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Hp(),a=Kp(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Xp({})),this.qi(o.initMessageHeaders,t,n),Ee()||Ce()||Ie().indexOf("Electron/")>=0||Ae()||Ie().indexOf("MSAppHost/")>=0||Se()||(o.httpHeadersOverwriteParam="$httpHeaders");var u=r.join("");av("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,f=new yb({Vi:function(e){l?av("Connection","Not sending because WebChannel is closed:",e):(c||(av("Connection","Opening WebChannel transport."),s.open(),c=!0),av("Connection","WebChannel sending:",e),s.send(e))},Si:function(){return s.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(s,$p.EventType.OPEN,(function(){l||av("Connection","WebChannel transport opened.")})),h(s,$p.EventType.CLOSE,(function(){l||(l=!0,av("Connection","WebChannel transport closed"),f.Fi())})),h(s,$p.EventType.ERROR,(function(e){l||(l=!0,uv("Connection","WebChannel transport errored:",e),f.Fi(new dv(hv.UNAVAILABLE,"The operation could not be completed")))})),h(s,$p.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];lv(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){av("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=Sm[e];if(void 0!==t)return Om(t)}(a),u=i.message;void 0===o&&(o=hv.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,f.Fi(new dv(o,u)),s.close()}else av("Connection","WebChannel received:",n),f.Oi(n)}})),h(a,Yp.STAT_EVENT,(function(e){e.stat===Jp.PROXY?av("Connection","Detected buffering proxy"):e.stat===Jp.NOPROXY&&av("Connection","Detected no buffering proxy")})),setTimeout((function(){f.$i()}),0),f}}]),n}(function(){function e(t){re(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.Mi=n+"://"+t.host,this.Li="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return ae(e,[{key:"Bi",value:function(e,t,n,r,i){var a=this.Ui(e,t);av("RestConnection","Sending: ",a,n);var o={};return this.qi(o,r,i),this.Ki(e,a,o,n).then((function(e){return av("RestConnection","Received: ",e),e}),(function(t){throw uv("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"ji",value:function(e,t,n,r,i){return this.Bi(e,t,n,r,i)}},{key:"qi",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+nv,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"Ui",value:function(e,t){var n=vb[e];return"".concat(this.Mi,"/v1/").concat(t,":").concat(n)}}]),e}());function gb(){return"undefined"!=typeof window?window:null}function kb(){return"undefined"!=typeof document?document:null}function wb(e){return new og(e,!0)}var bb=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;re(this,e),this.Oe=t,this.timerId=n,this.Wi=r,this.Gi=i,this.zi=a,this.Hi=0,this.Ji=null,this.Yi=Date.now(),this.reset()}return ae(e,[{key:"reset",value:function(){this.Hi=0}},{key:"Xi",value:function(){this.Hi=this.zi}},{key:"Zi",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Hi+this.tr()),r=Math.max(0,Date.now()-this.Yi),i=Math.max(0,n-r);i>0&&av("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Hi," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Ji=this.Oe.enqueueAfterDelay(this.timerId,i,(function(){return t.Yi=Date.now(),e()})),this.Hi*=this.Gi,this.Hi<this.Wi&&(this.Hi=this.Wi),this.Hi>this.zi&&(this.Hi=this.zi)}},{key:"er",value:function(){null!==this.Ji&&(this.Ji.skipDelay(),this.Ji=null)}},{key:"cancel",value:function(){null!==this.Ji&&(this.Ji.cancel(),this.Ji=null)}},{key:"tr",value:function(){return(Math.random()-.5)*this.Hi}}]),e}(),_b=function(){function e(t,n,r,i,a,o,u,s){re(this,e),this.Oe=t,this.nr=r,this.sr=i,this.ir=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.rr=0,this.ar=null,this.cr=null,this.stream=null,this.ur=new bb(t,n)}return ae(e,[{key:"hr",value:function(){return 1===this.state||5===this.state||this.lr()}},{key:"lr",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.dr()}},{key:"stop",value:function(){var e=Z(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.hr(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"wr",value:function(){this.state=0,this.ur.reset()}},{key:"_r",value:function(){var e=this;this.lr()&&null===this.ar&&(this.ar=this.Oe.enqueueAfterDelay(this.nr,6e4,(function(){return e.mr()})))}},{key:"gr",value:function(e){this.yr(),this.stream.send(e)}},{key:"mr",value:function(){var e=Z(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.lr()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"yr",value:function(){this.ar&&(this.ar.cancel(),this.ar=null)}},{key:"pr",value:function(){this.cr&&(this.cr.cancel(),this.cr=null)}},{key:"close",value:function(){var e=Z(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.yr(),this.pr(),this.ur.cancel(),this.rr++,4!==t?this.ur.reset():n&&n.code===hv.RESOURCE_EXHAUSTED?(ov(n.toString()),ov("Using maximum backoff delay to prevent overloading the backend."),this.ur.Xi()):n&&n.code===hv.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Tr(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Ni(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Tr",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Er(this.rr),n=this.rr;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=s(t,2),i=r[0],a=r[1];e.rr===n&&e.Ir(i,a)}),(function(n){t((function(){var t=new dv(hv.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Ar(t)}))}))}},{key:"Ir",value:function(e,t){var n=this,r=this.Er(this.rr);this.stream=this.Rr(e,t),this.stream.Di((function(){r((function(){return n.state=2,n.cr=n.Oe.enqueueAfterDelay(n.sr,1e4,(function(){return n.lr()&&(n.state=3),Promise.resolve()})),n.listener.Di()}))})),this.stream.Ni((function(e){r((function(){return n.Ar(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"dr",value:function(){var e=this;this.state=5,this.ur.Zi(Z(te().mark((function t(){return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"Ar",value:function(e){return av("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Er",value:function(e){var t=this;return function(n){t.Oe.enqueueAndForget((function(){return t.rr===e?n():(av("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),xb=function(e){ce(n,e);var t=pe(n);function n(e,r,i,a,o,u){var s;return re(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).k=o,s}return ae(n,[{key:"Rr",value:function(e,t){return this.ir.Qi("Listen",e,t)}},{key:"onMessage",value:function(e){this.ur.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:cv()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.C?(lv(void 0===t||"string"==typeof t),jv.fromBase64String(t||"")):(lv(void 0===t||t instanceof Uint8Array),jv.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?hv.UNKNOWN:Om(e.code);return new dv(t,e.message||"")}(o);n=new Zm(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=pg(e,s.document.name),l=lg(s.document.updateTime),f=new fy({mapValue:{fields:s.document.fields}}),h=dy.newFoundDocument(c,l,f),d=s.targetIds||[],p=s.removedTargetIds||[];n=new Xm(d,p,h.key,h)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var y=pg(e,v.document),m=v.readTime?lg(v.readTime):Nv.min(),g=dy.newNoDocument(y,m),k=v.removedTargetIds||[];n=new Xm([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var b=pg(e,w.document),_=w.removedTargetIds||[];n=new Xm([],_,b,null)}else{if(!("filter"in t))return cv();t.filter;var x=t.filter;x.targetId;var I=x.count||0,E=new Rm(I),T=x.targetId;n=new $m(T,E)}return n}(this.k,e),n=function(e){if(!("targetChange"in e))return Nv.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Nv.min():t.readTime?lg(t.readTime):Nv.min()}(e);return this.listener.Pr(t,n)}},{key:"br",value:function(e){var t={};t.database=mg(this.k),t.addTarget=function(e,t){var n,r=t.target;return(n=gy(r)?{documents:Ig(e,r)}:{query:Eg(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=sg(e,t.resumeToken):t.snapshotVersion.compareTo(Nv.min())>0&&(n.readTime=ug(e,t.snapshotVersion.toTimestamp())),n}(this.k,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return cv()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.k,e);n&&(t.labels=n),this.gr(t)}},{key:"vr",value:function(e){var t={};t.database=mg(this.k),t.removeTarget=e,this.gr(t)}}]),n}(_b),Ib=function(e){ce(n,e);var t=pe(n);function n(e,r,i,a,o,u){var s;return re(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).k=o,s.Vr=!1,s}return ae(n,[{key:"Sr",get:function(){return this.Vr}},{key:"start",value:function(){this.Vr=!1,this.lastStreamToken=void 0,Ar(le(n.prototype),"start",this).call(this)}},{key:"Tr",value:function(){this.Vr&&this.Dr([])}},{key:"Rr",value:function(e,t){return this.ir.Qi("Write",e,t)}},{key:"onMessage",value:function(e){if(lv(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Vr){this.ur.reset();var t=function(e,t){return e&&e.length>0?(lv(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?lg(e.updateTime):lg(t);return n.isEqual(Nv.min())&&(n=lg(t)),new dm(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=lg(e.commitTime);return this.listener.Cr(n,t)}return lv(!e.writeResults||0===e.writeResults.length),this.Vr=!0,this.listener.Nr()}},{key:"kr",value:function(){var e={};e.database=mg(this.k),this.gr(e)}},{key:"Dr",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return _g(t.k,e)}))};this.gr(n)}}]),n}(_b),Eb=function(e){ce(n,e);var t=pe(n);function n(e,r,i,a){var o;return re(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.ir=i,o.k=a,o.$r=!1,o}return ae(n,[{key:"Fr",value:function(){if(this.$r)throw new dv(hv.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"Bi",value:function(e,t,n){var r=this;return this.Fr(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=s(i,2),o=a[0],u=a[1];return r.ir.Bi(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===hv.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new dv(hv.UNKNOWN,e.toString())}))}},{key:"ji",value:function(e,t,n){var r=this;return this.Fr(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=s(i,2),o=a[0],u=a[1];return r.ir.ji(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===hv.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new dv(hv.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.$r=!0}}]),n}(function(){return ae((function e(){re(this,e)}))}()),Tb=function(){function e(t,n){re(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.Or=0,this.Mr=null,this.Lr=!0}return ae(e,[{key:"Br",value:function(){var e=this;0===this.Or&&(this.Ur("Unknown"),this.Mr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.Mr=null,e.qr("Backend didn't respond within 10 seconds."),e.Ur("Offline"),Promise.resolve()})))}},{key:"Kr",value:function(e){"Online"===this.state?this.Ur("Unknown"):(this.Or++,this.Or>=1&&(this.jr(),this.qr("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.Ur("Offline")))}},{key:"set",value:function(e){this.jr(),this.Or=0,"Online"===e&&(this.Lr=!1),this.Ur(e)}},{key:"Ur",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"qr",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.Lr?(ov(t),this.Lr=!1):av("OnlineStateTracker",t)}},{key:"jr",value:function(){null!==this.Mr&&(this.Mr.cancel(),this.Mr=null)}}]),e}(),Sb=ae((function e(t,n,r,i,a){var o=this;re(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Qr=[],this.Wr=new Map,this.Gr=new Set,this.zr=[],this.Hr=a,this.Hr.Ei((function(e){r.enqueueAndForget(Z(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Fb(o),!e.t0){e.next=5;break}return av("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=Z(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=fv(t)).Gr.add(4),e.next=4,Nb(n);case 4:return n.Jr.set("Unknown"),n.Gr.delete(4),e.next=8,Cb(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.Jr=new Tb(r,i)}));function Cb(e){return Ab.apply(this,arguments)}function Ab(){return Ab=Z(te().mark((function e(t){var n,r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Fb(t)){e.next=18;break}n=oe(t.zr),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),Ab.apply(this,arguments)}function Nb(e){return Rb.apply(this,arguments)}function Rb(){return Rb=Z(te().mark((function e(t){var n,r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=oe(t.zr),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),Rb.apply(this,arguments)}function Pb(e,t){var n=fv(e);n.Wr.has(t.targetId)||(n.Wr.set(t.targetId,t),Ub(n)?Mb(n):f_(n).lr()&&Db(n,t))}function Ob(e,t){var n=fv(e),r=f_(n);n.Wr.delete(t),r.lr()&&Lb(n,t),0===n.Wr.size&&(r.lr()?r._r():Fb(n)&&n.Jr.set("Unknown"))}function Db(e,t){e.Yr.X(t.targetId),f_(e).br(t)}function Lb(e,t){e.Yr.X(t),f_(e).vr(t)}function Mb(e){e.Yr=new tg({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},Et:function(t){return e.Wr.get(t)||null}}),f_(e).start(),e.Jr.Br()}function Ub(e){return Fb(e)&&!f_(e).hr()&&e.Wr.size>0}function Fb(e){return 0===fv(e).Gr.size}function jb(e){e.Yr=void 0}function Vb(e){return qb.apply(this,arguments)}function qb(){return qb=Z(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.Wr.forEach((function(e,n){Db(t,e)}));case 1:case"end":return e.stop()}}),e)}))),qb.apply(this,arguments)}function Bb(e,t){return zb.apply(this,arguments)}function zb(){return zb=Z(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:jb(t),Ub(t)?(t.Jr.Kr(n),Mb(t)):t.Jr.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),zb.apply(this,arguments)}function Wb(e,t,n){return Hb.apply(this,arguments)}function Hb(){return Hb=Z(te().mark((function e(t,n,r){var i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.Jr.set("Online"),!(n instanceof Zm&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=Z(te().mark((function e(t,n){var r,i,a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=oe(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.Wr.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.Wr.delete(o),t.Yr.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),av("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,Kb(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof Xm?t.Yr.ot(n):n instanceof $m?t.Yr.dt(n):t.Yr.ut(n),r.isEqual(Nv.min())){e.next=29;break}return e.prev=14,e.next=17,Rw(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.Yr.gt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.Wr.get(r);i&&e.Wr.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.Wr.get(t);if(n){e.Wr.set(t,n.withResumeToken(jv.EMPTY_BYTE_STRING,n.snapshotVersion)),Lb(e,t);var r=new bk(n.target,t,1,n.sequenceNumber);Db(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),av("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,Kb(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),Hb.apply(this,arguments)}function Kb(e,t,n){return Gb.apply(this,arguments)}function Gb(){return Gb=Z(te().mark((function e(t,n,r){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(hk(n)){e.next=2;break}throw n;case 2:return t.Gr.add(1),e.next=5,Nb(t);case 5:t.Jr.set("Offline"),r||(r=function(){return Rw(t.localStore)}),t.asyncQueue.enqueueRetryable(Z(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return av("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.Gr.delete(1),e.next=6,Cb(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),Gb.apply(this,arguments)}function Qb(e,t){return t().catch((function(n){return Kb(e,n,t)}))}function Yb(e){return Jb.apply(this,arguments)}function Jb(){return Jb=Z(te().mark((function e(t){var n,r,i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=fv(t),r=h_(n),i=n.Qr.length>0?n.Qr[n.Qr.length-1].batchId:-1;case 2:if(!Xb(n)){e.next=19;break}return e.prev=3,e.next=6,Dw(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.Qr.length&&r._r(),e.abrupt("break",19);case 10:i=a.batchId,$b(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Kb(n,e.t0);case 17:e.next=2;break;case 19:Zb(n)&&e_(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),Jb.apply(this,arguments)}function Xb(e){return Fb(e)&&e.Qr.length<10}function $b(e,t){e.Qr.push(t);var n=h_(e);n.lr()&&n.Sr&&n.Dr(t.mutations)}function Zb(e){return Fb(e)&&!h_(e).hr()&&e.Qr.length>0}function e_(e){h_(e).start()}function t_(e){return n_.apply(this,arguments)}function n_(){return n_=Z(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h_(t).kr();case 1:case"end":return e.stop()}}),e)}))),n_.apply(this,arguments)}function r_(e){return i_.apply(this,arguments)}function i_(){return i_=Z(te().mark((function e(t){var n,r,i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=h_(t),r=oe(t.Qr);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Dr(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),i_.apply(this,arguments)}function a_(e,t,n){return o_.apply(this,arguments)}function o_(){return o_=Z(te().mark((function e(t,n,r){var i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.Qr.shift(),a=wk.from(i,n,r),e.next=3,Qb(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,Yb(t);case 5:case"end":return e.stop()}}),e)}))),o_.apply(this,arguments)}function u_(e,t){return s_.apply(this,arguments)}function s_(){return s_=Z(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&h_(t).Sr,!e.t0){e.next=4;break}return e.next=4,function(){var e=Z(te().mark((function e(t,n){var r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Pm(i=n.code)||i===hv.ABORTED){e.next=7;break}return r=t.Qr.shift(),h_(t).wr(),e.next=5,Qb(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,Yb(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:Zb(t)&&e_(t);case 5:case"end":return e.stop()}}),e)}))),s_.apply(this,arguments)}function c_(e,t){return l_.apply(this,arguments)}function l_(){return l_=Z(te().mark((function e(t,n){var r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=fv(t),!n){e.next=7;break}return r.Gr.delete(2),e.next=5,Cb(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.Gr.add(2),e.next=12,Nb(r);case 12:r.Jr.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),l_.apply(this,arguments)}function f_(e){return e.Xr||(e.Xr=function(e,t,n){var r=fv(e);return r.Fr(),new xb(t,r.ir,r.authCredentials,r.appCheckCredentials,r.k,n)}(e.datastore,e.asyncQueue,{Di:Vb.bind(null,e),Ni:Bb.bind(null,e),Pr:Wb.bind(null,e)}),e.zr.push(function(){var t=Z(te().mark((function t(n){return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.Xr.wr(),Ub(e)?Mb(e):e.Jr.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.Xr.stop();case 6:jb(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Xr}function h_(e){return e.Zr||(e.Zr=function(e,t,n){var r=fv(e);return r.Fr(),new Ib(t,r.ir,r.authCredentials,r.appCheckCredentials,r.k,n)}(e.datastore,e.asyncQueue,{Di:t_.bind(null,e),Ni:u_.bind(null,e),Nr:r_.bind(null,e),Cr:a_.bind(null,e)}),e.zr.push(function(){var t=Z(te().mark((function t(n){return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Zr.wr(),t.next=4,Yb(e);case 4:t.next=9;break;case 6:return t.next=8,e.Zr.stop();case 8:e.Qr.length>0&&(av("RemoteStore","Stopping write stream with ".concat(e.Qr.length," pending writes")),e.Qr=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Zr}var d_=function(){function e(t,n,r,i,a){re(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new pv,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return ae(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new dv(hv.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function p_(e,t){if(ov("AsyncQueue","".concat(t,": ").concat(e)),hk(e))return new dv(hv.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var v_=function(){function e(t){re(this,e),this.comparator=t?function(e,n){return t(e,n)||Jv.comparator(e.key,n.key)}:function(e,t){return Jv.comparator(e.key,t.key)},this.keyedMap=Bm(),this.sortedSet=new Dm(this.comparator)}return ae(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),y_=function(){function e(){re(this,e),this.eo=new Dm(Jv.comparator)}return ae(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.eo.get(t);n?0!==e.type&&3===n.type?this.eo=this.eo.insert(t,e):3===e.type&&1!==n.type?this.eo=this.eo.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.eo=this.eo.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.eo=this.eo.remove(t):1===e.type&&2===n.type?this.eo=this.eo.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):cv():this.eo=this.eo.insert(t,e)}},{key:"no",value:function(){var e=[];return this.eo.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),m_=function(){function e(t,n,r,i,a,o,u,s){re(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s}return ae(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hy(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,v_.emptySet(n),a,r,i,!0,!1)}}]),e}(),g_=ae((function e(){re(this,e),this.so=void 0,this.listeners=[]})),k_=ae((function e(){re(this,e),this.queries=new sw((function(e){return Ky(e)}),Hy),this.onlineState="Unknown",this.io=new Set}));function w_(e,t){return b_.apply(this,arguments)}function b_(){return b_=Z(te().mark((function e(t,n){var r,i,a,o,u;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=fv(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new g_),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.so=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=p_(e.t0,"Initialization of query '".concat(Gy(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.ro(r.onlineState),o.so&&n.oo(o.so)&&T_(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),b_.apply(this,arguments)}function __(e,t){return x_.apply(this,arguments)}function x_(){return x_=Z(te().mark((function e(t,n){var r,i,a,o,u;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=fv(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),x_.apply(this,arguments)}function I_(e,t){var n,r=fv(e),i=!1,a=oe(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=oe(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.oo(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.so=o}}}catch(f){a.e(f)}finally{a.f()}i&&T_(r)}function E_(e,t,n){var r=fv(e),i=r.queries.get(t);if(i){var a,o=oe(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function T_(e){e.io.forEach((function(e){e.next()}))}var S_=function(){function e(t,n,r){re(this,e),this.query=t,this.ao=n,this.co=!1,this.uo=null,this.onlineState="Unknown",this.options=r||{}}return ae(e,[{key:"oo",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=oe(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new m_(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.co?this.ho(e)&&(this.ao.next(e),a=!0):this.lo(e,this.onlineState)&&(this.fo(e),a=!0),this.uo=e,a}},{key:"onError",value:function(e){this.ao.error(e)}},{key:"ro",value:function(e){this.onlineState=e;var t=!1;return this.uo&&!this.co&&this.lo(this.uo,e)&&(this.fo(this.uo),t=!0),t}},{key:"lo",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.wo||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"ho",value:function(e){if(e.docChanges.length>0)return!0;var t=this.uo&&this.uo.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"fo",value:function(e){e=m_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.co=!0,this.ao.next(e)}}]),e}(),C_=function(){function e(t,n){re(this,e),this.payload=t,this.byteLength=n}return ae(e,[{key:"_o",value:function(){return"metadata"in this.payload}}]),e}(),A_=function(){function e(t){re(this,e),this.k=t}return ae(e,[{key:"Hn",value:function(e){return pg(this.k,e)}},{key:"Jn",value:function(e){return e.metadata.exists?wg(this.k,e.document,!1):dy.newNoDocument(this.Hn(e.metadata.name),this.Yn(e.metadata.readTime))}},{key:"Yn",value:function(e){return lg(e)}}]),e}(),N_=function(){function e(t,n,r){re(this,e),this.mo=t,this.localStore=n,this.k=r,this.queries=[],this.documents=[],this.progress=R_(t)}return ae(e,[{key:"yo",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"po",value:function(e){var t,n=new Map,r=new A_(this.k),i=oe(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.Hn(a.metadata.name),s=oe(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||Km()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=Z(te().mark((function e(){var t,n,r,i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zw(this.localStore,new A_(this.k),this.documents,this.mo.id);case 2:t=e.sent,n=this.po(this.documents),r=oe(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,Hw(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",new _w(Object.assign({},this.progress),t)));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function R_(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var P_=ae((function e(t){re(this,e),this.key=t})),O_=ae((function e(t){re(this,e),this.key=t})),D_=function(){function e(t,n){re(this,e),this.query=t,this.To=n,this.Eo=null,this.current=!1,this.Io=Km(),this.mutatedKeys=Km(),this.Ao=Yy(t),this.Ro=new v_(this.Ao)}return ae(e,[{key:"Po",get:function(){return this.To}},{key:"bo",value:function(e,t){var n=this,r=t?t.vo:new y_,i=t?t.Ro:this.Ro,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s=Uy(this.query)&&i.size===this.query.limit?i.last():null,c=Fy(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=Qy(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Vo(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.Ao(f,s)>0||c&&n.Ao(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),Uy(this.query)||Fy(this.query))for(;o.size>this.query.limit;){var l=Uy(this.query)?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Ro:o,vo:r,Bn:u,mutatedKeys:a}}},{key:"Vo",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Ro;this.Ro=e.Ro,this.mutatedKeys=e.mutatedKeys;var a=e.vo.no();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return cv()}};return n(e)-n(t)}(e.type,t.type)||r.Ao(e.doc,t.doc)})),this.So(n);var o=t?this.Do():[],u=0===this.Io.size&&this.current?1:0,s=u!==this.Eo;return this.Eo=u,0!==a.length||s?{snapshot:new m_(this.query,e.Ro,i,a,e.mutatedKeys,0===u,s,!1),Co:o}:{Co:o}}},{key:"ro",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ro:this.Ro,vo:new y_,mutatedKeys:this.mutatedKeys,Bn:!1},!1)):{Co:[]}}},{key:"No",value:function(e){return!this.To.has(e)&&!!this.Ro.has(e)&&!this.Ro.get(e).hasLocalMutations}},{key:"So",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.To=t.To.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.To=t.To.delete(e)})),this.current=e.current)}},{key:"Do",value:function(){var e=this;if(!this.current)return[];var t=this.Io;this.Io=Km(),this.Ro.forEach((function(t){e.No(t.key)&&(e.Io=e.Io.add(t.key))}));var n=[];return t.forEach((function(t){e.Io.has(t)||n.push(new O_(t))})),this.Io.forEach((function(e){t.has(e)||n.push(new P_(e))})),n}},{key:"ko",value:function(e){this.To=e.zn,this.Io=Km();var t=this.bo(e.documents);return this.applyChanges(t,!0)}},{key:"xo",value:function(){return m_.fromInitialDocuments(this.query,this.Ro,this.mutatedKeys,0===this.Eo)}}]),e}(),L_=ae((function e(t,n,r){re(this,e),this.query=t,this.targetId=n,this.view=r})),M_=ae((function e(t){re(this,e),this.key=t,this.$o=!1})),U_=function(){function e(t,n,r,i,a,o){re(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Fo={},this.Oo=new sw((function(e){return Ky(e)}),Hy),this.Mo=new Map,this.Lo=new Set,this.Bo=new Dm(Jv.comparator),this.Uo=new Map,this.qo=new Qw,this.Ko={},this.jo=new Map,this.Qo=Yk.re(),this.onlineState="Unknown",this.Wo=void 0}return ae(e,[{key:"isPrimaryClient",get:function(){return!0===this.Wo}}]),e}();function F_(e,t){return j_.apply(this,arguments)}function j_(){return j_=Z(te().mark((function e(t,n){var r,i,a,o,u,s;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Rx(t),!(o=r.Oo.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.xo(),e.next=15;break;case 6:return e.next=8,Lw(r.localStore,zy(n));case 8:return u=e.sent,s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=13,V_(r,n,i,"current"===s);case 13:a=e.sent,r.isPrimaryClient&&Pb(r.remoteStore,u);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),j_.apply(this,arguments)}function V_(e,t,n,r){return q_.apply(this,arguments)}function q_(){return q_=Z(te().mark((function e(t,n,r,i){var a,o,u,s,c,l;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Go=function(e,n,r){return function(){var e=Z(te().mark((function e(t,n,r,i){var a,o,u;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.bo(r),e.t0=a.Bn,!e.t0){e.next=6;break}return e.next=5,Fw(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.bo(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(ux(t,n.targetId,u.Co),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Fw(t.localStore,n,!0);case 3:return a=e.sent,o=new D_(n,a.zn),u=o.bo(a.documents),s=Jm.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(u,t.isPrimaryClient,s),ux(t,r,c.Co),l=new L_(n,r,o),e.abrupt("return",(t.Oo.set(n,l),t.Mo.has(r)?t.Mo.get(r).push(n):t.Mo.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),q_.apply(this,arguments)}function B_(e,t){return z_.apply(this,arguments)}function z_(){return z_=Z(te().mark((function e(t,n){var r,i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=fv(t),i=r.Oo.get(n),!((a=r.Mo.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.Mo.set(i.targetId,a.filter((function(e){return!Hy(e,n)}))),void r.Oo.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Mw(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),Ob(r.remoteStore,i.targetId),ax(r,i.targetId)})).catch(ew);case 9:e.next=14;break;case 11:return ax(r,i.targetId),e.next=14,Mw(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),z_.apply(this,arguments)}function W_(e,t,n){return H_.apply(this,arguments)}function H_(){return H_=Z(te().mark((function e(t,n,r){var i,a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Px(t),e.prev=1,e.next=4,function(e,t){var n,r=fv(e),i=Av.now(),a=t.reduce((function(e,t){return e.add(t.key)}),Km());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return r.Wn.vn(e,a).next((function(a){n=a;var o,u=[],s=oe(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=km(c,n.get(c.key));null!=l&&u.push(new xm(c.key,l,hy(l.value.mapValue),pm.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return r.An.addMutationBatch(e,i,u,t)}))})).then((function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.Ko[e.currentUser.toKey()];r||(r=new Dm(Tv)),r=r.insert(t,n),e.Ko[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,lx(i,a.changes);case 9:return e.next=11,Yb(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=p_(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),H_.apply(this,arguments)}function K_(e,t){return G_.apply(this,arguments)}function G_(){return G_=Z(te().mark((function e(t,n){var r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=fv(t),e.prev=1,e.next=4,Pw(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.Uo.get(t);n&&(lv(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.$o=!0:e.modifiedDocuments.size>0?lv(n.$o):e.removedDocuments.size>0&&(lv(n.$o),n.$o=!1))})),e.next=8,lx(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,ew(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),G_.apply(this,arguments)}function Q_(e,t,n){var r=fv(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Oo.forEach((function(e,n){var r=n.view.ro(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=fv(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=oe(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.ro(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&T_(n)}(r.eventManager,t),i.length&&r.Fo.Pr(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Y_(e,t,n){return J_.apply(this,arguments)}function J_(){return J_=Z(te().mark((function e(t,n,r){var i,a,o,u,s,c;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=fv(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.Uo.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new Dm(Jv.comparator)).insert(o,dy.newNoDocument(o,Nv.min())),s=Km().add(o),c=new Ym(Nv.min(),new Map,new Um(Tv),u,s),e.next=9,K_(i,c);case 9:i.Bo=i.Bo.remove(o),i.Uo.delete(n),cx(i),e.next=16;break;case 14:return e.next=16,Mw(i.localStore,n,!1).then((function(){return ax(i,n,r)})).catch(ew);case 16:case"end":return e.stop()}}),e)}))),J_.apply(this,arguments)}function X_(e,t){return $_.apply(this,arguments)}function $_(){return $_=Z(te().mark((function e(t,n){var r,i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=fv(t),i=n.batch.batchId,e.prev=1,e.next=4,Nw(r.localStore,n);case 4:return a=e.sent,ix(r,i,null),rx(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,lx(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,ew(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),$_.apply(this,arguments)}function Z_(e,t,n){return ex.apply(this,arguments)}function ex(){return ex=Z(te().mark((function e(t,n,r){var i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=fv(t),e.prev=1,e.next=4,function(e,t){var n=fv(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.An.lookupMutationBatch(e,t).next((function(t){return lv(null!==t),r=t.keys(),n.An.removeMutationBatch(e,t)})).next((function(){return n.An.performConsistencyCheck(e)})).next((function(){return n.Wn.vn(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,ix(i,n,r),rx(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,lx(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,ew(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),ex.apply(this,arguments)}function tx(e,t){return nx.apply(this,arguments)}function nx(){return nx=Z(te().mark((function e(t,n){var r,i,a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Fb((r=fv(t)).remoteStore)||av("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=fv(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.An.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.jo.get(i)||[]).push(n),r.jo.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=p_(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),nx.apply(this,arguments)}function rx(e,t){(e.jo.get(t)||[]).forEach((function(e){e.resolve()})),e.jo.delete(t)}function ix(e,t,n){var r=fv(e),i=r.Ko[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.Ko[r.currentUser.toKey()]=i}}function ax(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=oe(e.Mo.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.Oo.delete(a),n&&e.Fo.zo(a,n)}}catch(o){i.e(o)}finally{i.f()}e.Mo.delete(t),e.isPrimaryClient&&e.qo.us(t).forEach((function(t){e.qo.containsKey(t)||ox(e,t)}))}function ox(e,t){e.Lo.delete(t.path.canonicalString());var n=e.Bo.get(t);null!==n&&(Ob(e.remoteStore,n),e.Bo=e.Bo.remove(t),e.Uo.delete(n),cx(e))}function ux(e,t,n){var r,i=oe(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof P_?(e.qo.addReference(a.key,t),sx(e,a)):a instanceof O_?(av("SyncEngine","Document no longer in limbo: "+a.key),e.qo.removeReference(a.key,t),e.qo.containsKey(a.key)||ox(e,a.key)):cv()}}catch(o){i.e(o)}finally{i.f()}}function sx(e,t){var n=t.key,r=n.path.canonicalString();e.Bo.get(n)||e.Lo.has(r)||(av("SyncEngine","New document in limbo: "+n),e.Lo.add(r),cx(e))}function cx(e){for(;e.Lo.size>0&&e.Bo.size<e.maxConcurrentLimboResolutions;){var t=e.Lo.values().next().value;e.Lo.delete(t);var n=new Jv(Lv.fromString(t)),r=e.Qo.next();e.Uo.set(r,new M_(n)),e.Bo=e.Bo.insert(n,r),Pb(e.remoteStore,new bk(zy(My(n.path)),r,2,xv.I))}}function lx(e,t,n){return fx.apply(this,arguments)}function fx(){return fx=Z(te().mark((function e(t,n,r){var i,a,o,u;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=fv(t),a=[],o=[],u=[],e.t0=i.Oo.isEmpty(),e.t0){e.next=9;break}return i.Oo.forEach((function(e,t){u.push(i.Go(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=Iw.$n(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.Fo.Pr(a),e.next=9,function(){var e=Z(te().mark((function e(t,n){var r,i,a,o,u,s,c,l;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=fv(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return uk.forEach(n,(function(t){return uk.forEach(t.kn,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return uk.forEach(t.xn,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),hk(e.t0)){e.next=10;break}throw e.t0;case 10:av("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=oe(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.qn.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.qn=r.qn.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),fx.apply(this,arguments)}function hx(e,t){return dx.apply(this,arguments)}function dx(){return dx=Z(te().mark((function e(t,n){var r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=fv(t)).currentUser.isEqual(n)){e.next=11;break}return av("SyncEngine","User change. New user:",n.toKey()),e.next=5,Cw(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.jo.forEach((function(e){e.forEach((function(e){e.reject(new dv(hv.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.jo.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,lx(r,i.Gn);case 11:case"end":return e.stop()}}),e)}))),dx.apply(this,arguments)}function px(e,t){var n=fv(e),r=n.Uo.get(t);if(r&&r.$o)return Km().add(r.key);var i=Km(),a=n.Mo.get(t);if(!a)return i;var o,u=oe(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.Oo.get(s);i=i.unionWith(c.view.Po)}}catch(l){u.e(l)}finally{u.f()}return i}function vx(e,t){return yx.apply(this,arguments)}function yx(){return yx=Z(te().mark((function e(t,n){var r,i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=fv(t),e.next=3,Fw(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.ko(i),e.abrupt("return",(r.isPrimaryClient&&ux(r,n.targetId,a.Co),a));case 6:case"end":return e.stop()}}),e)}))),yx.apply(this,arguments)}function mx(e){return gx.apply(this,arguments)}function gx(){return gx=Z(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=fv(t),e.abrupt("return",Vw(n.localStore).then((function(e){return lx(n,e)})));case 2:case"end":return e.stop()}}),e)}))),gx.apply(this,arguments)}function kx(e,t,n,r){return wx.apply(this,arguments)}function wx(){return wx=Z(te().mark((function e(t,n,r,i){var a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=fv(t),e.next=3,function(e,t){var n=fv(e),r=fv(n.An);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Zt(e,t).next((function(t){return t?n.Wn.vn(e,t):uk.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,Yb(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(ix(a,n,i||null),rx(a,n),function(e,t){fv(fv(e).An).ee(t)}(a.localStore,n)):cv();case 11:return e.next=13,lx(a,o);case 13:e.next=16;break;case 15:av("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),wx.apply(this,arguments)}function bx(e,t){return _x.apply(this,arguments)}function _x(){return _x=Z(te().mark((function e(t,n){var r,i,a,o,u,s,c,l;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Rx(r=fv(t)),Px(r),!0!==n||!0===r.Wo){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,xx(r,i.toArray());case 5:return a=e.sent,r.Wo=!0,e.next=9,c_(r.remoteStore,!0);case 9:o=oe(a);try{for(o.s();!(u=o.n()).done;)s=u.value,Pb(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.Wo){e.next=25;break}return c=[],l=Promise.resolve(),r.Mo.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return ax(r,t),Mw(r.localStore,t,!0)})),Ob(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,xx(r,c);case 21:return function(e){var t=fv(e);t.Uo.forEach((function(e,n){Ob(t.remoteStore,n)})),t.qo.hs(),t.Uo=new Map,t.Bo=new Dm(Jv.comparator)}(r),r.Wo=!1,e.next=25,c_(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),_x.apply(this,arguments)}function xx(e,t,n){return Ix.apply(this,arguments)}function Ix(){return Ix=Z(te().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p,v,y,m;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=fv(t),a=[],o=[],u=oe(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.Mo.get(c))||0===f.length){e.next=34;break}return e.next=11,Lw(i.localStore,zy(f[0]));case 11:l=e.sent,h=oe(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.Oo.get(p),e.next=20,vx(i,v);case 20:(y=e.sent).snapshot&&o.push(y.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,jw(i.localStore,c);case 36:return m=e.sent,e.next=39,Lw(i.localStore,m);case 39:return l=e.sent,e.next=42,V_(i,Ex(m),c,!1);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.Fo.Pr(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),Ix.apply(this,arguments)}function Ex(e){return Ly(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Tx(e){var t=fv(e);return fv(fv(t.localStore).persistence).Tn()}function Sx(e,t,n,r){return Cx.apply(this,arguments)}function Cx(){return Cx=Z(te().mark((function e(t,n,r,i){var a,o,u;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=fv(t)).Wo){e.next=5;break}av("SyncEngine","Ignoring unexpected query state notification."),e.next=21;break;case 5:if(!a.Mo.has(n)){e.next=21;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?9:"rejected"===e.t0?16:20;break;case 9:return e.next=11,Vw(a.localStore);case 11:return o=e.sent,u=Ym.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=15,lx(a,o,u);case 15:return e.abrupt("break",21);case 16:return e.next=18,Mw(a.localStore,n,!0);case 18:return ax(a,n,i),e.abrupt("break",21);case 20:cv();case 21:case"end":return e.stop()}}),e)}))),Cx.apply(this,arguments)}function Ax(e,t,n){return Nx.apply(this,arguments)}function Nx(){return Nx=Z(te().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=Rx(t)).Wo){e.next=45;break}a=oe(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.Mo.has(u)){e.next=10;break}return av("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,jw(i.localStore,u);case 12:return s=e.sent,e.next=15,Lw(i.localStore,s);case 15:return c=e.sent,e.next=18,V_(i,Ex(s),c.targetId,!1);case 18:Pb(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=oe(r),e.prev=30,h=te().mark((function e(){var t;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.Mo.has(t),!e.t0){e.next=5;break}return e.next=5,Mw(i.localStore,t,!1).then((function(){Ob(i.remoteStore,t),ax(i,t)})).catch(ew);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),Nx.apply(this,arguments)}function Rx(e){var t=fv(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=K_.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=px.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Y_.bind(null,t),t.Fo.Pr=I_.bind(null,t.eventManager),t.Fo.zo=E_.bind(null,t.eventManager),t}function Px(e){var t=fv(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=X_.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Z_.bind(null,t),t}function Ox(e,t,n){var r=fv(e);(function(){var e=Z(te().mark((function e(t,n,r){var i,a,o,u,s;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=fv(e),r=lg(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Ye.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=10;break}return e.next=9,n.close();case 9:return e.abrupt("return",void r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)));case 10:return r._updateProgress(R_(i)),a=new N_(i,t.localStore,n.k),e.next=14,n.Ho();case 14:o=e.sent;case 15:if(!o){e.next=25;break}return e.next=18,a.yo(o);case 18:return(u=e.sent)&&r._updateProgress(u),e.next=22,n.Ho();case 22:o=e.sent;case 23:e.next=15;break;case 25:return e.next=27,a.complete();case 27:return s=e.sent,e.next=30,lx(t,s.In,void 0);case 30:return e.next=32,function(e,t){var n=fv(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Ye.saveBundleMetadata(e,t)}))}(t.localStore,i);case 32:r._completeWith(s.progress),e.next=38;break;case 35:e.prev=35,e.t0=e.catch(0),uv("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0);case 38:case"end":return e.stop()}}),e,null,[[0,35]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(){r.sharedClientState.notifyBundleLoaded()}))}var Dx=function(){function e(){re(this,e),this.synchronizeTabs=!1}return ae(e,[{key:"initialize",value:function(){var e=Z(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.k=wb(t.databaseInfo.databaseId),this.sharedClientState=this.Jo(t),this.persistence=this.Yo(t),e.next=5,this.persistence.start();case 5:this.gcScheduler=this.Xo(t),this.localStore=this.Zo(t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Xo",value:function(e){return null}},{key:"Zo",value:function(e){return Sw(this.persistence,new Ew,e.initialUser,this.k)}},{key:"Yo",value:function(e){return new eb(nb.ks,this.k)}},{key:"Jo",value:function(e){return new hb}},{key:"terminate",value:function(){var e=Z(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Lx=function(e){ce(n,e);var t=pe(n);function n(e,r,i){var a;return re(this,n),(a=t.call(this)).ta=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return ae(n,[{key:"initialize",value:function(){var e=Z(te().mark((function e(t){var r=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ar(le(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,qw(this.localStore);case 4:return e.next=6,this.ta.initialize(this,t);case 6:return e.next=8,Px(this.ta.syncEngine);case 8:return e.next=10,Yb(this.ta.remoteStore);case 10:return e.next=12,this.persistence.sn((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()}));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Zo",value:function(e){return Sw(this.persistence,new Ew,e.initialUser,this.k)}},{key:"Xo",value:function(e){var t=this.persistence.referenceDelegate.garbageCollector;return new iw(t,e.asyncQueue)}},{key:"Yo",value:function(e){var t=bw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?qk.withCacheSize(this.cacheSizeBytes):qk.DEFAULT;return new gw(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,gb(),kb(),this.k,this.sharedClientState,!!this.forceOwnership)}},{key:"Jo",value:function(e){return new hb}}]),n}(Dx),Mx=function(e){ce(n,e);var t=pe(n);function n(e,r){var i;return re(this,n),(i=t.call(this,e,r,!1)).ta=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return ae(n,[{key:"initialize",value:function(){var e=Z(te().mark((function e(t){var r,i=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ar(le(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.ta.syncEngine,e.t0=this.sharedClientState instanceof fb,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={mi:kx.bind(null,r),gi:Sx.bind(null,r),yi:Ax.bind(null,r),Tn:Tx.bind(null,r),_i:mx.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.sn(function(){var e=Z(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bx(i.ta.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start(i.localStore):t||i.gcScheduler.stop());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Jo",value:function(e){var t=gb();if(!fb.bt(t))throw new dv(hv.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=bw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new fb(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(Lx),Ux=function(){function e(){re(this,e)}return ae(e,[{key:"initialize",value:function(){var e=Z(te().mark((function e(t,n){var r=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return Q_(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=hx.bind(null,this.syncEngine),e.next=12,c_(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new k_}},{key:"createDatastore",value:function(e){var t,n=wb(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new mb(t));return function(e,t,n,r){return new Eb(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return Q_(o.syncEngine,e,0)},a=pb.bt()?new pb:new db,new Sb(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new U_(e,t,n,r,i,a);return o&&(u.Wo=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=Z(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=fv(t),av("RemoteStore","RemoteStore shutting down."),n.Gr.add(5),e.next=5,Nb(n);case 5:n.Hr.shutdown(),n.Jr.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function Fx(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return Z(te().mark((function r(){var i;return te().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return Z(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var jx=function(){function e(t){re(this,e),this.observer=t,this.muted=!1}return ae(e,[{key:"next",value:function(e){this.observer.next&&this.ea(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"na",value:function(){this.muted=!0}},{key:"ea",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),Vx=function(){function e(t,n){var r=this;re(this,e),this.sa=t,this.k=n,this.metadata=new pv,this.buffer=new Uint8Array,this.ia=new TextDecoder("utf-8"),this.ra().then((function(e){e&&e._o()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return ae(e,[{key:"close",value:function(){return this.sa.cancel()}},{key:"getMetadata",value:function(){var e=Z(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ho",value:function(){var e=Z(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.ra());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ra",value:function(){var e=Z(te().mark((function e(){var t,n,r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.oa();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.ia.decode(t),r=Number(n),isNaN(r)&&this.aa("length string (".concat(n,") is not valid number")),e.next=9,this.ca(r);case 9:return i=e.sent,e.abrupt("return",new C_(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ua",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"oa",value:function(){var e=Z(te().mark((function e(){var t,n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.ua()<0)){e.next=7;break}return e.next=3,this.ha();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.ua())<0&&this.aa("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ca",value:function(){var e=Z(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.ha();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.aa("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.ia.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"aa",value:function(e){throw this.sa.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"ha",value:function(){var e=Z(te().mark((function e(){var t,n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sa.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),qx=function(){function e(t){re(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return ae(e,[{key:"lookup",value:function(){var e=Z(te().mark((function e(t){var n,r=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new dv(hv.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=Z(te().mark((function e(t,n){var r,i,a,o,u,s;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=fv(t),i=mg(r.k)+"/documents",a={documents:n.map((function(e){return dg(r.k,e)}))},e.next=5,r.ji("BatchGetDocuments",i,a);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=bg(r.k,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());lv(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new Am(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=Z(te().mark((function e(){var t,n=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=Jv.fromPath(t);n.mutations.push(new Nm(r,n.precondition(r)))})),e.next=7,function(){var e=Z(te().mark((function e(t,n){var r,i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=fv(t),i=mg(r.k)+"/documents",a={writes:n.map((function(e){return _g(r.k,e)}))},e.next=3,r.Bi("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw cv();t=Nv.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new dv(hv.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?pm.updateTime(t):pm.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Nv.min()))throw new dv(hv.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return pm.updateTime(t)}return pm.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),Bx=function(){function e(t,n,r,i){re(this,e),this.asyncQueue=t,this.datastore=n,this.updateFunction=r,this.deferred=i,this.la=5,this.ur=new bb(this.asyncQueue,"transaction_retry")}return ae(e,[{key:"run",value:function(){this.la-=1,this.fa()}},{key:"fa",value:function(){var e=this;this.ur.Zi(Z(te().mark((function t(){var n,r;return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new qx(e.datastore),(r=e.da(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.wa(t)}))}))})).catch((function(t){e.wa(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"da",value:function(e){try{var t=this.updateFunction(e);return!Gv(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"wa",value:function(e){var t=this;this.la>0&&this._a(e)?(this.la-=1,this.asyncQueue.enqueueAndForget((function(){return t.fa(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"_a",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!Pm(t)}return!1}}]),e}(),zx=function(){function e(t,n,r,i){var a=this;re(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=tv.UNAUTHENTICATED,this.clientId=Ev.A(),this.authCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=Z(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return av("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(){return Promise.resolve()}))}return ae(e,[{key:"getConfiguration",value:function(){var e=Z(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new dv(hv.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new pv;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(Z(te().mark((function n(){var r;return te().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=p_(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function Wx(e,t){return Hx.apply(this,arguments)}function Hx(){return Hx=Z(te().mark((function e(t,n){var r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),av("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=Z(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Cw(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),Hx.apply(this,arguments)}function Kx(e,t){return Gx.apply(this,arguments)}function Gx(){return Gx=Z(te().mark((function e(t,n){var r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,Qx(t);case 3:return r=e.sent,av("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return function(){var e=Z(te().mark((function e(t,n){var r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=fv(t)).asyncQueue.verifyOperationInProgress(),av("RemoteStore","RemoteStore received new credentials"),i=Fb(r),r.Gr.add(3),e.next=6,Nb(r);case 6:return i&&r.Jr.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.Gr.delete(3),e.next=12,Cb(r);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(n.remoteStore,e)})),t.onlineComponents=n;case 12:case"end":return e.stop()}}),e)}))),Gx.apply(this,arguments)}function Qx(e){return Yx.apply(this,arguments)}function Yx(){return Yx=Z(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return av("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,Wx(t,new Dx);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),Yx.apply(this,arguments)}function Jx(e){return Xx.apply(this,arguments)}function Xx(){return Xx=Z(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return av("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,Kx(t,new Ux);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),Xx.apply(this,arguments)}function $x(e){return Qx(e).then((function(e){return e.persistence}))}function Zx(e){return Qx(e).then((function(e){return e.localStore}))}function eI(e){return Jx(e).then((function(e){return e.remoteStore}))}function tI(e){return Jx(e).then((function(e){return e.syncEngine}))}function nI(e){return rI.apply(this,arguments)}function rI(){return rI=Z(te().mark((function e(t){var n,r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Jx(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=F_.bind(null,n.syncEngine),r.onUnlisten=B_.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),rI.apply(this,arguments)}function iI(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new pv;return e.asyncQueue.enqueueAndForget(Z(te().mark((function i(){return te().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new jx({next:function(a){t.enqueueAndForget((function(){return __(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new dv(hv.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new dv(hv.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new S_(My(n.path),a,{includeMetadataChanges:!0,wo:!0});return w_(e,o)},i.next=3,nI(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function aI(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new pv;return e.asyncQueue.enqueueAndForget(Z(te().mark((function i(){return te().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new jx({next:function(n){t.enqueueAndForget((function(){return __(e,o)})),n.fromCache&&"server"===r.source?i.reject(new dv(hv.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new S_(n,a,{includeMetadataChanges:!0,wo:!0});return w_(e,o)},i.next=3,nI(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var oI=ae((function e(t,n,r,i,a,o,u,s){re(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),uI=function(){function e(t,n){re(this,e),this.projectId=t,this.database=n||"(default)"}return ae(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}]),e}(),sI=new Map;function cI(e,t,n){if(!n)throw new dv(hv.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function lI(e,t,n,r){if(!0===t&&!0===r)throw new dv(hv.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function fI(e){if(!Jv.isDocumentKey(e))throw new dv(hv.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function hI(e){if(Jv.isDocumentKey(e))throw new dv(hv.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function dI(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":cv()}function pI(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new dv(hv.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=dI(e);throw new dv(hv.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function vI(e,t){if(t<=0)throw new dv(hv.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var yI=function(){function e(t){var n;if(re(this,e),void 0===t.host){if(void 0!==t.ssl)throw new dv(hv.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new dv(hv.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,lI("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return ae(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),mI=function(){function e(t,n,r){re(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yI({}),this._settingsFrozen=!1,t instanceof uI?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new dv(hv.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new uI(e.options.projectId)}(t))}return ae(e,[{key:"app",get:function(){if(!this._app)throw new dv(hv.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new dv(hv.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yI(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new yv;switch(e.type){case"gapi":var t=e.client;return lv(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new wv(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new dv(hv.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=sI.get(e);t&&(av("ComponentProvider","Removing Datastore"),sI.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function gI(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=pI(e,mI))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&uv("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=tv.MOCK_USER;else{o=xe(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new dv(hv.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new tv(s)}e._authCredentials=new mv(new vv(o,u))}}var kI=function(){function e(t,n,r){re(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return ae(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new bI(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),wI=function(){function e(t,n,r){re(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return ae(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),bI=function(e){ce(n,e);var t=pe(n);function n(e,r,i){var a;return re(this,n),(a=t.call(this,e,r,My(i)))._path=i,a.type="collection",a}return ae(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new kI(this.firestore,null,new Jv(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(wI);function _I(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=We(e),cI("collection","path",t),e instanceof mI){var a=Lv.fromString.apply(Lv,[t].concat(r));return hI(a),new bI(e,null,a)}if(!(e instanceof kI||e instanceof bI))throw new dv(hv.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Lv.fromString.apply(Lv,[t].concat(r)));return hI(o),new bI(e.firestore,null,o)}function xI(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=We(e),1===arguments.length&&(t=Ev.A()),cI("doc","path",t),e instanceof mI){var a=Lv.fromString.apply(Lv,[t].concat(r));return fI(a),new kI(e,null,new Jv(a))}if(!(e instanceof kI||e instanceof bI))throw new dv(hv.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Lv.fromString.apply(Lv,[t].concat(r)));return fI(o),new kI(e.firestore,e instanceof bI?e.converter:null,new Jv(o))}function II(e,t){return e=We(e),t=We(t),(e instanceof kI||e instanceof bI)&&(t instanceof kI||t instanceof bI)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function EI(e,t){return e=We(e),t=We(t),e instanceof wI&&t instanceof wI&&e.firestore===t.firestore&&Hy(e._query,t._query)&&e.converter===t.converter}var TI=function(){function e(){var t=this;re(this,e),this.ma=Promise.resolve(),this.ga=[],this.ya=!1,this.pa=[],this.Ta=null,this.Ea=!1,this.Ia=!1,this.Aa=[],this.ur=new bb(this,"async_queue_retry"),this.Ra=function(){var e=kb();e&&av("AsyncQueue","Visibility state changed to "+e.visibilityState),t.ur.er()};var n=kb();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Ra)}return ae(e,[{key:"isShuttingDown",get:function(){return this.ya}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Pa(),this.ba(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.ya){this.ya=!0,this.Ia=e||!1;var t=kb();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ra)}}},{key:"enqueue",value:function(e){var t=this;if(this.Pa(),this.ya)return new Promise((function(){}));var n=new pv;return this.ba((function(){return t.ya&&t.Ia?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.ga.push(e),t.va()}))}},{key:"va",value:function(){var e=Z(te().mark((function e(){var t=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.ga.length){e.next=14;break}return e.prev=1,e.next=4,this.ga[0]();case 4:this.ga.shift(),this.ur.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),hk(e.t0)){e.next=12;break}throw e.t0;case 12:av("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.ga.length>0&&this.ur.Zi((function(){return t.va()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"ba",value:function(e){var t=this,n=this.ma.then((function(){return t.Ea=!0,e().catch((function(e){t.Ta=e,t.Ea=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw ov("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Ea=!1,e}))}));return this.ma=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Pa(),this.Aa.indexOf(e)>-1&&(t=0);var i=d_.createAndSchedule(this,e,t,n,(function(e){return r.Va(e)}));return this.pa.push(i),i}},{key:"Pa",value:function(){this.Ta&&cv()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Sa",value:function(){var e=Z(te().mark((function e(){var t;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.ma,e.next=3,t;case 3:if(t!==this.ma){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Da",value:function(e){var t,n=oe(this.pa);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Ca",value:function(e){var t=this;return this.Sa().then((function(){t.pa.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=oe(t.pa);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Sa()}))}},{key:"Na",value:function(e){this.Aa.push(e)}},{key:"Va",value:function(e){var t=this.pa.indexOf(e);this.pa.splice(t,1)}}]),e}();function SI(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=oe(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var CI=function(){function e(){re(this,e),this._progressObserver={},this._taskCompletionResolver=new pv,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return ae(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),AI=function(e){ce(n,e);var t=pe(n);function n(e,r,i){var a;return re(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new TI,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return ae(n,[{key:"_terminate",value:function(){return this._firestoreClient||RI(this),this._firestoreClient.terminate()}}]),n}(mI);function NI(e){return e._firestoreClient||RI(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function RI(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new oI(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new zx(e._authCredentials,e._appCheckCredentials,e._queue,r)}function PI(e,t,n){var r=new pv;return e.asyncQueue.enqueue(Z(te().mark((function i(){return te().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,Wx(e,n);case 3:return i.next=5,Kx(e,t);case 5:r.resolve(),i.next=13;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===hv.FAILED_PRECONDITION||e.code===hv.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(i.t0)){i.next=12;break}throw i.t0;case 12:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i.t0),r.reject(i.t0);case 13:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function OI(e){return function(e){return e.asyncQueue.enqueue(Z(te().mark((function t(){var n,r;return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$x(e);case 2:return n=t.sent,t.next=5,eI(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=fv(e);return t.Gr.delete(0),Cb(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(NI(e=pI(e,AI)))}function DI(e){return function(e){return e.asyncQueue.enqueue(Z(te().mark((function t(){var n,r;return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$x(e);case 2:return n=t.sent,t.next=5,eI(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=Z(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=fv(t)).Gr.add(0),e.next=4,Nb(n);case 4:n.Jr.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(NI(e=pI(e,AI)))}function LI(e,t){var n=NI(e=pI(e,AI)),r=new CI;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new Vx(e,t)}(function(e,t){if(e instanceof Uint8Array)return Fx(e,t);if(e instanceof ArrayBuffer)return Fx(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,wb(t));e.asyncQueue.enqueueAndForget(Z(te().mark((function t(){return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Ox,t.next=3,tI(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function MI(e,t){return function(e,t){return e.asyncQueue.enqueue(Z(te().mark((function n(){return te().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=fv(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Ye.getNamedQuery(e,t)}))},n.next=3,Zx(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(NI(e=pI(e,AI)),t).then((function(t){return t?new wI(e,null,t.query):null}))}function UI(e){if(e._initialized||e._terminated)throw new dv(hv.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var FI=function(){function e(){re(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new dv(hv.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Uv(n)}return ae(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var jI=function(){function e(t){re(this,e),this._byteString=t}return ae(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(jv.fromBase64String(t))}catch(t){throw new dv(hv.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(jv.fromUint8Array(t))}}]),e}(),VI=ae((function e(t){re(this,e),this._methodName=t})),qI=function(){function e(t,n){if(re(this,e),!isFinite(t)||t<-90||t>90)throw new dv(hv.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new dv(hv.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return ae(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Tv(this._lat,e._lat)||Tv(this._long,e._long)}}]),e}(),BI=/^__.*__$/,zI=function(){function e(t,n,r){re(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return ae(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new xm(e,this.data,this.fieldMask,t,this.fieldTransforms):new _m(e,this.data,t,this.fieldTransforms)}}]),e}(),WI=function(){function e(t,n,r){re(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return ae(e,[{key:"toMutation",value:function(e,t){return new xm(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function HI(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw cv()}}var KI=function(){function e(t,n,r,i,a,o){re(this,e),this.settings=t,this.databaseId=n,this.k=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ka(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return ae(e,[{key:"path",get:function(){return this.settings.path}},{key:"xa",get:function(){return this.settings.xa}},{key:"$a",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.k,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Fa",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.$a({path:n,Oa:!1});return r.Ma(e),r}},{key:"La",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.$a({path:n,Oa:!1});return r.ka(),r}},{key:"Ba",value:function(e){return this.$a({path:void 0,Oa:!0})}},{key:"Ua",value:function(e){return hE(e,this.settings.methodName,this.settings.qa||!1,this.path,this.settings.Ka)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"ka",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.Ma(this.path.get(e))}},{key:"Ma",value:function(e){if(0===e.length)throw this.Ua("Document fields must not be empty");if(HI(this.xa)&&BI.test(e))throw this.Ua('Document fields cannot begin and end with "__"')}}]),e}(),GI=function(){function e(t,n,r){re(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.k=r||wb(t)}return ae(e,[{key:"ja",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new KI({xa:e,methodName:t,Ka:n,path:Uv.emptyPath(),Oa:!1,qa:r},this.databaseId,this.k,this.ignoreUndefinedProperties)}}]),e}();function QI(e){var t=e._freezeSettings(),n=wb(e._databaseId);return new GI(e._databaseId,!!t.ignoreUndefinedProperties,n)}function YI(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.ja(a.merge||a.mergeFields?2:0,t,n,i);sE("Data must be an object, but it was:",o,r);var u,s,c=oE(r,o);if(a.merge)u=new Fv(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=oe(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=l.value,p=cE(t,d,n);if(!o.contains(p))throw new dv(hv.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));dE(f,p)||f.push(p)}}catch(v){h.e(v)}finally{h.f()}u=new Fv(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new zI(new fy(c),u,s)}var JI=function(e){ce(n,e);var t=pe(n);function n(){return re(this,n),t.apply(this,arguments)}return ae(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.xa)throw 1===e.xa?e.Ua("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Ua("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(VI);function XI(e,t,n){return new KI({xa:3,Ka:t.settings.Ka,methodName:e._methodName,Oa:n},t.databaseId,t.k,t.ignoreUndefinedProperties)}var $I=function(e){ce(n,e);var t=pe(n);function n(){return re(this,n),t.apply(this,arguments)}return ae(n,[{key:"_toFieldTransform",value:function(e){return new hm(e.path,new im)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(VI),ZI=function(e){ce(n,e);var t=pe(n);function n(e,r){var i;return re(this,n),(i=t.call(this,e)).Qa=r,i}return ae(n,[{key:"_toFieldTransform",value:function(e){var t=XI(this,e,!0),n=this.Qa.map((function(e){return aE(e,t)})),r=new am(n);return new hm(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(VI),eE=function(e){ce(n,e);var t=pe(n);function n(e,r){var i;return re(this,n),(i=t.call(this,e)).Qa=r,i}return ae(n,[{key:"_toFieldTransform",value:function(e){var t=XI(this,e,!0),n=this.Qa.map((function(e){return aE(e,t)})),r=new um(n);return new hm(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(VI),tE=function(e){ce(n,e);var t=pe(n);function n(e,r){var i;return re(this,n),(i=t.call(this,e)).Wa=r,i}return ae(n,[{key:"_toFieldTransform",value:function(e){var t=new cm(e.k,Zy(e.k,this.Wa));return new hm(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(VI);function nE(e,t,n,r){var i=e.ja(1,t,n);sE("Data must be an object, but it was:",i,r);var a=[],o=fy.empty();Pv(r,(function(e,r){var u=fE(t,e,n);r=We(r);var s=i.La(u);if(r instanceof JI)a.push(u);else{var c=aE(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new Fv(a);return new WI(o,u,i.fieldTransforms)}function rE(e,t,n,r,i,a){var o=e.ja(1,t,n),u=[cE(t,r,n)],s=[i];if(a.length%2!=0)throw new dv(hv.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(cE(t,a[c])),s.push(a[c+1]);for(var l=[],f=fy.empty(),h=u.length-1;h>=0;--h)if(!dE(l,u[h])){var d=u[h],p=s[h];p=We(p);var v=o.La(d);if(p instanceof JI)l.push(d);else{var y=aE(p,v);null!=y&&(l.push(d),f.set(d,y))}}var m=new Fv(l);return new WI(f,m,o.fieldTransforms)}function iE(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return aE(n,e.ja(r?4:3,t))}function aE(e,t){if(uE(e=We(e)))return sE("Unsupported field value:",t,e),oE(e,t);if(e instanceof VI)return function(e,t){if(!HI(t.xa))throw t.Ua("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Ua("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Oa&&4!==t.xa)throw t.Ua("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=oe(e);try{for(a.s();!(n=a.n()).done;){var o=aE(n.value,t.Ba(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=We(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Zy(t.k,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Av.fromDate(e);return{timestampValue:ug(t.k,n)}}if(e instanceof Av){var r=new Av(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:ug(t.k,r)}}if(e instanceof qI)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof jI)return{bytesValue:sg(t.k,e._byteString)};if(e instanceof kI){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.Ua("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:fg(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Ua("Unsupported field value: ".concat(dI(e)))}(e,t)}function oE(e,t){var n={};return Ov(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Pv(e,(function(e,r){var i=aE(r,t.Fa(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function uE(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Av||e instanceof qI||e instanceof jI||e instanceof kI||e instanceof VI)}function sE(e,t,n){if(!uE(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=dI(n);throw"an object"===r?t.Ua(e+" a custom object"):t.Ua(e+" "+r)}}function cE(e,t,n){if((t=We(t))instanceof FI)return t._internalPath;if("string"==typeof t)return fE(e,t);throw hE("Field path arguments must be of type string or FieldPath.",e,!1,void 0,n)}var lE=new RegExp("[~\\*/\\[\\]]");function fE(e,t,n){if(t.search(lE)>=0)throw hE("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return ve(FI,Ke(t.split(".")))._internalPath}catch(r){throw hE("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function hE(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new dv(hv.INVALID_ARGUMENT,u+e+s)}function dE(e,t){return e.some((function(e){return e.isEqual(t)}))}var pE=function(){function e(t,n,r,i,a){re(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return ae(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new kI(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new vE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(yE("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),vE=function(e){ce(n,e);var t=pe(n);function n(){return re(this,n),t.apply(this,arguments)}return ae(n,[{key:"data",value:function(){return Ar(le(n.prototype),"data",this).call(this)}}]),n}(pE);function yE(e,t){return"string"==typeof t?fE(e,t):t instanceof FI?t._internalPath:t._delegate._internalPath}var mE=function(){function e(t,n){re(this,e),this.hasPendingWrites=t,this.fromCache=n}return ae(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),gE=function(e){ce(n,e);var t=pe(n);function n(e,r,i,a,o,u){var s;return re(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return ae(n,[{key:"exists",value:function(){return Ar(le(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new kE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(yE("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(pE),kE=function(e){ce(n,e);var t=pe(n);function n(){return re(this,n),t.apply(this,arguments)}return ae(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ar(le(n.prototype),"data",this).call(this,e)}}]),n}(gE),wE=function(){function e(t,n,r,i){re(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new mE(i.hasPendingWrites,i.fromCache),this.query=r}return ae(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new kE(n._firestore,n._userDataWriter,r.key,r,new mE(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new dv(hv.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new kE(e._firestore,e._userDataWriter,t.doc.key,t.doc,new mE(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new kE(e._firestore,e._userDataWriter,t.doc.key,t.doc,new mE(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:bE(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function bE(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return cv()}}function _E(e,t){return e instanceof gE&&t instanceof gE?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof wE&&t instanceof wE&&e._firestore===t._firestore&&EI(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function xE(e){if(Fy(e)&&0===e.explicitOrderBy.length)throw new dv(hv.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var IE=ae((function e(){re(this,e)}));function EE(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var TE=function(e){ce(n,e);var t=pe(n);function n(e,r,i){var a;return re(this,n),(a=t.call(this)).Ga=e,a.za=r,a.Ha=i,a.type="where",a}return ae(n,[{key:"_apply",value:function(e){var t=QI(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new dv(hv.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on FieldPath.documentId()."));if("in"===a||"not-in"===a){UE(o,a);var s,c=[],l=oe(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(ME(r,e,f))}}catch(d){l.e(d)}finally{l.f()}u={arrayValue:{values:c}}}else u=ME(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||UE(o,a),u=iE(n,"where",o,"in"===a||"not-in"===a);var h=ky.create(i,a,u);return function(e,t){if(t.V()){var n=Vy(e);if(null!==n&&!n.isEqual(t.field))throw new dv(hv.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=jy(e);null!==r&&FE(e,t.field,r)}var i=function(e,t){var n,r=oe(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new dv(hv.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new dv(hv.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,h),h}(e._query,0,t,e.firestore._databaseId,this.Ga,this.za,this.Ha);return new wI(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new Dy(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(IE);var SE=function(e){ce(n,e);var t=pe(n);function n(e,r){var i;return re(this,n),(i=t.call(this)).Ga=e,i.Ja=r,i.type="orderBy",i}return ae(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new dv(hv.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new dv(hv.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Ny(t,n);return function(e,t){if(null===jy(e)){var n=Vy(e);null!==n&&FE(e,n,t.field)}}(e,r),r}(e._query,this.Ga,this.Ja);return new wI(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Dy(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(IE);var CE=function(e){ce(n,e);var t=pe(n);function n(e,r,i){var a;return re(this,n),(a=t.call(this)).type=e,a.Ya=r,a.Xa=i,a}return ae(n,[{key:"_apply",value:function(e){return new wI(e.firestore,e.converter,Wy(e._query,this.Ya,this.Xa))}}]),n}(IE);var AE=function(e){ce(n,e);var t=pe(n);function n(e,r,i){var a;return re(this,n),(a=t.call(this)).type=e,a.Za=r,a.tc=i,a}return ae(n,[{key:"_apply",value:function(e){var t=LE(e,this.type,this.Za,this.tc);return new wI(e.firestore,e.converter,function(e,t){return new Dy(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(IE);function NE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new AE("startAt",t,!0)}function RE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new AE("startAfter",t,!1)}var PE=function(e){ce(n,e);var t=pe(n);function n(e,r,i){var a;return re(this,n),(a=t.call(this)).type=e,a.Za=r,a.tc=i,a}return ae(n,[{key:"_apply",value:function(e){var t=LE(e,this.type,this.Za,this.tc);return new wI(e.firestore,e.converter,function(e,t){return new Dy(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(IE);function OE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new PE("endBefore",t,!0)}function DE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new PE("endAt",t,!1)}function LE(e,t,n,r){if(n[0]=We(n[0]),n[0]instanceof pE)return function(e,t,n,r,i){if(!r)throw new dv(hv.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=oe(By(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(iy(t,r.key));else{var c=r.data.field(s.field);if(Wv(c))throw new dv(hv.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new dv(hv.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new Cy(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=QI(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new dv(hv.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new dv(hv.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!qy(e)&&-1!==c.indexOf("/"))throw new dv(hv.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(Lv.fromString(c));if(!Jv.isDocumentKey(l))throw new dv(hv.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new Jv(l);u.push(iy(t,f))}else{var h=iE(n,r,c);u.push(h)}}return new Cy(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function ME(e,t,n){if("string"==typeof(n=We(n))){if(""===n)throw new dv(hv.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!qy(t)&&-1!==n.indexOf("/"))throw new dv(hv.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Lv.fromString(n));if(!Jv.isDocumentKey(r))throw new dv(hv.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return iy(e,new Jv(r))}if(n instanceof kI)return iy(e,n._key);throw new dv(hv.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(dI(n),"."))}function UE(e,t){if(!Array.isArray(e)||0===e.length)throw new dv(hv.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new dv(hv.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function FE(e,t,n){if(!n.isEqual(t))throw new dv(hv.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var jE=function(){function e(){re(this,e)}return ae(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Xv(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Bv(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(zv(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw cv()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return Pv(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new qI(Bv(e.latitude),Bv(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Hv(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Kv(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=qv(e);return new Av(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Lv.fromString(e);lv(Ug(n));var r=new uI(n.get(1),n.get(3)),i=new Jv(n.popFirst(5));return r.isEqual(t)||ov("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function VE(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var qE=function(e){ce(n,e);var t=pe(n);function n(e){var r;return re(this,n),(r=t.call(this)).firestore=e,r}return ae(n,[{key:"convertBytes",value:function(e){return new jI(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new kI(this.firestore,null,t)}}]),n}(jE),BE=function(){function e(t,n){re(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=QI(t)}return ae(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=zE(e,this._firestore),i=VE(r.converter,t,n),a=YI(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,pm.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=zE(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=We(t))||t instanceof FI?rE(this._dataReader,"WriteBatch.update",i._key,t,n,o):nE(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,pm.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=zE(e,this._firestore);return this._mutations=this._mutations.concat(new Am(t._key,pm.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new dv(hv.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function zE(e,t){if((e=We(e)).firestore!==t)throw new dv(hv.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var WE=function(e){ce(n,e);var t=pe(n);function n(e){var r;return re(this,n),(r=t.call(this)).firestore=e,r}return ae(n,[{key:"convertBytes",value:function(e){return new jI(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new kI(this.firestore,null,t)}}]),n}(jE);function HE(e){e=pI(e,kI);var t=pI(e.firestore,AI),n=NI(t),r=new WE(t);return function(e,t){var n=new pv;return e.asyncQueue.enqueueAndForget(Z(te().mark((function r(){return te().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Z(te().mark((function e(t,n,r){var i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=fv(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.Wn.Rn(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new dv(hv.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=p_(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Zx(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new gE(t,r,e._key,n,new mE(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function KE(e){e=pI(e,wI);var t=pI(e.firestore,AI),n=NI(t),r=new WE(t);return function(e,t){var n=new pv;return e.asyncQueue.enqueueAndForget(Z(te().mark((function r(){return te().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Z(te().mark((function e(t,n,r){var i,a,o,u,s;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Fw(t,n,!0);case 3:i=e.sent,a=new D_(n,i.zn),o=a.bo(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=p_(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Zx(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new wE(t,r,e,n)}))}function GE(e,t,n){e=pI(e,kI);var r=pI(e.firestore,AI),i=VE(e.converter,t,n);return XE(r,[YI(QI(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,pm.none())])}function QE(e,t,n){e=pI(e,kI);for(var r=pI(e.firestore,AI),i=QI(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return XE(r,[("string"==typeof(t=We(t))||t instanceof FI?rE(i,"updateDoc",e._key,t,n,o):nE(i,"updateDoc",e._key,t)).toMutation(e._key,pm.exists(!0))])}function YE(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=We(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||SI(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(SI(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof kI)l=pI(e.firestore,AI),f=My(e._key.path),c={next:function(t){n[s]&&n[s]($E(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=pI(e,wI);l=pI(p.firestore,AI),f=p._query;var v=new WE(l);c={next:function(e){n[s]&&n[s](new wE(l,v,p,e))},error:n[s+1],complete:n[s+2]},xE(e._query)}return function(e,t,n,r){var i=new jx(r),a=new S_(t,i,n);return e.asyncQueue.enqueueAndForget(Z(te().mark((function t(){return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=w_,t.next=3,nI(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.na(),e.asyncQueue.enqueueAndForget(Z(te().mark((function t(){return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=__,t.next=3,nI(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(NI(l),f,h,c)}function JE(e,t){return function(e,t){var n=new jx(t);return e.asyncQueue.enqueueAndForget(Z(te().mark((function t(){return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){fv(e).io.add(t),t.next()},t.next=3,nI(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.na(),e.asyncQueue.enqueueAndForget(Z(te().mark((function t(){return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){fv(e).io.delete(t)},t.next=3,nI(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(NI(e=pI(e,AI)),SI(t)?t:{next:t})}function XE(e,t){return function(e,t){var n=new pv;return e.asyncQueue.enqueueAndForget(Z(te().mark((function r(){return te().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=W_,r.next=3,tI(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(NI(e),t)}function $E(e,t,n){var r=n.docs.get(t._key),i=new WE(e);return new gE(e,i,t._key,r,new mE(n.hasPendingWrites,n.fromCache),t.converter)}var ZE=function(e){ce(n,e);var t=pe(n);function n(e,r){var i;return re(this,n),(i=t.call(this,e,r))._firestore=e,i}return ae(n,[{key:"get",value:function(e){var t=this,r=zE(e,this._firestore),i=new WE(this._firestore);return Ar(le(n.prototype),"get",this).call(this,e).then((function(e){return new gE(t._firestore,i,r._key,e._document,new mE(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){re(this,e),this._firestore=t,this._transaction=n,this._dataReader=QI(t)}return ae(e,[{key:"get",value:function(e){var t=this,n=zE(e,this._firestore),r=new qE(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return cv();var i=e[0];if(i.isFoundDocument())return new pE(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new pE(t._firestore,r,n._key,null,n.converter);throw cv()}))}},{key:"set",value:function(e,t,n){var r=zE(e,this._firestore),i=VE(r.converter,t,n),a=YI(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=zE(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=We(t))||t instanceof FI?rE(this._dataReader,"Transaction.update",i._key,t,n,o):nE(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=zE(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function eT(e,t){return function(e,t){var n=new pv;return e.asyncQueue.enqueueAndForget(Z(te().mark((function r(){var i;return te().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,function(e){return Jx(e).then((function(e){return e.datastore}))}(e);case 2:i=r.sent,new Bx(e.asyncQueue,i,t,n).run();case 4:case"end":return r.stop()}}),r)})))),n.promise}(NI(e=pI(e,AI)),(function(n){return t(new ZE(e,n))}))}function tT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new ZI("arrayUnion",t)}function nT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new eE("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){nv=e}(Tt),mt(new Ge("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new AI(i,new gv(e.getProvider("auth-internal")),new _v(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),Pt(ev,"3.4.1",e),Pt(ev,"3.4.1","esm2017")}();function rT(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new dv("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function iT(){if("undefined"===typeof Uint8Array)throw new dv("unimplemented","Uint8Arrays are not available in this environment.")}function aT(){if("undefined"==typeof atob)throw new dv("unimplemented","Blobs are unavailable in Firestore in this environment.")}var oT=function(){function e(t){re(this,e),this._delegate=t}return ae(e,[{key:"toBase64",value:function(){return aT(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return iT(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return aT(),new e(jI.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return iT(),new e(jI.fromUint8Array(t))}}]),e}();function uT(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=oe(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var sT=function(){function e(){re(this,e)}return ae(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){UI(e=pI(e,AI));var n=NI(e),r=e._freezeSettings(),i=new Ux;return PI(n,i,new Lx(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){UI(e=pI(e,AI));var t=NI(e),n=e._freezeSettings(),r=new Ux;return PI(t,r,new Mx(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new dv(hv.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new pv;return e._queue.enqueueAndForgetEvenWhileRestricted(Z(te().mark((function n(){return te().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=Z(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ck.bt()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,ck.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(bw(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),cT=function(){function e(t,n,r){var i=this;re(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof uI||(this._appCompat=t)}return ae(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||uv("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};gI(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return OI(this._delegate)}},{key:"disableNetwork",value:function(){return DI(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&lI("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new pv;return e.asyncQueue.enqueueAndForget(Z(te().mark((function n(){return te().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=tx,n.next=3,tI(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(NI(e=pI(e,AI)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return JE(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new dv("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new xT(this,_I(this._delegate,e))}catch(t){throw vT(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new pT(this,xI(this._delegate,e))}catch(t){throw vT(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new wT(this,function(e,t){if(e=pI(e,mI),cI("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new dv(hv.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new wI(e,null,function(e){return new Dy(Lv.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw vT(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return eT(this._delegate,(function(n){return e(new fT(t,n))}))}},{key:"batch",value:function(){var e=this;return NI(this._delegate),new hT(new BE(this._delegate,(function(t){return XE(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return LI(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return MI(this._delegate,e).then((function(e){return e?new wT(t,e):null}))}}]),e}(),lT=function(e){ce(n,e);var t=pe(n);function n(e){var r;return re(this,n),(r=t.call(this)).firestore=e,r}return ae(n,[{key:"convertBytes",value:function(e){return new oT(new jI(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return pT.forKey(t,this.firestore,null)}}]),n}(jE);var fT=function(){function e(t,n){re(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new lT(t)}return ae(e,[{key:"get",value:function(e){var t=this,n=IT(e);return this._delegate.get(n).then((function(e){return new gT(t._firestore,new gE(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=IT(e);return n?(rT("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=IT(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=IT(e);return this._delegate.delete(t),this}}]),e}(),hT=function(){function e(t){re(this,e),this._delegate=t}return ae(e,[{key:"set",value:function(e,t,n){var r=IT(e);return n?(rT("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=IT(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=IT(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),dT=function(){function e(t,n,r){re(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return ae(e,[{key:"fromFirestore",value:function(e,t){var n=new kE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new kT(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new lT(t),n),i.set(n,a)),a}}]),e}();dT.INSTANCES=new WeakMap;var pT=function(){function e(t,n){re(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new lT(t)}return ae(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new xT(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new xT(this.firestore,_I(this._delegate,e))}catch(t){throw vT(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=We(e))instanceof kI&&II(this._delegate,e)}},{key:"set",value:function(e,t){t=rT("DocumentReference.set",t);try{return t?GE(this._delegate,e,t):GE(this._delegate,e)}catch(n){throw vT(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?QE(this._delegate,e):QE.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw vT(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return XE(pI(e.firestore,AI),[new Am(e._key,pm.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=yT(n),a=mT(n,(function(t){return new gT(e.firestore,new gE(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return YE(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?HE(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=pI(e,kI);var t=pI(e.firestore,AI);return iI(NI(t),e._key,{source:"server"}).then((function(n){return $E(t,e,n)}))}(this._delegate):function(e){e=pI(e,kI);var t=pI(e.firestore,AI);return iI(NI(t),e._key).then((function(n){return $E(t,e,n)}))}(this._delegate),t.then((function(e){return new gT(n.firestore,new gE(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(dT.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new dv("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new kI(n._delegate,r,new Jv(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new kI(n._delegate,r,t))}}]),e}();function vT(e,t,n){return e.message=e.message.replace(t,n),e}function yT(e){var t,n=oe(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!uT(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function mT(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=uT(e[0])?e[0]:uT(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var gT=function(){function e(t,n){re(this,e),this._firestore=t,this._delegate=n}return ae(e,[{key:"ref",get:function(){return new pT(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return _E(this._delegate,e._delegate)}}]),e}(),kT=function(e){ce(n,e);var t=pe(n);function n(){return re(this,n),t.apply(this,arguments)}return ae(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||cv()}(void 0!==t),t}}]),n}(gT),wT=function(){function e(t,n){re(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new lT(t)}return ae(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,EE(this._delegate,function(e,t,n){var r=t,i=yE("where",e);return new TE(i,r,n)}(t,n,r)))}catch(i){throw vT(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,EE(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=yE("orderBy",e);return new SE(n,t)}(t,n)))}catch(r){throw vT(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,EE(this._delegate,function(e){return vI("limit",e),new CE("limit",e,"F")}(t)))}catch(n){throw vT(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,EE(this._delegate,function(e){return vI("limitToLast",e),new CE("limitToLast",e,"L")}(t)))}catch(n){throw vT(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,EE(this._delegate,NE.apply(void 0,arguments)))}catch(t){throw vT(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,EE(this._delegate,RE.apply(void 0,arguments)))}catch(t){throw vT(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,EE(this._delegate,OE.apply(void 0,arguments)))}catch(t){throw vT(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,EE(this._delegate,DE.apply(void 0,arguments)))}catch(t){throw vT(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return EI(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?KE(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=pI(e,wI);var t=pI(e.firestore,AI),n=NI(t),r=new WE(t);return aI(n,e._query,{source:"server"}).then((function(n){return new wE(t,r,e,n)}))}(this._delegate):function(e){e=pI(e,wI);var t=pI(e.firestore,AI),n=NI(t),r=new WE(t);return xE(e._query),aI(n,e._query).then((function(n){return new wE(t,r,e,n)}))}(this._delegate),t.then((function(e){return new _T(n.firestore,new wE(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=yT(n),a=mT(n,(function(t){return new _T(e.firestore,new wE(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return YE(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(dT.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),bT=function(){function e(t,n){re(this,e),this._firestore=t,this._delegate=n}return ae(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new kT(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),_T=function(){function e(t,n){re(this,e),this._firestore=t,this._delegate=n}return ae(e,[{key:"query",get:function(){return new wT(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new kT(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new bT(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new kT(n._firestore,r))}))}},{key:"isEqual",value:function(e){return _E(this._delegate,e._delegate)}}]),e}(),xT=function(e){ce(n,e);var t=pe(n);function n(e,r){var i;return re(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return ae(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new pT(this.firestore,e):null}},{key:"doc",value:function(e){try{return new pT(this.firestore,void 0===e?xI(this._delegate):xI(this._delegate,e))}catch(t){throw vT(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=pI(e.firestore,AI),r=xI(e),i=VE(e.converter,t);return XE(n,[YI(QI(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,pm.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new pT(t.firestore,e)}))}},{key:"isEqual",value:function(e){return II(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(dT.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(wT);function IT(e){return pI(e,kI)}var ET=function(){function e(){re(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=ve(FI,n)}return ae(e,[{key:"isEqual",value:function(e){return(e=We(e))instanceof FI&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Uv.keyField().canonicalString())}}]),e}(),TT=function(){function e(t){re(this,e),this._delegate=t}return ae(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new $I("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new JI("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=tT.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=nT.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new tE("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),ST={Firestore:cT,GeoPoint:qI,Timestamp:Av,Blob:oT,Transaction:fT,WriteBatch:hT,DocumentReference:pT,DocumentSnapshot:gT,Query:wT,QueryDocumentSnapshot:kT,QuerySnapshot:_T,CollectionReference:xT,FieldPath:ET,FieldValue:TT,setLogLevel:function(e){!function(e){rv.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new Ge("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},ST)))}(e,(function(e,t){return new cT(e,t,new sT)})),e.registerVersion("@firebase/firestore-compat","0.1.10")}(qt);qt.initializeApp({apiKey:"AIzaSyBBEr8SLQe69fkfF8l5v0pOJ9RJA0lxXx0",authDomain:"nwitter-ae508.firebaseapp.com",projectId:"nwitter-ae508",storageBucket:"nwitter-ae508.appspot.com",messagingSenderId:"222585799700",appId:"1:222585799700:web:258c6142bd688290b81301"});var CT=qt,AT=qt.auth(),NT=qt.firestore(),RT=qt.storage(),PT=n(184),OT=function(e){var n=e.userObj,r=e.refreshUser,i=A(),a=s((0,t.useState)(n.displayName),2),o=a[0],u=a[1],c=function(){var e=Z(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n.displayName===o){e.next=5;break}return e.next=4,n.updateProfile({displayName:o});case 4:r();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,PT.jsxs)(PT.Fragment,{children:[(0,PT.jsxs)("form",{onSubmit:c,children:[(0,PT.jsx)("input",{onChange:function(e){var t=e.target.value;u(t)},type:"text",placeholder:"Display Name",value:o}),(0,PT.jsx)("input",{type:"submit",value:"Update Profile"})]}),(0,PT.jsx)("button",{onClick:function(){AT.signOut(),i("/")},children:"Log Out"})]})},DT=function(){var e=s((0,t.useState)(""),2),n=e[0],r=e[1],i=s((0,t.useState)(""),2),a=i[0],o=i[1],u=s((0,t.useState)(!0),2),c=u[0],l=u[1],f=s((0,t.useState)(""),2),h=f[0],d=f[1],p=function(e){var t=e.target,n=t.name,i=t.value;"email"===n?r(i):"password"===n&&o(i)},v=function(){var e=Z(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!c){e.next=7;break}return e.next=5,AT.signInWithEmailAndPassword(n,a);case 5:e.next=9;break;case 7:return e.next=9,AT.createUserWithEmailAndPassword(n,a);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),d(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return(0,PT.jsxs)(PT.Fragment,{children:[(0,PT.jsxs)("form",{onSubmit:v,children:[(0,PT.jsx)("input",{name:"email",type:"email",value:n,onChange:p,placeholder:"Email",required:!0}),(0,PT.jsx)("input",{name:"password",type:"password",value:a,onChange:p,placeholder:"Password",required:!0}),(0,PT.jsx)("input",{type:"submit",value:c?"Login":"Create Account"}),h]}),(0,PT.jsx)("span",{onClick:function(){return l((function(e){return!e}))},children:c?"Create Account":"Sign In"})]})},LT=function(){var e=function(){var e=Z(te().mark((function e(t){var n,r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return("google"===(n=t.target.name)||"github"===n)&&(r=new CT.auth.GoogleAuthProvider),e.next=4,AT.signInWithPopup(r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,PT.jsxs)("div",{children:[(0,PT.jsx)(DT,{}),(0,PT.jsxs)("div",{children:[(0,PT.jsx)("button",{onClick:e,name:"google",children:"Continue with Google"}),(0,PT.jsx)("button",{onClick:e,name:"github",children:"Continue with Github"})]})]})};function MT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var UT,FT=function(e){var n=e.nweetObj,r=e.isOwner,i=s((0,t.useState)(!1),2),a=i[0],o=i[1],u=s((0,t.useState)(n.text),2),c=u[0],l=u[1],f=function(){var e=Z(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("\uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")){e.next=7;break}return e.next=4,NT.doc("nweets/".concat(n.id)).delete();case 4:if(""===n.attachmentUrl){e.next=7;break}return e.next=7,RT.refFromURL(n.attachmentUrl).delete();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){return o((function(e){return!e}))},d=function(){var e=Z(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!window.confirm("\uc218\uc815\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")){e.next=6;break}return e.next=5,NT.doc("nweets/".concat(n.id)).update({text:c});case 5:o(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,PT.jsx)("div",{children:a?(0,PT.jsxs)(PT.Fragment,{children:[(0,PT.jsxs)("form",{onSubmit:d,children:[(0,PT.jsx)("input",{onChange:function(e){var t=e.target.value;l(t)},value:c,required:!0}),(0,PT.jsx)("input",{type:"submit",value:"Update Nweet"})]}),(0,PT.jsx)("button",{onClick:h,children:"Cancel"})]}):(0,PT.jsxs)(PT.Fragment,{children:[(0,PT.jsx)("h4",{children:n.text}),n.attachmentUrl&&(0,PT.jsx)("img",{src:n.attachmentUrl,alt:"",width:"50px",height:"50px"}),r&&(0,PT.jsxs)(PT.Fragment,{children:[(0,PT.jsx)("button",{onClick:f,children:"Delete Nweet"}),(0,PT.jsx)("button",{onClick:h,children:"Edit Nweet"})]})]})})},jT=new Uint8Array(16);function VT(){if(!UT&&!(UT="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return UT(jT)}var qT=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var BT=function(e){return"string"===typeof e&&qT.test(e)},zT=[],WT=0;WT<256;++WT)zT.push((WT+256).toString(16).substr(1));var HT=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(zT[e[t+0]]+zT[e[t+1]]+zT[e[t+2]]+zT[e[t+3]]+"-"+zT[e[t+4]]+zT[e[t+5]]+"-"+zT[e[t+6]]+zT[e[t+7]]+"-"+zT[e[t+8]]+zT[e[t+9]]+"-"+zT[e[t+10]]+zT[e[t+11]]+zT[e[t+12]]+zT[e[t+13]]+zT[e[t+14]]+zT[e[t+15]]).toLowerCase();if(!BT(n))throw TypeError("Stringified UUID is invalid");return n};var KT=function(e,t,n){var r=(e=e||{}).random||(e.rng||VT)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return HT(r)},GT=function(e){var n=e.userObj,r=s((0,t.useState)(""),2),i=r[0],a=r[1],o=s((0,t.useState)(""),2),u=o[0],c=o[1],l=function(){var e=Z(te().mark((function e(t){var r,o,s;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r="",""===u){e.next=10;break}return o=RT.ref().child("".concat(n.uid,"/").concat(KT())),e.next=6,o.putString(u,"data_url");case 6:return s=e.sent,e.next=9,s.ref.getDownloadURL();case 9:r=e.sent;case 10:return e.next=12,NT.collection("nweets").add({text:i,createdAt:Date.now(),creatorId:n.uid,attachmentUrl:r});case 12:a(""),c("");case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,PT.jsx)(PT.Fragment,{children:(0,PT.jsxs)("form",{onSubmit:l,children:[(0,PT.jsx)("input",{value:i,onChange:function(e){e.preventDefault();var t=e.target.value;a(t)},type:"text",placeholder:"what's on your mind?",maxLength:120}),(0,PT.jsx)("input",{type:"file",accept:"image/*",onChange:function(e){var t=e.target.files[0],n=new FileReader;t&&t.type.match("image/*")&&n.readAsDataURL(t),n.onload=function(e){var t=e.currentTarget.result;c(t)}}}),(0,PT.jsx)("input",{type:"submit",value:"Nweet"}),u&&(0,PT.jsxs)("div",{children:[(0,PT.jsx)("img",{src:u,alt:"",width:"50px",height:"50px"}),(0,PT.jsx)("button",{onClick:function(){return c("")},children:"Clear"})]})]})})},QT=function(e){var n=e.userObj,r=s((0,t.useState)([]),2),i=r[0],a=r[1];return(0,t.useEffect)((function(){NT.collection("nweets").onSnapshot((function(e){var t=e.docs.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?MT(Object(n),!0).forEach((function(t){ne(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MT(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:e.id},e.data())}));a(t)}))}),[]),(0,PT.jsxs)(PT.Fragment,{children:[(0,PT.jsx)(GT,{userObj:n}),(0,PT.jsx)("div",{children:i.map((function(e){return(0,PT.jsx)(FT,{nweetObj:e,isOwner:e.creatorId===n.uid},e.id)}))})]})},YT=function(e){var t=e.userObj;return(0,PT.jsx)("nav",{children:(0,PT.jsxs)("ul",{children:[(0,PT.jsx)("li",{children:(0,PT.jsx)(X,{to:"/",children:"Home"})}),(0,PT.jsx)("li",{children:(0,PT.jsxs)(X,{to:"/profile",children:[t.displayName,"\uc758 My Profile"]})})]})})},JT=function(e){var t=e.refreshuser,n=e.isLoggedIn,r=e.userObj,i=e.setIsLoggedIn;return(0,PT.jsx)(Y,{basename:"https://jy25827.github.io/nwitter",children:(0,PT.jsxs)(J,{children:[n&&(0,PT.jsx)(YT,{userObj:r}),(0,PT.jsx)(E,{children:n?(0,PT.jsxs)(PT.Fragment,{children:[(0,PT.jsx)(x,{exact:!0,path:"/",children:(0,PT.jsx)(QT,{userObj:r})}),(0,PT.jsx)(x,{exact:!0,path:"/profile",children:(0,PT.jsx)(OT,{userObj:r,setIsLoggedIn:i,refreshuser:t})})]}):(0,PT.jsx)(PT.Fragment,{children:(0,PT.jsx)(x,{exact:!0,path:"/",children:(0,PT.jsx)(LT,{})})})})]})})};var XT=function(){var e=s((0,t.useState)(!1),2),n=e[0],r=e[1],i=s((0,t.useState)(null),2),a=i[0],o=i[1];return(0,t.useEffect)((function(){AT.onAuthStateChanged((function(e){o(!!e&&{uid:e.uid,displayName:e.displayName,updateProfile:function(t){return e.updateProfile(t)}}),r(!0)}))}),[]),(0,PT.jsx)(PT.Fragment,{children:n?(0,PT.jsx)(JT,{refreshUser:function(){var e=AT.currentUser;o({uid:e.uid,displayName:e.displayName,updateProfile:function(t){return e.updateProfile(t)}})},isLoggedIn:Boolean(a),userObj:a}):"initializing..."})};r.render((0,PT.jsx)(t.StrictMode,{children:(0,PT.jsx)(XT,{})}),document.getElementById("root"))}()}();
//# sourceMappingURL=main.fbd2ab6a.js.map